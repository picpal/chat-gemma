2025-09-16 22:28:56 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Starting ChatGemmaApplication using Java 17.0.15 with PID 64039 (/Users/picpal/Desktop/workspace/chatGemma/backend/build/classes/java/main started by picpal in /Users/picpal/Desktop/workspace/chatGemma/backend)
2025-09-16 22:28:56 [restartedMain] DEBUG com.chatgemma.ChatGemmaApplication - Running with Spring Boot v3.4.0, Spring v6.2.0
2025-09-16 22:28:56 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - The following 1 profile is active: "dev"
2025-09-16 22:28:56 [restartedMain] INFO  o.s.b.d.restart.ChangeableUrls - The Class-Path manifest attribute in /Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/ojdbc8-23.5.0.24.07.jar referenced one or more files that do not exist: file:/Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/oraclepki.jar
2025-09-16 22:28:56 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-09-16 22:28:56 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-09-16 22:28:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-16 22:28:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 47 ms. Found 4 JPA repository interfaces.
2025-09-16 22:28:56 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-16 22:28:56 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-16 22:28:56 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.33]
2025-09-16 22:28:57 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-16 22:28:57 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 497 ms
2025-09-16 22:28:57 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-09-16 22:28:57 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:file:./data/chatgemma user=SA
2025-09-16 22:28:57 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-09-16 22:28:57 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./data/chatgemma'
2025-09-16 22:28:57 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Starting ChatGemmaApplication using Java 17.0.15 with PID 97435 (/Users/picpal/Desktop/workspace/chatGemma/backend/build/classes/java/main started by picpal in /Users/picpal/Desktop/workspace/chatGemma/backend)
2025-09-16 22:28:57 [restartedMain] DEBUG com.chatgemma.ChatGemmaApplication - Running with Spring Boot v3.4.0, Spring v6.2.0
2025-09-16 22:28:57 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - The following 1 profile is active: "dev"
2025-09-16 22:28:57 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-16 22:28:57 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.2.Final
2025-09-16 22:28:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-16 22:28:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 4 JPA repository interfaces.
2025-09-16 22:28:57 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-09-16 22:28:57 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-16 22:28:57 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-16 22:28:57 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.33]
2025-09-16 22:28:57 [restartedMain] INFO  o.a.c.c.C.[Tomcat-3].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-16 22:28:57 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 116 ms
2025-09-16 22:28:57 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-09-16 22:28:57 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-16 22:28:57 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-16 22:28:57 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-09-16 22:28:57 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-09-16 22:28:57 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists idx_user_username
2025-09-16 22:28:57 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       add constraint idx_user_username unique (username)
2025-09-16 22:28:57 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-09-16 22:28:57 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-09-16 22:28:57 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-16 22:28:57 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-09-16 22:28:58 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 19 mappings in 'requestMappingHandlerMapping'
2025-09-16 22:28:58 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-16 22:28:58 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-16 22:28:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.AdminController:
	
2025-09-16 22:28:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.AuthController:
	
2025-09-16 22:28:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.ChatController:
	
2025-09-16 22:28:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.WebSocketChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor,Principal)
	{[MESSAGE],[/chat.join]}: joinChat(String,SimpMessageHeaderAccessor,Principal)
2025-09-16 22:28:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-09-16 22:28:58 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-16 22:28:58 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-16 22:28:58 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-09-16 22:28:58 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-09-16 22:28:58 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-09-16 22:28:58 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-09-16 22:28:58 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6498c3cf]
2025-09-16 22:28:58 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6498c3cf]
2025-09-16 22:28:58 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6498c3cf]]
2025-09-16 22:28:58 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-09-16 22:28:58 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 22:28:58 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 22:28:58 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-16 22:28:58 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Started ChatGemmaApplication in 1.776 seconds (process running for 1.912)
2025-09-16 22:28:58 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-09-16 22:28:58 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-16 22:28:58 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-09-16 22:28:58 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-16 22:28:58 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-09-16 22:28:59 [restartedMain] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 90020, SQLState: 90020
2025-09-16 22:28:59 [restartedMain] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]
2025-09-16 22:28:59 [restartedMain] WARN  o.h.e.j.e.i.JdbcEnvironmentInitiator - HHH000342: Could not obtain connection to query metadata
org.hibernate.exception.GenericJDBCException: unable to obtain isolated JDBC connection [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:63) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:116) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.getJdbcEnvironmentUsingJdbcMetadata(JdbcEnvironmentInitiator.java:320) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:129) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:81) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:130) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:238) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:215) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.boot.model.relational.Database.<init>(Database.java:45) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:226) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.<init>(InFlightMetadataCollectorImpl.java:194) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:171) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1431) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1502) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66) ~[spring-orm-6.2.0.jar:6.2.0]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390) ~[spring-orm-6.2.0.jar:6.2.0]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419) ~[spring-orm-6.2.0.jar:6.2.0]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400) ~[spring-orm-6.2.0.jar:6.2.0]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366) ~[spring-orm-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1849) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1798) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:288) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970) ~[spring-context-6.2.0.jar:6.2.0]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627) ~[spring-context-6.2.0.jar:6.2.0]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.4.0.jar:3.4.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752) ~[spring-boot-3.4.0.jar:3.4.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-3.4.0.jar:3.4.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318) ~[spring-boot-3.4.0.jar:3.4.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.0.jar:3.4.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.0.jar:3.4.0]
	at com.chatgemma.ChatGemmaApplication.main(ChatGemmaApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.0.jar:3.4.0]
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.message.DbException.get(DbException.java:212) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.mvstore.db.Store.convertMVStoreException(Store.java:165) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.mvstore.db.Store.<init>(Store.java:142) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.engine.Database.<init>(Database.java:326) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.engine.Engine.openSession(Engine.java:92) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.engine.Engine.openSession(Engine.java:222) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.engine.Engine.createSession(Engine.java:201) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:344) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:124) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.Driver.connect(Driver.java:59) ~[h2-2.3.232.jar:2.3.232]
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:550) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:98) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111) ~[HikariCP-5.1.0.jar:na]
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:126) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:467) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:61) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	... 40 common frames omitted
Caused by: org.h2.mvstore.MVStoreException: The file is locked: /Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db [2.3.232/7]
	at org.h2.mvstore.DataUtils.newMVStoreException(DataUtils.java:996) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.mvstore.SingleFileStore.lockFileChannel(SingleFileStore.java:143) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:117) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:81) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.mvstore.MVStore.<init>(MVStore.java:286) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.mvstore.MVStore$Builder.open(MVStore.java:2035) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.mvstore.db.Store.<init>(Store.java:133) ~[h2-2.3.232.jar:2.3.232]
	... 57 common frames omitted
2025-09-16 22:28:59 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-16 22:28:59 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (null)']
	Database driver: undefined/unknown
	Database version: 2.1.214
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-09-16 22:28:59 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-09-16 22:28:59 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-09-16 22:29:00 [restartedMain] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 90020, SQLState: 90020
2025-09-16 22:29:00 [restartedMain] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]
2025-09-16 22:29:00 [restartedMain] ERROR o.s.o.j.LocalContainerEntityManagerFactoryBean - Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
2025-09-16 22:29:00 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
2025-09-16 22:29:00 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-09-16 22:29:00 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-09-16 22:29:00 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1802) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:288) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970) ~[spring-context-6.2.0.jar:6.2.0]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627) ~[spring-context-6.2.0.jar:6.2.0]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.4.0.jar:3.4.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752) ~[spring-boot-3.4.0.jar:3.4.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-3.4.0.jar:3.4.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318) ~[spring-boot-3.4.0.jar:3.4.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.0.jar:3.4.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.0.jar:3.4.0]
	at com.chatgemma.ChatGemmaApplication.main(ChatGemmaApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.0.jar:3.4.0]
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:431) ~[spring-orm-6.2.0.jar:6.2.0]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400) ~[spring-orm-6.2.0.jar:6.2.0]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366) ~[spring-orm-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1849) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1798) ~[spring-beans-6.2.0.jar:6.2.0]
	... 20 common frames omitted
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:74) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:39) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcConnection(ImprovedExtractionContextImpl.java:63) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.tool.schema.extract.spi.ExtractionContext.getQueryResults(ExtractionContext.java:43) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.tool.schema.extract.internal.SequenceInformationExtractorLegacyImpl.extractMetadata(SequenceInformationExtractorLegacyImpl.java:39) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.tool.schema.extract.internal.DatabaseInformationImpl.initializeSequences(DatabaseInformationImpl.java:66) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.tool.schema.extract.internal.DatabaseInformationImpl.<init>(DatabaseInformationImpl.java:60) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.tool.schema.internal.Helper.buildDatabaseInformation(Helper.java:185) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:93) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:280) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66) ~[spring-orm-6.2.0.jar:6.2.0]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390) ~[spring-orm-6.2.0.jar:6.2.0]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419) ~[spring-orm-6.2.0.jar:6.2.0]
	... 24 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.message.DbException.get(DbException.java:212) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.mvstore.db.Store.convertMVStoreException(Store.java:165) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.mvstore.db.Store.<init>(Store.java:142) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.engine.Database.<init>(Database.java:326) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.engine.Engine.openSession(Engine.java:92) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.engine.Engine.openSession(Engine.java:222) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.engine.Engine.createSession(Engine.java:201) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:344) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:124) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.Driver.connect(Driver.java:59) ~[h2-2.3.232.jar:2.3.232]
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:550) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:98) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111) ~[HikariCP-5.1.0.jar:na]
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:126) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:467) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:46) ~[hibernate-core-6.6.2.Final.jar:6.6.2.Final]
	... 44 common frames omitted
Caused by: org.h2.mvstore.MVStoreException: The file is locked: /Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db [2.3.232/7]
	at org.h2.mvstore.DataUtils.newMVStoreException(DataUtils.java:996) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.mvstore.SingleFileStore.lockFileChannel(SingleFileStore.java:143) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:117) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:81) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.mvstore.MVStore.<init>(MVStore.java:286) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.mvstore.MVStore$Builder.open(MVStore.java:2035) ~[h2-2.3.232.jar:2.3.232]
	at org.h2.mvstore.db.Store.<init>(Store.java:133) ~[h2-2.3.232.jar:2.3.232]
	... 61 common frames omitted
2025-09-16 22:29:58 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-09-16 22:30:11 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-16 22:30:11 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-09-16 22:30:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-09-16 22:30:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-09-16 22:30:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-09-16 22:30:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1bdac214
2025-09-16 22:30:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@50185014
2025-09-16 22:30:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-16 22:30:11 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-09-16 22:30:11 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 22:30:11 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 22:30:11 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 22:30:11 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 22:30:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 22:30:11 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 22:30:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 22:30:11 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 22:30:11 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:30:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:30:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 22:30:11 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 22:30:11 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 22:30:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 22:30:11 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:30:11 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:30:15 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-09-16 22:30:15 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-09-16 22:30:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-09-16 22:30:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpSession)
2025-09-16 22:30:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.chatgemma.dto.request.LoginRequest@3d332292]
2025-09-16 22:30:15 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.email=?
2025-09-16 22:30:15 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* insert for
        com.chatgemma.entity.AuditLog */insert 
    into
        audit_logs (action, details, ip_address, resource_id, resource_type, timestamp, user_agent, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-09-16 22:30:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:30:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@7a72bae3]
2025-09-16 22:30:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:30:15 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:30:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 22:30:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 22:30:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 22:30:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 22:30:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 22:30:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 22:30:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 22:30:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 22:30:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 22:30:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 22:30:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:30:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:30:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@69bf1427, com.chatgemma.dto.response.ChatResponse@1fe4d48c]]
2025-09-16 22:30:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@1c2b925d, com.chatgemma.dto.response.ChatResponse@4adaffb6]]
2025-09-16 22:30:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:30:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:30:15 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:30:15 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:30:15 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758029415443
2025-09-16 22:30:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758029415443
2025-09-16 22:30:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758029415443
2025-09-16 22:30:15 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758029415443
2025-09-16 22:30:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758029415443", parameters={masked}
2025-09-16 22:30:15 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758029415443", parameters={masked}
2025-09-16 22:30:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@2709715e
2025-09-16 22:30:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@2709715e
2025-09-16 22:30:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758029415443
2025-09-16 22:30:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758029415443
2025-09-16 22:30:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:30:15 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:30:15 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:30:15 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:30:15 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/256/wk0s1wt4/websocket
2025-09-16 22:30:15 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/256/wk0s1wt4/websocket
2025-09-16 22:30:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/256/wk0s1wt4/websocket", parameters={}
2025-09-16 22:30:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@2709715e
2025-09-16 22:30:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/256/wk0s1wt4/websocket
2025-09-16 22:30:15 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:30:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 22:30:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=wk0s1wt4]
2025-09-16 22:30:15 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=wk0s1wt4
2025-09-16 22:30:15 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/467/evaikfmp/websocket
2025-09-16 22:30:15 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/467/evaikfmp/websocket
2025-09-16 22:30:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/467/evaikfmp/websocket", parameters={}
2025-09-16 22:30:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@2709715e
2025-09-16 22:30:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/467/evaikfmp/websocket
2025-09-16 22:30:15 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:30:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 22:30:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=evaikfmp]
2025-09-16 22:30:15 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=wk0s1wt4, lookupDestination='/chat.join'
2025-09-16 22:30:15 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-userwk0s1wt4 subscriptionId=sub-0 session=wk0s1wt4 payload=byte[0]
2025-09-16 22:30:15 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 22:30:15 [clientInboundChannel-7] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=wk0s1wt4
2025-09-16 22:30:15 [clientInboundChannel-7] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 22:30:20 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=wk0s1wt4, lookupDestination='/chat.sendMessage'
2025-09-16 22:30:20 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 22:30:20 [clientInboundChannel-10] INFO  c.c.c.WebSocketChatController - WebSocket message received: chatId=2, content=hello, principal=null, sessionId=wk0s1wt4
2025-09-16 22:30:20 [clientInboundChannel-10] INFO  c.c.c.WebSocketChatController - Processing AI response for message: hello
2025-09-16 22:30:20 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.w.r.f.client.ExchangeFunctions - [1860d06f] HTTP POST http://localhost:11434/api/generate
2025-09-16 22:30:20 [ForkJoinPool.commonPool-worker-1] ERROR i.n.r.d.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-09-16 22:30:21 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [1860d06f] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@69f2b55e]
2025-09-16 22:30:25 [reactor-http-nio-2] DEBUG o.s.w.r.f.client.ExchangeFunctions - [1860d06f] [7eb31752-1] Response 200 OK
2025-09-16 22:30:25 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [1860d06f] [7eb31752-1] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@47406de3]
2025-09-16 22:30:25 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: Hello 
2025-09-16 22:30:25 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: there! 
2025-09-16 22:30:25 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:30:25 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: How 
2025-09-16 22:30:25 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: can 
2025-09-16 22:30:25 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: I 
2025-09-16 22:30:25 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: help 
2025-09-16 22:30:25 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: you 
2025-09-16 22:30:25 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: today? 
2025-09-16 22:30:26 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: I'm 
2025-09-16 22:30:26 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ready 
2025-09-16 22:30:26 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: to 
2025-09-16 22:30:26 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: answer 
2025-09-16 22:30:26 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: questions, 
2025-09-16 22:30:26 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: generate 
2025-09-16 22:30:26 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: creative 
2025-09-16 22:30:26 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: content, 
2025-09-16 22:30:26 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: have 
2025-09-16 22:30:26 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: a 
2025-09-16 22:30:26 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: conversation, 
2025-09-16 22:30:26 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: or 
2025-09-16 22:30:26 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: whatever 
2025-09-16 22:30:26 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: you 
2025-09-16 22:30:26 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: might 
2025-09-16 22:30:26 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: need. 
2025-09-16 22:30:26 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: Just 
2025-09-16 22:30:26 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: let 
2025-09-16 22:30:27 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: me 
2025-09-16 22:30:27 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: know! 
2025-09-16 22:35:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=evaikfmp] closed with CloseStatus[code=1000, reason=null]
2025-09-16 22:35:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=wk0s1wt4] closed with CloseStatus[code=1000, reason=null]
2025-09-16 22:35:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session evaikfmp
2025-09-16 22:35:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session wk0s1wt4
2025-09-16 22:35:44 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=wk0s1wt4
2025-09-16 22:35:44 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=evaikfmp
2025-09-16 22:35:44 [clientOutboundChannel-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=evaikfmp}], simpSessionId=evaikfmp}]
2025-09-16 22:35:44 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=wk0s1wt4}], simpSessionId=wk0s1wt4}]
2025-09-16 22:35:45 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 22:35:45 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 22:35:45 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 22:35:45 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 22:35:45 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 22:35:45 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 22:35:45 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 22:35:45 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 22:35:45 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 22:35:45 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 22:35:45 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:35:45 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:35:45 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@60e022ee]
2025-09-16 22:35:45 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@2384b40]
2025-09-16 22:35:45 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:35:45 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:35:45 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:35:45 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:35:45 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 22:35:45 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 22:35:45 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 22:35:45 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 22:35:45 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 22:35:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 22:35:45 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 22:35:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 22:35:45 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 22:35:45 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 22:35:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:35:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:35:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@513149db, com.chatgemma.dto.response.ChatResponse@1346abb6]]
2025-09-16 22:35:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@38cd9b2e, com.chatgemma.dto.response.ChatResponse@652a334b]]
2025-09-16 22:35:45 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:35:45 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:35:45 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:35:45 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:35:45 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758029745130
2025-09-16 22:35:45 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758029745129
2025-09-16 22:35:45 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758029745130
2025-09-16 22:35:45 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758029745130", parameters={masked}
2025-09-16 22:35:45 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@2709715e
2025-09-16 22:35:45 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758029745129
2025-09-16 22:35:45 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758029745129", parameters={masked}
2025-09-16 22:35:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@2709715e
2025-09-16 22:35:45 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758029745130
2025-09-16 22:35:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758029745129
2025-09-16 22:35:45 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:35:45 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:35:45 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:35:45 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:35:45 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/143/mumdc5gh/websocket
2025-09-16 22:35:45 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/143/mumdc5gh/websocket
2025-09-16 22:35:45 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/143/mumdc5gh/websocket", parameters={}
2025-09-16 22:35:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@2709715e
2025-09-16 22:35:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/143/mumdc5gh/websocket
2025-09-16 22:35:45 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:35:45 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 22:35:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=mumdc5gh]
2025-09-16 22:35:45 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=mumdc5gh
2025-09-16 22:35:45 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/411/zxtlzfcf/websocket
2025-09-16 22:35:45 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/411/zxtlzfcf/websocket
2025-09-16 22:35:45 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/411/zxtlzfcf/websocket", parameters={}
2025-09-16 22:35:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@2709715e
2025-09-16 22:35:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/411/zxtlzfcf/websocket
2025-09-16 22:35:45 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:35:45 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 22:35:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=zxtlzfcf]
2025-09-16 22:35:45 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-usermumdc5gh subscriptionId=sub-0 session=mumdc5gh payload=byte[0]
2025-09-16 22:35:45 [clientInboundChannel-25] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=mumdc5gh, lookupDestination='/chat.join'
2025-09-16 22:35:45 [clientInboundChannel-25] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 22:35:45 [clientInboundChannel-25] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=mumdc5gh
2025-09-16 22:35:45 [clientInboundChannel-25] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 22:35:48 [clientInboundChannel-28] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=mumdc5gh, lookupDestination='/chat.sendMessage'
2025-09-16 22:35:48 [clientInboundChannel-28] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 22:35:48 [clientInboundChannel-28] INFO  c.c.c.WebSocketChatController - WebSocket message received: chatId=2, content=, principal=null, sessionId=mumdc5gh
2025-09-16 22:35:48 [clientInboundChannel-28] INFO  c.c.c.WebSocketChatController - Processing AI response for message: 
2025-09-16 22:35:48 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.w.r.f.client.ExchangeFunctions - [25c09a73] HTTP POST http://localhost:11434/api/generate
2025-09-16 22:35:48 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [25c09a73] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@4fcb512f]
2025-09-16 22:35:48 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=mumdc5gh, lookupDestination='/chat.sendMessage'
2025-09-16 22:35:48 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 22:35:48 [clientInboundChannel-31] INFO  c.c.c.WebSocketChatController - WebSocket message received: chatId=2, content=, principal=null, sessionId=mumdc5gh
2025-09-16 22:35:48 [clientInboundChannel-31] INFO  c.c.c.WebSocketChatController - Processing AI response for message: 
2025-09-16 22:35:48 [ForkJoinPool.commonPool-worker-3] DEBUG o.s.w.r.f.client.ExchangeFunctions - [19bdcc01] HTTP POST http://localhost:11434/api/generate
2025-09-16 22:35:48 [reactor-http-nio-3] DEBUG org.springframework.web.HttpLogging - [19bdcc01] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@586c8c14]
2025-09-16 22:35:50 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [evaikfmp, wk0s1wt4]
2025-09-16 22:36:09 [reactor-http-nio-3] DEBUG o.s.w.r.f.client.ExchangeFunctions - [19bdcc01] [8cf285fe-1] Response 200 OK
2025-09-16 22:36:09 [reactor-http-nio-3] DEBUG org.springframework.web.HttpLogging - [19bdcc01] [8cf285fe-1] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@7c8bc6a6]
2025-09-16 22:36:09 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: , 
2025-09-16 22:36:09 [reactor-http-nio-2] DEBUG o.s.w.r.f.client.ExchangeFunctions - [25c09a73] [7eb31752-2] Response 200 OK
2025-09-16 22:36:09 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [25c09a73] [7eb31752-2] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@22e28ee6]
2025-09-16 22:36:09 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ! 
2025-09-16 22:36:09 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ! 
2025-09-16 22:36:09 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: : 
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: : 
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:10 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: , 
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: , 
2025-09-16 22:36:11 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ! 
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:36:12 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ! 
2025-09-16 22:36:45 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Starting ChatGemmaApplication using Java 17.0.15 with PID 68376 (/Users/picpal/Desktop/workspace/chatGemma/backend/build/classes/java/main started by picpal in /Users/picpal/Desktop/workspace/chatGemma/backend)
2025-09-16 22:36:45 [restartedMain] DEBUG com.chatgemma.ChatGemmaApplication - Running with Spring Boot v3.4.0, Spring v6.2.0
2025-09-16 22:36:45 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - The following 1 profile is active: "dev"
2025-09-16 22:36:45 [restartedMain] INFO  o.s.b.d.restart.ChangeableUrls - The Class-Path manifest attribute in /Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/ojdbc8-23.5.0.24.07.jar referenced one or more files that do not exist: file:/Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/oraclepki.jar
2025-09-16 22:36:45 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-09-16 22:36:45 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-09-16 22:36:45 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-16 22:36:45 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 49 ms. Found 4 JPA repository interfaces.
2025-09-16 22:36:46 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-16 22:36:46 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-16 22:36:46 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.33]
2025-09-16 22:36:46 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-16 22:36:46 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 519 ms
2025-09-16 22:36:46 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-09-16 22:36:47 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-16 22:36:47 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.2.Final
2025-09-16 22:36:47 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-09-16 22:36:47 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-16 22:36:47 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-09-16 22:36:48 [restartedMain] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 90020, SQLState: 90020
2025-09-16 22:36:48 [restartedMain] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]
2025-09-16 22:36:48 [restartedMain] WARN  o.h.e.j.e.i.JdbcEnvironmentInitiator - HHH000342: Could not obtain connection to query metadata
org.hibernate.exception.GenericJDBCException: unable to obtain isolated JDBC connection [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:63)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:116)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.getJdbcEnvironmentUsingJdbcMetadata(JdbcEnvironmentInitiator.java:320)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:129)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:81)
	at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:130)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:238)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:215)
	at org.hibernate.boot.model.relational.Database.<init>(Database.java:45)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:226)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.<init>(InFlightMetadataCollectorImpl.java:194)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:171)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1431)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1502)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1849)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1798)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:288)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.chatgemma.ChatGemmaApplication.main(ChatGemmaApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.mvstore.db.Store.convertMVStoreException(Store.java:165)
	at org.h2.mvstore.db.Store.<init>(Store.java:142)
	at org.h2.engine.Database.<init>(Database.java:326)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:344)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:124)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:550)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:98)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:126)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:467)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:61)
	... 40 common frames omitted
Caused by: org.h2.mvstore.MVStoreException: The file is locked: /Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db [2.3.232/7]
	at org.h2.mvstore.DataUtils.newMVStoreException(DataUtils.java:996)
	at org.h2.mvstore.SingleFileStore.lockFileChannel(SingleFileStore.java:143)
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:117)
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:81)
	at org.h2.mvstore.MVStore.<init>(MVStore.java:286)
	at org.h2.mvstore.MVStore$Builder.open(MVStore.java:2035)
	at org.h2.mvstore.db.Store.<init>(Store.java:133)
	... 57 common frames omitted
2025-09-16 22:36:48 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-16 22:36:48 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (null)']
	Database driver: undefined/unknown
	Database version: 2.1.214
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-09-16 22:36:48 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-09-16 22:36:48 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-09-16 22:36:49 [restartedMain] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 90020, SQLState: 90020
2025-09-16 22:36:49 [restartedMain] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]
2025-09-16 22:36:49 [restartedMain] ERROR o.s.o.j.LocalContainerEntityManagerFactoryBean - Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
2025-09-16 22:36:49 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
2025-09-16 22:36:49 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-09-16 22:36:49 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-09-16 22:36:49 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1802)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:288)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.chatgemma.ChatGemmaApplication.main(ChatGemmaApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:431)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1849)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1798)
	... 20 common frames omitted
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:74)
	at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:39)
	at org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcConnection(ImprovedExtractionContextImpl.java:63)
	at org.hibernate.tool.schema.extract.spi.ExtractionContext.getQueryResults(ExtractionContext.java:43)
	at org.hibernate.tool.schema.extract.internal.SequenceInformationExtractorLegacyImpl.extractMetadata(SequenceInformationExtractorLegacyImpl.java:39)
	at org.hibernate.tool.schema.extract.internal.DatabaseInformationImpl.initializeSequences(DatabaseInformationImpl.java:66)
	at org.hibernate.tool.schema.extract.internal.DatabaseInformationImpl.<init>(DatabaseInformationImpl.java:60)
	at org.hibernate.tool.schema.internal.Helper.buildDatabaseInformation(Helper.java:185)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:93)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:280)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	... 24 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.mvstore.db.Store.convertMVStoreException(Store.java:165)
	at org.h2.mvstore.db.Store.<init>(Store.java:142)
	at org.h2.engine.Database.<init>(Database.java:326)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:344)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:124)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:550)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:98)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:126)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:467)
	at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:46)
	... 44 common frames omitted
Caused by: org.h2.mvstore.MVStoreException: The file is locked: /Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db [2.3.232/7]
	at org.h2.mvstore.DataUtils.newMVStoreException(DataUtils.java:996)
	at org.h2.mvstore.SingleFileStore.lockFileChannel(SingleFileStore.java:143)
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:117)
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:81)
	at org.h2.mvstore.MVStore.<init>(MVStore.java:286)
	at org.h2.mvstore.MVStore$Builder.open(MVStore.java:2035)
	at org.h2.mvstore.db.Store.<init>(Store.java:133)
	... 61 common frames omitted
2025-09-16 22:38:56 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-16 22:38:56 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-16 22:38:56 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-09-16 22:38:56 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session mumdc5gh with CloseStatus[code=1001, reason=null]
2025-09-16 22:38:56 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=mumdc5gh]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:792)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 22:38:56 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 22:38:56 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=mumdc5gh] closed with CloseStatus[code=1001, reason=null]
2025-09-16 22:38:56 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session mumdc5gh
2025-09-16 22:38:56 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=mumdc5gh
2025-09-16 22:38:56 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session zxtlzfcf with CloseStatus[code=1001, reason=null]
2025-09-16 22:38:56 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=zxtlzfcf]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:792)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 22:38:56 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 22:38:56 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=zxtlzfcf] closed with CloseStatus[code=1001, reason=null]
2025-09-16 22:38:56 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session zxtlzfcf
2025-09-16 22:38:56 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=zxtlzfcf
2025-09-16 22:38:56 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-09-16 22:38:56 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-09-16 22:38:56 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6498c3cf]]
2025-09-16 22:38:56 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6498c3cf]
2025-09-16 22:38:56 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6498c3cf]
2025-09-16 22:38:56 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-09-16 22:38:56 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 22:38:56 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 22:38:56 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-09-16 22:38:56 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-09-16 22:38:56 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-09-16 22:39:02 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Starting ChatGemmaApplication using Java 17.0.15 with PID 71235 (/Users/picpal/Desktop/workspace/chatGemma/backend/build/classes/java/main started by picpal in /Users/picpal/Desktop/workspace/chatGemma/backend)
2025-09-16 22:39:02 [restartedMain] DEBUG com.chatgemma.ChatGemmaApplication - Running with Spring Boot v3.4.0, Spring v6.2.0
2025-09-16 22:39:02 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - The following 1 profile is active: "dev"
2025-09-16 22:39:02 [restartedMain] INFO  o.s.b.d.restart.ChangeableUrls - The Class-Path manifest attribute in /Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/ojdbc8-23.5.0.24.07.jar referenced one or more files that do not exist: file:/Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/oraclepki.jar
2025-09-16 22:39:02 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-09-16 22:39:02 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-09-16 22:39:02 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-16 22:39:02 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 45 ms. Found 4 JPA repository interfaces.
2025-09-16 22:39:02 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-16 22:39:02 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-16 22:39:02 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.33]
2025-09-16 22:39:02 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-16 22:39:02 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 485 ms
2025-09-16 22:39:02 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-09-16 22:39:02 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:file:./data/chatgemma user=SA
2025-09-16 22:39:02 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-09-16 22:39:02 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./data/chatgemma'
2025-09-16 22:39:03 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-16 22:39:03 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.2.Final
2025-09-16 22:39:03 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-09-16 22:39:03 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-16 22:39:03 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-16 22:39:03 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-09-16 22:39:03 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-09-16 22:39:03 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists idx_user_username
2025-09-16 22:39:03 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       add constraint idx_user_username unique (username)
2025-09-16 22:39:03 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-09-16 22:39:03 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-09-16 22:39:03 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-16 22:39:03 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-09-16 22:39:03 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 19 mappings in 'requestMappingHandlerMapping'
2025-09-16 22:39:03 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-16 22:39:03 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-16 22:39:03 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.AdminController:
	
2025-09-16 22:39:03 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.AuthController:
	
2025-09-16 22:39:03 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.ChatController:
	
2025-09-16 22:39:03 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.WebSocketChatController:
	{[MESSAGE],[/chat.join]}: joinChat(String,SimpMessageHeaderAccessor,Principal)
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor,Principal)
2025-09-16 22:39:03 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-09-16 22:39:03 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-16 22:39:03 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-16 22:39:03 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-16 22:39:03 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-09-16 22:39:03 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-09-16 22:39:03 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-09-16 22:39:03 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@55631887]
2025-09-16 22:39:03 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@55631887]
2025-09-16 22:39:03 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@55631887]]
2025-09-16 22:39:03 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-09-16 22:39:03 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 22:39:03 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 22:39:03 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-16 22:39:03 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Started ChatGemmaApplication in 1.739 seconds (process running for 1.871)
2025-09-16 22:39:04 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-09-16 22:40:03 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-09-16 22:40:49 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-16 22:40:49 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-09-16 22:40:49 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-09-16 22:40:49 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-09-16 22:40:49 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-09-16 22:40:49 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@e69bc3e
2025-09-16 22:40:49 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@5e7bfaa8
2025-09-16 22:40:49 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-16 22:40:49 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-09-16 22:40:49 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 22:40:49 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 22:40:49 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 22:40:49 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 22:40:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 22:40:49 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 22:40:49 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 22:40:49 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 22:40:49 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 22:40:49 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 22:40:49 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:40:49 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:40:49 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@8599143]
2025-09-16 22:40:49 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@490726c0]
2025-09-16 22:40:49 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:40:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:40:49 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:40:49 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:40:49 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 22:40:49 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 22:40:49 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 22:40:49 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 22:40:49 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 22:40:49 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 22:40:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 22:40:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 22:40:49 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 22:40:49 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 22:40:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:40:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:40:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@22347fdc, com.chatgemma.dto.response.ChatResponse@db2664d]]
2025-09-16 22:40:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@377be011, com.chatgemma.dto.response.ChatResponse@4ea637d4]]
2025-09-16 22:40:49 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:40:49 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:40:49 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:40:49 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:40:49 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758030049371
2025-09-16 22:40:49 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758030049371
2025-09-16 22:40:49 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758030049371
2025-09-16 22:40:49 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758030049371
2025-09-16 22:40:49 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758030049371", parameters={masked}
2025-09-16 22:40:49 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758030049371", parameters={masked}
2025-09-16 22:40:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3f03bc3e
2025-09-16 22:40:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3f03bc3e
2025-09-16 22:40:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758030049371
2025-09-16 22:40:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758030049371
2025-09-16 22:40:49 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:40:49 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:40:49 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:40:49 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:40:49 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/290/m22rjsyo/websocket
2025-09-16 22:40:49 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/290/m22rjsyo/websocket
2025-09-16 22:40:49 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/290/m22rjsyo/websocket", parameters={}
2025-09-16 22:40:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3f03bc3e
2025-09-16 22:40:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/290/m22rjsyo/websocket
2025-09-16 22:40:49 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:40:49 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 22:40:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=m22rjsyo]
2025-09-16 22:40:49 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/794/rdhgixud/websocket
2025-09-16 22:40:49 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/794/rdhgixud/websocket
2025-09-16 22:40:49 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/794/rdhgixud/websocket", parameters={}
2025-09-16 22:40:49 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3f03bc3e
2025-09-16 22:40:49 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/794/rdhgixud/websocket
2025-09-16 22:40:49 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:40:49 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 22:40:49 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=rdhgixud]
2025-09-16 22:40:49 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=rdhgixud
2025-09-16 22:40:49 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=rdhgixud, lookupDestination='/chat.join'
2025-09-16 22:40:49 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-userrdhgixud subscriptionId=sub-0 session=rdhgixud payload=byte[0]
2025-09-16 22:40:49 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 22:40:49 [clientInboundChannel-7] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=rdhgixud
2025-09-16 22:40:49 [clientInboundChannel-7] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 22:40:54 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=rdhgixud, lookupDestination='/chat.sendMessage'
2025-09-16 22:40:54 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 22:40:54 [clientInboundChannel-10] INFO  c.c.c.WebSocketChatController - WebSocket message received: chatId=2, content=, principal=null, sessionId=rdhgixud
2025-09-16 22:40:54 [clientInboundChannel-10] INFO  c.c.c.WebSocketChatController - Processing AI response for message: 
2025-09-16 22:40:54 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=rdhgixud, lookupDestination='/chat.sendMessage'
2025-09-16 22:40:54 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 22:40:54 [clientInboundChannel-13] INFO  c.c.c.WebSocketChatController - WebSocket message received: chatId=2, content=, principal=null, sessionId=rdhgixud
2025-09-16 22:40:54 [clientInboundChannel-13] INFO  c.c.c.WebSocketChatController - Processing AI response for message: 
2025-09-16 22:40:54 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.w.r.f.client.ExchangeFunctions - [1e50a2d0] HTTP POST http://localhost:11434/api/generate
2025-09-16 22:40:54 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.w.r.f.client.ExchangeFunctions - [6aae79f] HTTP POST http://localhost:11434/api/generate
2025-09-16 22:40:54 [ForkJoinPool.commonPool-worker-1] ERROR i.n.r.d.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-09-16 22:40:54 [reactor-http-nio-8] DEBUG org.springframework.web.HttpLogging - [6aae79f] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@52f74d11]
2025-09-16 22:40:54 [reactor-http-nio-6] DEBUG org.springframework.web.HttpLogging - [1e50a2d0] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@1073b68c]
2025-09-16 22:40:59 [reactor-http-nio-6] DEBUG o.s.w.r.f.client.ExchangeFunctions - [1e50a2d0] [3c8b943d-1] Response 200 OK
2025-09-16 22:40:59 [reactor-http-nio-6] DEBUG org.springframework.web.HttpLogging - [1e50a2d0] [3c8b943d-1] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@161e2ea]
2025-09-16 22:40:59 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ! 
2025-09-16 22:40:59 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:40:59 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:40:59 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 22:40:59 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:40:59 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:40:59 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:00 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:00 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:00 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:00 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 22:41:00 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:00 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:00 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:00 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 22:41:00 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:00 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:00 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ! 
2025-09-16 22:41:00 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: 
2025-09-16 22:41:00 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending streaming completion signal
2025-09-16 22:41:05 [reactor-http-nio-8] DEBUG o.s.w.r.f.client.ExchangeFunctions - [6aae79f] [2fa96442-1] Response 200 OK
2025-09-16 22:41:05 [reactor-http-nio-8] DEBUG org.springframework.web.HttpLogging - [6aae79f] [2fa96442-1] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@7793d272]
2025-09-16 22:41:05 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ! 
2025-09-16 22:41:05 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:05 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 22:41:05 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:05 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:05 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:05 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:05 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:05 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:06 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:06 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 22:41:06 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:41:06 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:41:06 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:06 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ?** 
2025-09-16 22:41:06 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: (: 
2025-09-16 22:41:06 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:06 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:06 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:06 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: , 
2025-09-16 22:41:06 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:06 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:06 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ) 
2025-09-16 22:41:06 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:41:06 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:41:06 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ?** 
2025-09-16 22:41:06 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: (: 
2025-09-16 22:41:06 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: , 
2025-09-16 22:41:07 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: , 
2025-09-16 22:41:07 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:07 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:07 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ) 
2025-09-16 22:41:07 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:41:07 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:41:07 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:07 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ?** 
2025-09-16 22:41:07 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: (: 
2025-09-16 22:41:07 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:07 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: , 
2025-09-16 22:41:07 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:07 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ) 
2025-09-16 22:41:07 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:41:07 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ! 
2025-09-16 22:41:07 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: 
2025-09-16 22:41:07 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending streaming completion signal
2025-09-16 22:43:41 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-1 session=rdhgixud
2025-09-16 22:43:41 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=rdhgixud
2025-09-16 22:43:41 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 22:43:41 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 22:43:41 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 22:43:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 22:43:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 22:43:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:43:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@df4863, com.chatgemma.dto.response.ChatResponse@4aceb45b]]
2025-09-16 22:43:41 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:43:41 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:43:41 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=rdhgixud] closed with CloseStatus[code=1000, reason=null]
2025-09-16 22:43:41 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session rdhgixud
2025-09-16 22:43:41 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=rdhgixud
2025-09-16 22:43:41 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=rdhgixud}], simpSessionId=rdhgixud}]
2025-09-16 22:43:41 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758030221993
2025-09-16 22:43:41 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758030221993
2025-09-16 22:43:41 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758030221993", parameters={masked}
2025-09-16 22:43:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3f03bc3e
2025-09-16 22:43:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758030221993
2025-09-16 22:43:41 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:43:41 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:43:42 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/753/5bjyrhho/websocket
2025-09-16 22:43:42 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/753/5bjyrhho/websocket
2025-09-16 22:43:42 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/753/5bjyrhho/websocket", parameters={}
2025-09-16 22:43:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3f03bc3e
2025-09-16 22:43:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/753/5bjyrhho/websocket
2025-09-16 22:43:42 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:43:42 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 22:43:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=5bjyrhho]
2025-09-16 22:43:42 [http-nio-8080-exec-9] INFO  o.s.w.s.m.SubProtocolWebSocketHandler - No messages received after 172610 ms. Closing WebSocketServerSockJsSession[id=m22rjsyo].
2025-09-16 22:43:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session m22rjsyo with CloseStatus[code=4500, reason=Failed to send message within the configured send limit]
2025-09-16 22:43:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=0c878439-8809-46cc-f075-81902c47b101, uri=ws://localhost:8080/ws/290/m22rjsyo/websocket]
2025-09-16 22:43:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=m22rjsyo] closed with CloseStatus[code=4500, reason=Failed to send message within the configured send limit]
2025-09-16 22:43:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session m22rjsyo
2025-09-16 22:43:42 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=m22rjsyo
2025-09-16 22:43:42 [clientOutboundChannel-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=m22rjsyo}], simpSessionId=m22rjsyo}]
2025-09-16 22:43:42 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=5bjyrhho
2025-09-16 22:43:42 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-user5bjyrhho subscriptionId=sub-0 session=5bjyrhho payload=byte[0]
2025-09-16 22:43:42 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=5bjyrhho, lookupDestination='/chat.join'
2025-09-16 22:43:42 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 22:43:42 [clientInboundChannel-34] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=5bjyrhho
2025-09-16 22:43:42 [clientInboundChannel-34] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 22:43:49 [MessageBroker-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [rdhgixud, m22rjsyo]
2025-09-16 22:45:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=5bjyrhho] closed with CloseStatus[code=1000, reason=null]
2025-09-16 22:45:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 5bjyrhho
2025-09-16 22:45:23 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=5bjyrhho
2025-09-16 22:45:23 [clientOutboundChannel-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={}, simpSessionId=5bjyrhho}], simpSessionId=5bjyrhho}]
2025-09-16 22:45:23 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 22:45:23 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 22:45:23 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 22:45:23 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 22:45:23 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 22:45:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 22:45:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 22:45:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 22:45:23 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 22:45:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 22:45:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:45:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:45:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@569abede]
2025-09-16 22:45:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@162bb887]
2025-09-16 22:45:23 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:45:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:45:23 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:45:23 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:45:24 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 22:45:24 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 22:45:24 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 22:45:24 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 22:45:24 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 22:45:24 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 22:45:24 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 22:45:24 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 22:45:24 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 22:45:24 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 22:45:24 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:45:24 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:45:24 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@76b0e217, com.chatgemma.dto.response.ChatResponse@67cb918]]
2025-09-16 22:45:24 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@2df2ec54, com.chatgemma.dto.response.ChatResponse@282a23d6]]
2025-09-16 22:45:24 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:45:24 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:45:24 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:45:24 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:45:24 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758030324051
2025-09-16 22:45:24 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758030324050
2025-09-16 22:45:24 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758030324050
2025-09-16 22:45:24 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758030324051
2025-09-16 22:45:24 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758030324051", parameters={masked}
2025-09-16 22:45:24 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758030324050", parameters={masked}
2025-09-16 22:45:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3f03bc3e
2025-09-16 22:45:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3f03bc3e
2025-09-16 22:45:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758030324051
2025-09-16 22:45:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758030324050
2025-09-16 22:45:24 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:45:24 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:45:24 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:45:24 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:45:24 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/075/pfho2deq/websocket
2025-09-16 22:45:24 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/075/pfho2deq/websocket
2025-09-16 22:45:24 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/075/pfho2deq/websocket", parameters={}
2025-09-16 22:45:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3f03bc3e
2025-09-16 22:45:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/075/pfho2deq/websocket
2025-09-16 22:45:24 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:45:24 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 22:45:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=pfho2deq]
2025-09-16 22:45:24 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=pfho2deq
2025-09-16 22:45:24 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/620/iygc4p4j/websocket
2025-09-16 22:45:24 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/620/iygc4p4j/websocket
2025-09-16 22:45:24 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/620/iygc4p4j/websocket", parameters={}
2025-09-16 22:45:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3f03bc3e
2025-09-16 22:45:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/620/iygc4p4j/websocket
2025-09-16 22:45:24 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:45:24 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 22:45:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=iygc4p4j]
2025-09-16 22:45:24 [clientInboundChannel-45] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-userpfho2deq subscriptionId=sub-0 session=pfho2deq payload=byte[0]
2025-09-16 22:45:24 [clientInboundChannel-46] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=pfho2deq, lookupDestination='/chat.join'
2025-09-16 22:45:24 [clientInboundChannel-46] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 22:45:24 [clientInboundChannel-46] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=pfho2deq
2025-09-16 22:45:24 [clientInboundChannel-46] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 22:45:26 [clientInboundChannel-49] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=pfho2deq, lookupDestination='/chat.sendMessage'
2025-09-16 22:45:26 [clientInboundChannel-49] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 22:45:26 [clientInboundChannel-49] INFO  c.c.c.WebSocketChatController - WebSocket message received: chatId=2, content=, principal=null, sessionId=pfho2deq
2025-09-16 22:45:26 [clientInboundChannel-49] INFO  c.c.c.WebSocketChatController - Processing AI response for message: 
2025-09-16 22:45:26 [ForkJoinPool.commonPool-worker-3] DEBUG o.s.w.r.f.client.ExchangeFunctions - [14371a3b] HTTP POST http://localhost:11434/api/generate
2025-09-16 22:45:26 [reactor-http-nio-6] DEBUG org.springframework.web.HttpLogging - [14371a3b] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@1cdb0f71]
2025-09-16 22:45:26 [clientInboundChannel-52] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=pfho2deq, lookupDestination='/chat.sendMessage'
2025-09-16 22:45:26 [clientInboundChannel-52] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 22:45:26 [clientInboundChannel-52] INFO  c.c.c.WebSocketChatController - WebSocket message received: chatId=2, content=, principal=null, sessionId=pfho2deq
2025-09-16 22:45:26 [clientInboundChannel-52] INFO  c.c.c.WebSocketChatController - Processing AI response for message: 
2025-09-16 22:45:26 [ForkJoinPool.commonPool-worker-4] DEBUG o.s.w.r.f.client.ExchangeFunctions - [65959f2d] HTTP POST http://localhost:11434/api/generate
2025-09-16 22:45:26 [reactor-http-nio-8] DEBUG org.springframework.web.HttpLogging - [65959f2d] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@7f9d621e]
2025-09-16 22:45:29 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [5bjyrhho]
2025-09-16 22:45:37 [reactor-http-nio-6] DEBUG o.s.w.r.f.client.ExchangeFunctions - [14371a3b] [3c8b943d-2] Response 200 OK
2025-09-16 22:45:37 [reactor-http-nio-6] DEBUG org.springframework.web.HttpLogging - [14371a3b] [3c8b943d-2] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@57be8ec8]
2025-09-16 22:45:37 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ! 
2025-09-16 22:45:37 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:37 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 22:45:37 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:37 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:37 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:37 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:37 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:38 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:38 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:38 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 22:45:38 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:38 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: : 
2025-09-16 22:45:38 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:45:38 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:45:38 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:45:38 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:38 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:38 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:38 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:38 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:38 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 22:45:38 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:45:38 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:45:38 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:45:38 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:38 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:45:39 [reactor-http-nio-8] DEBUG o.s.w.r.f.client.ExchangeFunctions - [65959f2d] [2fa96442-2] Response 200 OK
2025-09-16 22:45:39 [reactor-http-nio-8] DEBUG org.springframework.web.HttpLogging - [65959f2d] [2fa96442-2] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@8905198]
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ! 
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: : 
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:39 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: !
2025-09-16 22:45:40 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending streaming completion signal
2025-09-16 22:45:40 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:40 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:40 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:40 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:40 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:40 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 22:45:40 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:45:40 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:45:40 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:45:40 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:40 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:40 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:40 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:40 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:40 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:40 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:40 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 22:45:40 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:45:41 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:45:41 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:45:41 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:41 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:41 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:41 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:41 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:41 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:41 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:41 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:41 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 22:45:41 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:45:41 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:45:41 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:45:41 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:41 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:41 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:41 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:41 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:42 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:42 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 22:45:42 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:42 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:45:42 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: !
2025-09-16 22:45:42 [ForkJoinPool.commonPool-worker-4] DEBUG c.c.c.WebSocketChatController - Sending streaming completion signal
2025-09-16 22:56:02 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=iygc4p4j] closed with CloseStatus[code=1000, reason=null]
2025-09-16 22:56:02 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=pfho2deq] closed with CloseStatus[code=1000, reason=null]
2025-09-16 22:56:02 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session pfho2deq
2025-09-16 22:56:02 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session iygc4p4j
2025-09-16 22:56:02 [clientInboundChannel-58] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=pfho2deq
2025-09-16 22:56:02 [clientInboundChannel-57] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=iygc4p4j
2025-09-16 22:56:02 [clientOutboundChannel-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=iygc4p4j}], simpSessionId=iygc4p4j}]
2025-09-16 22:56:02 [clientOutboundChannel-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=pfho2deq}], simpSessionId=pfho2deq}]
2025-09-16 22:56:02 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 22:56:02 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 22:56:02 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 22:56:02 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 22:56:02 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 22:56:02 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 22:56:02 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 22:56:02 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 22:56:02 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 22:56:02 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 22:56:02 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:56:02 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:56:02 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@282e592d]
2025-09-16 22:56:02 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@50398bb6]
2025-09-16 22:56:02 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:56:02 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:56:02 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:56:02 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:56:02 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 22:56:02 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 22:56:02 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 22:56:02 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 22:56:02 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 22:56:02 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 22:56:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 22:56:02 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 22:56:02 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 22:56:02 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 22:56:02 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:56:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:56:02 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@37664272, com.chatgemma.dto.response.ChatResponse@3dae482f]]
2025-09-16 22:56:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@7a7108f9, com.chatgemma.dto.response.ChatResponse@3d51e7ba]]
2025-09-16 22:56:02 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:56:02 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:56:02 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:56:02 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:56:02 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758030962402
2025-09-16 22:56:02 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758030962402
2025-09-16 22:56:02 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758030962402
2025-09-16 22:56:02 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758030962402
2025-09-16 22:56:02 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758030962402", parameters={masked}
2025-09-16 22:56:02 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758030962402", parameters={masked}
2025-09-16 22:56:02 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3f03bc3e
2025-09-16 22:56:02 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3f03bc3e
2025-09-16 22:56:02 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758030962402
2025-09-16 22:56:02 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758030962402
2025-09-16 22:56:02 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:56:02 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:56:02 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:56:02 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:56:02 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/485/l4bmugfx/websocket
2025-09-16 22:56:02 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/485/l4bmugfx/websocket
2025-09-16 22:56:02 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/485/l4bmugfx/websocket", parameters={}
2025-09-16 22:56:02 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3f03bc3e
2025-09-16 22:56:02 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/485/l4bmugfx/websocket
2025-09-16 22:56:02 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:56:02 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 22:56:02 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=l4bmugfx]
2025-09-16 22:56:02 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/399/nraccal5/websocket
2025-09-16 22:56:02 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/399/nraccal5/websocket
2025-09-16 22:56:02 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/399/nraccal5/websocket", parameters={}
2025-09-16 22:56:02 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3f03bc3e
2025-09-16 22:56:02 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/399/nraccal5/websocket
2025-09-16 22:56:02 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:56:02 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 22:56:02 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=nraccal5]
2025-09-16 22:56:02 [clientInboundChannel-62] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=nraccal5
2025-09-16 22:56:02 [clientInboundChannel-66] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-usernraccal5 subscriptionId=sub-0 session=nraccal5 payload=byte[0]
2025-09-16 22:56:02 [clientInboundChannel-67] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=nraccal5, lookupDestination='/chat.join'
2025-09-16 22:56:02 [clientInboundChannel-67] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 22:56:02 [clientInboundChannel-67] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=nraccal5
2025-09-16 22:56:02 [clientInboundChannel-67] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 22:56:09 [MessageBroker-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [pfho2deq, iygc4p4j]
2025-09-16 22:56:32 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Starting ChatGemmaApplication using Java 17.0.15 with PID 73782 (/Users/picpal/Desktop/workspace/chatGemma/backend/build/classes/java/main started by picpal in /Users/picpal/Desktop/workspace/chatGemma/backend)
2025-09-16 22:56:32 [restartedMain] DEBUG com.chatgemma.ChatGemmaApplication - Running with Spring Boot v3.4.0, Spring v6.2.0
2025-09-16 22:56:32 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - The following 1 profile is active: "dev"
2025-09-16 22:56:32 [restartedMain] INFO  o.s.b.d.restart.ChangeableUrls - The Class-Path manifest attribute in /Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/ojdbc8-23.5.0.24.07.jar referenced one or more files that do not exist: file:/Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/oraclepki.jar
2025-09-16 22:56:32 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-09-16 22:56:32 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-09-16 22:56:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-16 22:56:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 47 ms. Found 4 JPA repository interfaces.
2025-09-16 22:56:32 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-16 22:56:32 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-16 22:56:32 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.33]
2025-09-16 22:56:32 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-16 22:56:32 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 479 ms
2025-09-16 22:56:32 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-09-16 22:56:33 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-16 22:56:33 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.2.Final
2025-09-16 22:56:33 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-09-16 22:56:33 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-16 22:56:33 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-09-16 22:56:34 [restartedMain] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 90020, SQLState: 90020
2025-09-16 22:56:34 [restartedMain] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]
2025-09-16 22:56:34 [restartedMain] WARN  o.h.e.j.e.i.JdbcEnvironmentInitiator - HHH000342: Could not obtain connection to query metadata
org.hibernate.exception.GenericJDBCException: unable to obtain isolated JDBC connection [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:63)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:116)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.getJdbcEnvironmentUsingJdbcMetadata(JdbcEnvironmentInitiator.java:320)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:129)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:81)
	at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:130)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:238)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:215)
	at org.hibernate.boot.model.relational.Database.<init>(Database.java:45)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:226)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.<init>(InFlightMetadataCollectorImpl.java:194)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:171)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1431)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1502)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1849)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1798)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:288)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.chatgemma.ChatGemmaApplication.main(ChatGemmaApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.mvstore.db.Store.convertMVStoreException(Store.java:165)
	at org.h2.mvstore.db.Store.<init>(Store.java:142)
	at org.h2.engine.Database.<init>(Database.java:326)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:344)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:124)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:550)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:98)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:126)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:467)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:61)
	... 40 common frames omitted
Caused by: org.h2.mvstore.MVStoreException: The file is locked: /Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db [2.3.232/7]
	at org.h2.mvstore.DataUtils.newMVStoreException(DataUtils.java:996)
	at org.h2.mvstore.SingleFileStore.lockFileChannel(SingleFileStore.java:143)
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:117)
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:81)
	at org.h2.mvstore.MVStore.<init>(MVStore.java:286)
	at org.h2.mvstore.MVStore$Builder.open(MVStore.java:2035)
	at org.h2.mvstore.db.Store.<init>(Store.java:133)
	... 57 common frames omitted
2025-09-16 22:56:34 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-16 22:56:34 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (null)']
	Database driver: undefined/unknown
	Database version: 2.1.214
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-09-16 22:56:35 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-09-16 22:56:35 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-09-16 22:56:36 [restartedMain] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 90020, SQLState: 90020
2025-09-16 22:56:36 [restartedMain] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]
2025-09-16 22:56:36 [restartedMain] ERROR o.s.o.j.LocalContainerEntityManagerFactoryBean - Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
2025-09-16 22:56:36 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
2025-09-16 22:56:36 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-09-16 22:56:36 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-09-16 22:56:36 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1802)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:288)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.chatgemma.ChatGemmaApplication.main(ChatGemmaApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:431)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1849)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1798)
	... 20 common frames omitted
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:74)
	at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:39)
	at org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcConnection(ImprovedExtractionContextImpl.java:63)
	at org.hibernate.tool.schema.extract.spi.ExtractionContext.getQueryResults(ExtractionContext.java:43)
	at org.hibernate.tool.schema.extract.internal.SequenceInformationExtractorLegacyImpl.extractMetadata(SequenceInformationExtractorLegacyImpl.java:39)
	at org.hibernate.tool.schema.extract.internal.DatabaseInformationImpl.initializeSequences(DatabaseInformationImpl.java:66)
	at org.hibernate.tool.schema.extract.internal.DatabaseInformationImpl.<init>(DatabaseInformationImpl.java:60)
	at org.hibernate.tool.schema.internal.Helper.buildDatabaseInformation(Helper.java:185)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:93)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:280)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	... 24 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.mvstore.db.Store.convertMVStoreException(Store.java:165)
	at org.h2.mvstore.db.Store.<init>(Store.java:142)
	at org.h2.engine.Database.<init>(Database.java:326)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:344)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:124)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:550)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:98)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:126)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:467)
	at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:46)
	... 44 common frames omitted
Caused by: org.h2.mvstore.MVStoreException: The file is locked: /Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db [2.3.232/7]
	at org.h2.mvstore.DataUtils.newMVStoreException(DataUtils.java:996)
	at org.h2.mvstore.SingleFileStore.lockFileChannel(SingleFileStore.java:143)
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:117)
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:81)
	at org.h2.mvstore.MVStore.<init>(MVStore.java:286)
	at org.h2.mvstore.MVStore$Builder.open(MVStore.java:2035)
	at org.h2.mvstore.db.Store.<init>(Store.java:133)
	... 61 common frames omitted
2025-09-16 22:56:56 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Starting ChatGemmaApplication using Java 17.0.15 with PID 74464 (/Users/picpal/Desktop/workspace/chatGemma/backend/build/classes/java/main started by picpal in /Users/picpal/Desktop/workspace/chatGemma/backend)
2025-09-16 22:56:56 [restartedMain] DEBUG com.chatgemma.ChatGemmaApplication - Running with Spring Boot v3.4.0, Spring v6.2.0
2025-09-16 22:56:56 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - The following 1 profile is active: "dev"
2025-09-16 22:56:56 [restartedMain] INFO  o.s.b.d.restart.ChangeableUrls - The Class-Path manifest attribute in /Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/ojdbc8-23.5.0.24.07.jar referenced one or more files that do not exist: file:/Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/oraclepki.jar
2025-09-16 22:56:56 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-09-16 22:56:56 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-09-16 22:56:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-16 22:56:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 41 ms. Found 4 JPA repository interfaces.
2025-09-16 22:56:56 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-16 22:56:56 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-16 22:56:56 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.33]
2025-09-16 22:56:56 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-16 22:56:56 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 424 ms
2025-09-16 22:56:56 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-09-16 22:56:56 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:file:./data/chatgemma user=SA
2025-09-16 22:56:56 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-09-16 22:56:56 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./data/chatgemma'
2025-09-16 22:56:56 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-16 22:56:56 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.2.Final
2025-09-16 22:56:56 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-09-16 22:56:56 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-16 22:56:56 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-16 22:56:56 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-09-16 22:56:57 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-09-16 22:56:57 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists idx_user_username
2025-09-16 22:56:57 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       add constraint idx_user_username unique (username)
2025-09-16 22:56:57 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-09-16 22:56:57 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-09-16 22:56:57 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-16 22:56:57 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-09-16 22:56:57 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 19 mappings in 'requestMappingHandlerMapping'
2025-09-16 22:56:57 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-16 22:56:57 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-16 22:56:57 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.AdminController:
	
2025-09-16 22:56:57 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.AuthController:
	
2025-09-16 22:56:57 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.ChatController:
	
2025-09-16 22:56:57 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.WebSocketChatController:
	{[MESSAGE],[/chat.join]}: joinChat(String,SimpMessageHeaderAccessor,Principal)
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor,Principal)
2025-09-16 22:56:57 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-09-16 22:56:57 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-16 22:56:57 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-16 22:56:57 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-16 22:56:57 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-09-16 22:56:57 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-09-16 22:56:57 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-09-16 22:56:57 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@f725750]
2025-09-16 22:56:57 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@f725750]
2025-09-16 22:56:57 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@f725750]]
2025-09-16 22:56:57 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-09-16 22:56:57 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 22:56:57 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 22:56:57 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-16 22:56:57 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Started ChatGemmaApplication in 1.597 seconds (process running for 1.712)
2025-09-16 22:56:57 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-09-16 22:57:13 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-16 22:57:13 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-09-16 22:57:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-09-16 22:57:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-09-16 22:57:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-09-16 22:57:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3f716366
2025-09-16 22:57:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@5b497be8
2025-09-16 22:57:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-16 22:57:13 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-09-16 22:57:13 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 22:57:13 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 22:57:13 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 22:57:13 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 22:57:13 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 22:57:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 22:57:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 22:57:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 22:57:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:57:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:57:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 22:57:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 22:57:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 22:57:13 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 22:57:13 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:57:13 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:57:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-09-16 22:57:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-09-16 22:57:21 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-09-16 22:57:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpSession)
2025-09-16 22:57:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.chatgemma.dto.request.LoginRequest@14bbd520]
2025-09-16 22:57:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.email=?
2025-09-16 22:57:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* insert for
        com.chatgemma.entity.AuditLog */insert 
    into
        audit_logs (action, details, ip_address, resource_id, resource_type, timestamp, user_agent, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-09-16 22:57:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:57:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@436a9859]
2025-09-16 22:57:21 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:57:21 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:57:21 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 22:57:21 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 22:57:21 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 22:57:21 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 22:57:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 22:57:21 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 22:57:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 22:57:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 22:57:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 22:57:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 22:57:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:57:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 22:57:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@4fc9e20f, com.chatgemma.dto.response.ChatResponse@3a37735b]]
2025-09-16 22:57:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@a689b8b, com.chatgemma.dto.response.ChatResponse@4098b974]]
2025-09-16 22:57:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:57:21 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:57:21 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:57:21 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:57:21 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758031041358
2025-09-16 22:57:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758031041357
2025-09-16 22:57:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758031041357
2025-09-16 22:57:21 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758031041358
2025-09-16 22:57:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758031041357", parameters={masked}
2025-09-16 22:57:21 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758031041358", parameters={masked}
2025-09-16 22:57:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@69265b8a
2025-09-16 22:57:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@69265b8a
2025-09-16 22:57:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758031041358
2025-09-16 22:57:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758031041357
2025-09-16 22:57:21 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:57:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 22:57:21 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:57:21 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:57:21 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/093/abemwgxx/websocket
2025-09-16 22:57:21 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/093/abemwgxx/websocket
2025-09-16 22:57:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/093/abemwgxx/websocket", parameters={}
2025-09-16 22:57:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@69265b8a
2025-09-16 22:57:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/093/abemwgxx/websocket
2025-09-16 22:57:21 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:57:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 22:57:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=abemwgxx]
2025-09-16 22:57:21 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=abemwgxx
2025-09-16 22:57:21 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/451/3xqqgrpb/websocket
2025-09-16 22:57:21 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/451/3xqqgrpb/websocket
2025-09-16 22:57:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/451/3xqqgrpb/websocket", parameters={}
2025-09-16 22:57:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@69265b8a
2025-09-16 22:57:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/451/3xqqgrpb/websocket
2025-09-16 22:57:21 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 22:57:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 22:57:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3xqqgrpb]
2025-09-16 22:57:21 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=abemwgxx, lookupDestination='/chat.join'
2025-09-16 22:57:21 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-userabemwgxx subscriptionId=sub-0 session=abemwgxx payload=byte[0]
2025-09-16 22:57:21 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 22:57:21 [clientInboundChannel-7] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=abemwgxx
2025-09-16 22:57:21 [clientInboundChannel-7] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 22:57:26 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=abemwgxx, lookupDestination='/chat.sendMessage'
2025-09-16 22:57:26 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 22:57:26 [clientInboundChannel-10] INFO  c.c.c.WebSocketChatController - WebSocket message received: chatId=2, content=, principal=null, sessionId=abemwgxx
2025-09-16 22:57:26 [clientInboundChannel-10] INFO  c.c.c.WebSocketChatController - Processing AI response for message: 
2025-09-16 22:57:26 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=abemwgxx, lookupDestination='/chat.sendMessage'
2025-09-16 22:57:26 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 22:57:26 [clientInboundChannel-13] INFO  c.c.c.WebSocketChatController - WebSocket message received: chatId=2, content=, principal=null, sessionId=abemwgxx
2025-09-16 22:57:26 [clientInboundChannel-13] INFO  c.c.c.WebSocketChatController - Processing AI response for message: 
2025-09-16 22:57:26 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.w.r.f.client.ExchangeFunctions - [3bf484b4] HTTP POST http://localhost:11434/api/generate
2025-09-16 22:57:26 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.w.r.f.client.ExchangeFunctions - [3ddf835c] HTTP POST http://localhost:11434/api/generate
2025-09-16 22:57:26 [ForkJoinPool.commonPool-worker-2] ERROR i.n.r.d.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-09-16 22:57:26 [reactor-http-nio-6] DEBUG org.springframework.web.HttpLogging - [3bf484b4] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@382f5cf2]
2025-09-16 22:57:26 [reactor-http-nio-8] DEBUG org.springframework.web.HttpLogging - [3ddf835c] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@4f776fec]
2025-09-16 22:57:48 [reactor-http-nio-6] DEBUG o.s.w.r.f.client.ExchangeFunctions - [3bf484b4] [c810094c-1] Response 200 OK
2025-09-16 22:57:48 [reactor-http-nio-6] DEBUG org.springframework.web.HttpLogging - [3bf484b4] [c810094c-1] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@14d5ed4]
2025-09-16 22:57:48 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ! 
2025-09-16 22:57:48 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:48 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 22:57:48 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:48 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:48 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:48 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:48 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:48 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:48 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:48 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 22:57:48 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:48 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: : 
2025-09-16 22:57:48 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 22:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 22:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 22:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 22:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: !
2025-09-16 22:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending streaming completion signal
2025-09-16 22:57:52 [reactor-http-nio-8] DEBUG o.s.w.r.f.client.ExchangeFunctions - [3ddf835c] [a5792f46-1] Response 200 OK
2025-09-16 22:57:52 [reactor-http-nio-8] DEBUG org.springframework.web.HttpLogging - [3ddf835c] [a5792f46-1] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@3477cd3]
2025-09-16 22:57:52 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ! 
2025-09-16 22:57:52 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:52 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 22:57:52 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:52 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:52 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:52 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:52 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:52 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:52 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 22:57:52 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:52 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:52 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: : 
2025-09-16 22:57:52 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:57:52 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:57:53 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:57:53 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:53 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:53 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:53 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:53 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:53 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:53 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 22:57:53 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:57:53 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:57:53 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:57:53 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:53 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:53 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:53 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:53 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:53 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:53 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 22:57:54 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:57:54 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: **:** 
2025-09-16 22:57:54 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: , 
2025-09-16 22:57:54 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: , 
2025-09-16 22:57:54 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:54 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:54 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:54 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:54 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:54 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:54 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:54 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:54 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:54 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 22:57:54 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:57:54 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: **:** 
2025-09-16 22:57:54 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:54 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:54 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:55 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:55 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:55 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:55 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:55 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 22:57:55 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 22:57:55 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 22:57:55 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 22:57:55 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:55 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:55 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:55 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:55 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:55 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:55 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ! 
2025-09-16 22:57:55 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 22:57:55 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 22:57:55 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: 
2025-09-16 22:57:56 [ForkJoinPool.commonPool-worker-2] DEBUG c.c.c.WebSocketChatController - Sending streaming completion signal
2025-09-16 22:57:57 [MessageBroker-9] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 2 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 15, active threads = 0, queued tasks = 0, completed tasks = 15], outboundChannel[pool size = 1, active threads = 0, queued tasks = 0, completed tasks = 1], sockJsScheduler[pool size = 12, active threads = 1, queued tasks = 3, completed tasks = 10]
2025-09-16 23:03:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=abemwgxx] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:03:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3xqqgrpb] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:03:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session abemwgxx
2025-09-16 23:03:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3xqqgrpb
2025-09-16 23:03:08 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=abemwgxx
2025-09-16 23:03:08 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=3xqqgrpb
2025-09-16 23:03:08 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=abemwgxx}], simpSessionId=abemwgxx}]
2025-09-16 23:03:08 [clientOutboundChannel-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=3xqqgrpb}], simpSessionId=3xqqgrpb}]
2025-09-16 23:03:08 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:03:08 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:03:08 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:03:08 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:03:08 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:03:08 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:03:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:03:08 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:03:08 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:03:08 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:03:08 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:03:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:03:08 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@461e8cd6]
2025-09-16 23:03:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@50828180]
2025-09-16 23:03:08 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:03:08 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:03:08 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:03:08 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:03:08 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:03:08 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:03:08 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:03:08 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:03:08 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:03:08 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:03:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:03:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:03:08 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:03:08 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:03:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:03:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:03:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@16ed482b, com.chatgemma.dto.response.ChatResponse@3a524546]]
2025-09-16 23:03:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@655de396, com.chatgemma.dto.response.ChatResponse@1c89612c]]
2025-09-16 23:03:08 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:03:08 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:03:08 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:03:08 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:03:08 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758031388481
2025-09-16 23:03:08 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758031388480
2025-09-16 23:03:08 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758031388480
2025-09-16 23:03:08 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758031388481
2025-09-16 23:03:08 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758031388480", parameters={masked}
2025-09-16 23:03:08 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758031388481", parameters={masked}
2025-09-16 23:03:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@69265b8a
2025-09-16 23:03:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@69265b8a
2025-09-16 23:03:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758031388481
2025-09-16 23:03:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758031388480
2025-09-16 23:03:08 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:03:08 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:03:08 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:03:08 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:03:08 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/710/pfoyt4wv/websocket
2025-09-16 23:03:08 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/710/pfoyt4wv/websocket
2025-09-16 23:03:08 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/710/pfoyt4wv/websocket", parameters={}
2025-09-16 23:03:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@69265b8a
2025-09-16 23:03:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/710/pfoyt4wv/websocket
2025-09-16 23:03:08 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:03:08 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:03:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=pfoyt4wv]
2025-09-16 23:03:08 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/885/sizwkyal/websocket
2025-09-16 23:03:08 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/885/sizwkyal/websocket
2025-09-16 23:03:08 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/885/sizwkyal/websocket", parameters={}
2025-09-16 23:03:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@69265b8a
2025-09-16 23:03:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/885/sizwkyal/websocket
2025-09-16 23:03:08 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:03:08 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:03:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=sizwkyal]
2025-09-16 23:03:08 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=sizwkyal
2025-09-16 23:03:08 [clientInboundChannel-27] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-usersizwkyal subscriptionId=sub-0 session=sizwkyal payload=byte[0]
2025-09-16 23:03:08 [clientInboundChannel-28] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=sizwkyal, lookupDestination='/chat.join'
2025-09-16 23:03:08 [clientInboundChannel-28] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:03:08 [clientInboundChannel-28] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=sizwkyal
2025-09-16 23:03:08 [clientInboundChannel-28] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:03:11 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=sizwkyal, lookupDestination='/chat.sendMessage'
2025-09-16 23:03:11 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 23:03:11 [clientInboundChannel-31] INFO  c.c.c.WebSocketChatController - WebSocket message received: chatId=2, content=, principal=null, sessionId=sizwkyal
2025-09-16 23:03:11 [clientInboundChannel-31] INFO  c.c.c.WebSocketChatController - Processing AI response for message: 
2025-09-16 23:03:11 [ForkJoinPool.commonPool-worker-3] DEBUG o.s.w.r.f.client.ExchangeFunctions - [6fc4a2bc] HTTP POST http://localhost:11434/api/generate
2025-09-16 23:03:11 [reactor-http-nio-6] DEBUG org.springframework.web.HttpLogging - [6fc4a2bc] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@7acc70b4]
2025-09-16 23:03:16 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [3xqqgrpb, abemwgxx]
2025-09-16 23:03:29 [reactor-http-nio-6] DEBUG o.s.w.r.f.client.ExchangeFunctions - [6fc4a2bc] [c810094c-2] Response 200 OK
2025-09-16 23:03:29 [reactor-http-nio-6] DEBUG org.springframework.web.HttpLogging - [6fc4a2bc] [c810094c-2] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@e734dfe]
2025-09-16 23:03:29 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ! 
2025-09-16 23:03:29 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:03:29 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 23:03:29 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:03:29 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:03:29 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:03:29 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:03:29 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:03:29 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:03:29 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:03:30 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 23:03:30 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 23:03:30 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: **:** 
2025-09-16 23:03:30 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:03:30 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:03:30 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:03:30 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:03:30 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 23:03:30 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 23:03:30 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: **:** 
2025-09-16 23:03:30 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:03:30 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:03:30 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:03:30 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:03:30 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 23:03:30 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 23:03:30 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: **:** 
2025-09-16 23:03:30 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:03:30 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:03:31 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 23:03:31 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 23:03:31 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: **:** 
2025-09-16 23:03:31 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:03:31 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:03:31 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 23:03:31 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:03:31 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ! 
2025-09-16 23:03:31 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: 
2025-09-16 23:03:31 [ForkJoinPool.commonPool-worker-3] DEBUG c.c.c.WebSocketChatController - Sending streaming completion signal
2025-09-16 23:06:21 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Starting ChatGemmaApplication using Java 17.0.15 with PID 77742 (/Users/picpal/Desktop/workspace/chatGemma/backend/build/classes/java/main started by picpal in /Users/picpal/Desktop/workspace/chatGemma/backend)
2025-09-16 23:06:21 [restartedMain] DEBUG com.chatgemma.ChatGemmaApplication - Running with Spring Boot v3.4.0, Spring v6.2.0
2025-09-16 23:06:21 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - The following 1 profile is active: "dev"
2025-09-16 23:06:21 [restartedMain] INFO  o.s.b.d.restart.ChangeableUrls - The Class-Path manifest attribute in /Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/ojdbc8-23.5.0.24.07.jar referenced one or more files that do not exist: file:/Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/oraclepki.jar
2025-09-16 23:06:21 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-09-16 23:06:21 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-09-16 23:06:21 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-16 23:06:21 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 49 ms. Found 4 JPA repository interfaces.
2025-09-16 23:06:21 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-16 23:06:21 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-16 23:06:21 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.33]
2025-09-16 23:06:21 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-16 23:06:21 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 508 ms
2025-09-16 23:06:21 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-09-16 23:06:22 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-16 23:06:22 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.2.Final
2025-09-16 23:06:22 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-09-16 23:06:22 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-16 23:06:22 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-09-16 23:06:24 [restartedMain] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 90020, SQLState: 90020
2025-09-16 23:06:24 [restartedMain] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]
2025-09-16 23:06:24 [restartedMain] WARN  o.h.e.j.e.i.JdbcEnvironmentInitiator - HHH000342: Could not obtain connection to query metadata
org.hibernate.exception.GenericJDBCException: unable to obtain isolated JDBC connection [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:63)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:116)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.getJdbcEnvironmentUsingJdbcMetadata(JdbcEnvironmentInitiator.java:320)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:129)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:81)
	at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:130)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:238)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:215)
	at org.hibernate.boot.model.relational.Database.<init>(Database.java:45)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:226)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.<init>(InFlightMetadataCollectorImpl.java:194)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:171)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1431)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1502)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1849)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1798)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:288)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.chatgemma.ChatGemmaApplication.main(ChatGemmaApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.mvstore.db.Store.convertMVStoreException(Store.java:165)
	at org.h2.mvstore.db.Store.<init>(Store.java:142)
	at org.h2.engine.Database.<init>(Database.java:326)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:344)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:124)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:550)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:98)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:126)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:467)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:61)
	... 40 common frames omitted
Caused by: org.h2.mvstore.MVStoreException: The file is locked: /Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db [2.3.232/7]
	at org.h2.mvstore.DataUtils.newMVStoreException(DataUtils.java:996)
	at org.h2.mvstore.SingleFileStore.lockFileChannel(SingleFileStore.java:143)
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:117)
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:81)
	at org.h2.mvstore.MVStore.<init>(MVStore.java:286)
	at org.h2.mvstore.MVStore$Builder.open(MVStore.java:2035)
	at org.h2.mvstore.db.Store.<init>(Store.java:133)
	... 57 common frames omitted
2025-09-16 23:06:24 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-16 23:06:24 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (null)']
	Database driver: undefined/unknown
	Database version: 2.1.214
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-09-16 23:06:24 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-09-16 23:06:24 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-09-16 23:06:25 [restartedMain] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 90020, SQLState: 90020
2025-09-16 23:06:25 [restartedMain] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]
2025-09-16 23:06:25 [restartedMain] ERROR o.s.o.j.LocalContainerEntityManagerFactoryBean - Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
2025-09-16 23:06:25 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
2025-09-16 23:06:25 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-09-16 23:06:25 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-09-16 23:06:25 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1802)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:288)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.chatgemma.ChatGemmaApplication.main(ChatGemmaApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:431)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1849)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1798)
	... 20 common frames omitted
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:74)
	at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:39)
	at org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcConnection(ImprovedExtractionContextImpl.java:63)
	at org.hibernate.tool.schema.extract.spi.ExtractionContext.getQueryResults(ExtractionContext.java:43)
	at org.hibernate.tool.schema.extract.internal.SequenceInformationExtractorLegacyImpl.extractMetadata(SequenceInformationExtractorLegacyImpl.java:39)
	at org.hibernate.tool.schema.extract.internal.DatabaseInformationImpl.initializeSequences(DatabaseInformationImpl.java:66)
	at org.hibernate.tool.schema.extract.internal.DatabaseInformationImpl.<init>(DatabaseInformationImpl.java:60)
	at org.hibernate.tool.schema.internal.Helper.buildDatabaseInformation(Helper.java:185)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:93)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:280)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	... 24 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database may be already in use: "/Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db". Possible solutions: close all other connection(s); use the server mode [90020-232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.mvstore.db.Store.convertMVStoreException(Store.java:165)
	at org.h2.mvstore.db.Store.<init>(Store.java:142)
	at org.h2.engine.Database.<init>(Database.java:326)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:344)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:124)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:550)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:98)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:126)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:467)
	at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:46)
	... 44 common frames omitted
Caused by: org.h2.mvstore.MVStoreException: The file is locked: /Users/picpal/Desktop/workspace/chatGemma/backend/data/chatgemma.mv.db [2.3.232/7]
	at org.h2.mvstore.DataUtils.newMVStoreException(DataUtils.java:996)
	at org.h2.mvstore.SingleFileStore.lockFileChannel(SingleFileStore.java:143)
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:117)
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:81)
	at org.h2.mvstore.MVStore.<init>(MVStore.java:286)
	at org.h2.mvstore.MVStore$Builder.open(MVStore.java:2035)
	at org.h2.mvstore.db.Store.<init>(Store.java:133)
	... 61 common frames omitted
2025-09-16 23:07:11 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/websocket/test
2025-09-16 23:07:11 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/websocket/test
2025-09-16 23:07:11 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/websocket/test", parameters={}
2025-09-16 23:07:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-09-16 23:07:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-09-16 23:07:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.chatgemma.controller.GlobalExceptionHandler#handleGenericException(Exception)
2025-09-16 23:07:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:07:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{error=Internal Server Error, message=   ., timestamp=2025-09-16T23:07:11.839908, stat (truncated)...]
2025-09-16 23:07:11 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/websocket/test.]
2025-09-16 23:07:11 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-09-16 23:07:11 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:07:54 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-16 23:07:54 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-16 23:07:54 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-09-16 23:07:54 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session pfoyt4wv with CloseStatus[code=1001, reason=null]
2025-09-16 23:07:54 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=pfoyt4wv]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:792)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 23:07:54 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 23:07:54 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=pfoyt4wv] closed with CloseStatus[code=1001, reason=null]
2025-09-16 23:07:54 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session pfoyt4wv
2025-09-16 23:07:54 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=pfoyt4wv
2025-09-16 23:07:54 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session sizwkyal with CloseStatus[code=1001, reason=null]
2025-09-16 23:07:54 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=sizwkyal]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:792)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 23:07:54 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 23:07:54 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=sizwkyal] closed with CloseStatus[code=1001, reason=null]
2025-09-16 23:07:54 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session sizwkyal
2025-09-16 23:07:54 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-09-16 23:07:54 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-09-16 23:07:54 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@f725750]]
2025-09-16 23:07:54 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=sizwkyal
2025-09-16 23:07:54 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@f725750]
2025-09-16 23:07:54 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@f725750]
2025-09-16 23:07:54 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-09-16 23:07:54 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:07:54 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:07:54 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-09-16 23:07:54 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-09-16 23:07:54 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-09-16 23:08:02 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Starting ChatGemmaApplication using Java 17.0.15 with PID 79507 (/Users/picpal/Desktop/workspace/chatGemma/backend/build/classes/java/main started by picpal in /Users/picpal/Desktop/workspace/chatGemma/backend)
2025-09-16 23:08:02 [restartedMain] DEBUG com.chatgemma.ChatGemmaApplication - Running with Spring Boot v3.4.0, Spring v6.2.0
2025-09-16 23:08:02 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - The following 1 profile is active: "dev"
2025-09-16 23:08:02 [restartedMain] INFO  o.s.b.d.restart.ChangeableUrls - The Class-Path manifest attribute in /Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/ojdbc8-23.5.0.24.07.jar referenced one or more files that do not exist: file:/Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/oraclepki.jar
2025-09-16 23:08:02 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-09-16 23:08:02 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-09-16 23:08:03 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-16 23:08:03 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 49 ms. Found 4 JPA repository interfaces.
2025-09-16 23:08:03 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-16 23:08:03 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-16 23:08:03 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.33]
2025-09-16 23:08:03 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-16 23:08:03 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 584 ms
2025-09-16 23:08:03 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-09-16 23:08:03 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:file:./data/chatgemma user=SA
2025-09-16 23:08:03 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-09-16 23:08:03 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./data/chatgemma'
2025-09-16 23:08:03 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-16 23:08:03 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.2.Final
2025-09-16 23:08:03 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-09-16 23:08:03 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-16 23:08:03 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-16 23:08:03 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-09-16 23:08:03 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-09-16 23:08:03 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists idx_user_username
2025-09-16 23:08:03 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       add constraint idx_user_username unique (username)
2025-09-16 23:08:03 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-09-16 23:08:03 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-09-16 23:08:04 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-16 23:08:04 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-09-16 23:08:04 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 19 mappings in 'requestMappingHandlerMapping'
2025-09-16 23:08:04 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-16 23:08:04 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-16 23:08:04 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.AdminController:
	
2025-09-16 23:08:04 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.AuthController:
	
2025-09-16 23:08:04 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.ChatController:
	
2025-09-16 23:08:04 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.WebSocketChatController:
	{[MESSAGE],[/chat.join]}: joinChat(String,SimpMessageHeaderAccessor,Principal)
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor,Principal)
2025-09-16 23:08:04 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-09-16 23:08:04 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-16 23:08:04 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-16 23:08:04 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-16 23:08:04 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-09-16 23:08:04 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-09-16 23:08:04 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-09-16 23:08:04 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2e3e7fb8]
2025-09-16 23:08:04 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2e3e7fb8]
2025-09-16 23:08:04 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2e3e7fb8]]
2025-09-16 23:08:04 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-09-16 23:08:04 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:08:04 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:08:04 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-16 23:08:04 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Started ChatGemmaApplication in 1.872 seconds (process running for 2.012)
2025-09-16 23:08:04 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-09-16 23:08:26 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-16 23:08:26 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-09-16 23:08:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-09-16 23:08:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-09-16 23:08:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-09-16 23:08:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@672c6357
2025-09-16 23:08:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@482d1f82
2025-09-16 23:08:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-16 23:08:26 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-09-16 23:08:26 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/test
2025-09-16 23:08:26 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/test
2025-09-16 23:08:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/test", parameters={}
2025-09-16 23:08:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-09-16 23:08:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-09-16 23:08:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.chatgemma.controller.GlobalExceptionHandler#handleGenericException(Exception)
2025-09-16 23:08:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json] and supported [application/json, application/*+json]
2025-09-16 23:08:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{error=Internal Server Error, message=   ., timestamp=2025-09-16T23:08:26.558645, stat (truncated)...]
2025-09-16 23:08:26 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/test.]
2025-09-16 23:08:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-09-16 23:08:26 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:08:32 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /h2-console
2025-09-16 23:08:32 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /h2-console
2025-09-16 23:08:49 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:08:49 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:08:49 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:08:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:08:49 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:08:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:08:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@61f595dc]
2025-09-16 23:08:49 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:08:49 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:08:49 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:08:49 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:08:49 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:08:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:08:49 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:08:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:08:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@32ba20d7]
2025-09-16 23:08:49 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:08:49 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:08:49 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:08:49 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:08:49 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:08:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:08:49 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:08:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:08:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@3d156719, com.chatgemma.dto.response.ChatResponse@19f9c79f]]
2025-09-16 23:08:49 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758031729215
2025-09-16 23:08:49 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:08:49 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:08:49 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758031729215
2025-09-16 23:08:49 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758031729215", parameters={masked}
2025-09-16 23:08:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@64001f15
2025-09-16 23:08:49 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:08:49 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:08:49 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:08:49 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:08:49 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:08:49 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:08:49 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@3269102, com.chatgemma.dto.response.ChatResponse@60d0b32d]]
2025-09-16 23:08:49 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:08:49 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:08:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758031729215
2025-09-16 23:08:49 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:08:49 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:08:49 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758031729215
2025-09-16 23:08:49 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758031729215
2025-09-16 23:08:49 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758031729215", parameters={masked}
2025-09-16 23:08:49 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@64001f15
2025-09-16 23:08:49 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758031729215
2025-09-16 23:08:49 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:08:49 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:08:49 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/840/jhjocnit/websocket
2025-09-16 23:08:49 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/840/jhjocnit/websocket
2025-09-16 23:08:49 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/840/jhjocnit/websocket", parameters={}
2025-09-16 23:08:49 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@64001f15
2025-09-16 23:08:49 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/840/jhjocnit/websocket
2025-09-16 23:08:49 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:08:49 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:08:49 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=jhjocnit]
2025-09-16 23:08:49 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/179/oavm0itb/websocket
2025-09-16 23:08:49 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/179/oavm0itb/websocket
2025-09-16 23:08:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/179/oavm0itb/websocket", parameters={}
2025-09-16 23:08:49 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@64001f15
2025-09-16 23:08:49 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/179/oavm0itb/websocket
2025-09-16 23:08:49 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:08:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:08:49 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=oavm0itb]
2025-09-16 23:08:49 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=oavm0itb
2025-09-16 23:08:49 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=oavm0itb, lookupDestination='/chat.join'
2025-09-16 23:08:49 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-useroavm0itb subscriptionId=sub-0 session=oavm0itb payload=byte[0]
2025-09-16 23:08:49 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:08:49 [clientInboundChannel-7] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=oavm0itb
2025-09-16 23:08:49 [clientInboundChannel-7] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:08:51 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=oavm0itb] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:08:51 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=jhjocnit] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:08:51 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session jhjocnit
2025-09-16 23:08:51 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session oavm0itb
2025-09-16 23:08:51 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=jhjocnit
2025-09-16 23:08:51 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=oavm0itb
2025-09-16 23:08:51 [clientOutboundChannel-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=jhjocnit}], simpSessionId=jhjocnit}]
2025-09-16 23:08:51 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=oavm0itb}], simpSessionId=oavm0itb}]
2025-09-16 23:08:51 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:08:51 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:08:51 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:08:51 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:08:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:08:51 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:08:51 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@2c4273eb]
2025-09-16 23:08:51 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:08:51 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:08:51 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:08:51 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:08:51 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:08:51 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:08:51 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:08:51 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:08:51 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@36b408f2]
2025-09-16 23:08:51 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:08:51 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:08:51 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:08:51 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:08:51 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:08:51 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:08:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:08:51 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:08:51 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@58b803d9, com.chatgemma.dto.response.ChatResponse@5eee94db]]
2025-09-16 23:08:51 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:08:51 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:08:51 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:08:51 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:08:51 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758031731406
2025-09-16 23:08:51 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:08:51 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:08:51 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758031731406
2025-09-16 23:08:51 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758031731406", parameters={masked}
2025-09-16 23:08:51 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@64001f15
2025-09-16 23:08:51 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758031731406
2025-09-16 23:08:51 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:08:51 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:08:51 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:08:51 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:08:51 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758031731406
2025-09-16 23:08:51 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@8bc1c6d, com.chatgemma.dto.response.ChatResponse@29354f04]]
2025-09-16 23:08:51 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758031731406
2025-09-16 23:08:51 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758031731406", parameters={masked}
2025-09-16 23:08:51 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@64001f15
2025-09-16 23:08:51 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:08:51 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:08:51 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758031731406
2025-09-16 23:08:51 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:08:51 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:08:51 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/809/dtezy05c/websocket
2025-09-16 23:08:51 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/809/dtezy05c/websocket
2025-09-16 23:08:51 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/809/dtezy05c/websocket", parameters={}
2025-09-16 23:08:51 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@64001f15
2025-09-16 23:08:51 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/809/dtezy05c/websocket
2025-09-16 23:08:51 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:08:51 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:08:51 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=dtezy05c]
2025-09-16 23:08:51 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/500/y3cqacoj/websocket
2025-09-16 23:08:51 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/500/y3cqacoj/websocket
2025-09-16 23:08:51 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/500/y3cqacoj/websocket", parameters={}
2025-09-16 23:08:51 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@64001f15
2025-09-16 23:08:51 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/500/y3cqacoj/websocket
2025-09-16 23:08:51 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:08:51 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:08:51 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=y3cqacoj]
2025-09-16 23:08:51 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=y3cqacoj
2025-09-16 23:08:51 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-usery3cqacoj subscriptionId=sub-0 session=y3cqacoj payload=byte[0]
2025-09-16 23:08:51 [clientInboundChannel-22] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=y3cqacoj, lookupDestination='/chat.join'
2025-09-16 23:08:51 [clientInboundChannel-22] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:08:51 [clientInboundChannel-22] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=y3cqacoj
2025-09-16 23:08:51 [clientInboundChannel-22] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:08:58 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=y3cqacoj, lookupDestination='/chat.sendMessage'
2025-09-16 23:08:58 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 23:08:58 [clientInboundChannel-1] INFO  c.c.c.WebSocketChatController - WebSocket message received: chatId=2, content=, principal=null, sessionId=y3cqacoj
2025-09-16 23:08:58 [clientInboundChannel-1] INFO  c.c.c.WebSocketChatController - Processing AI response for message: 
2025-09-16 23:08:58 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.w.r.f.client.ExchangeFunctions - [d613b96] HTTP POST http://localhost:11434/api/generate
2025-09-16 23:08:58 [ForkJoinPool.commonPool-worker-1] ERROR i.n.r.d.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-09-16 23:08:58 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [d613b96] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@17d10ed2]
2025-09-16 23:08:59 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [oavm0itb, jhjocnit]
2025-09-16 23:09:04 [MessageBroker-6] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 4 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(2)-CONNECTED(2)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 24, active threads = 0, queued tasks = 0, completed tasks = 27], outboundChannel[pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 4], sockJsScheduler[pool size = 12, active threads = 1, queued tasks = 3, completed tasks = 4]
2025-09-16 23:09:18 [reactor-http-nio-2] DEBUG o.s.w.r.f.client.ExchangeFunctions - [d613b96] [28cc05f7-1] Response 200 OK
2025-09-16 23:09:18 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [d613b96] [28cc05f7-1] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@18e92885]
2025-09-16 23:09:18 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ! 
2025-09-16 23:09:18 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:18 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ? 
2025-09-16 23:09:18 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:18 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:18 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:18 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:18 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:18 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:18 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:18 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 23:09:18 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:18 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: : 
2025-09-16 23:09:18 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 23:09:19 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 23:09:19 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 23:09:19 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:19 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:19 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:19 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:19 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:19 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:19 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 23:09:19 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 23:09:19 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 23:09:19 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 23:09:19 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:19 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:19 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:19 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:19 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:19 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:20 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:20 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 23:09:20 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 23:09:20 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 23:09:20 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 23:09:20 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:20 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:20 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:20 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:20 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:20 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:20 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:20 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:20 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 23:09:20 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: * 
2025-09-16 23:09:20 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ** 
2025-09-16 23:09:20 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: :** 
2025-09-16 23:09:20 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:20 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:21 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:21 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:21 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:21 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:21 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: ! 
2025-09-16 23:09:21 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk:  
2025-09-16 23:09:21 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: . 
2025-09-16 23:09:21 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending AI chunk: 
2025-09-16 23:09:21 [ForkJoinPool.commonPool-worker-1] DEBUG c.c.c.WebSocketChatController - Sending streaming completion signal
2025-09-16 23:12:06 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-16 23:12:06 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-16 23:12:06 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-09-16 23:12:06 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session y3cqacoj with CloseStatus[code=1001, reason=null]
2025-09-16 23:12:06 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=y3cqacoj]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:792)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 23:12:06 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 23:12:06 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=y3cqacoj] closed with CloseStatus[code=1001, reason=null]
2025-09-16 23:12:06 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session y3cqacoj
2025-09-16 23:12:06 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=y3cqacoj
2025-09-16 23:12:06 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session dtezy05c with CloseStatus[code=1001, reason=null]
2025-09-16 23:12:06 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=dtezy05c]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:792)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 23:12:06 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 23:12:06 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=dtezy05c] closed with CloseStatus[code=1001, reason=null]
2025-09-16 23:12:06 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session dtezy05c
2025-09-16 23:12:06 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=dtezy05c
2025-09-16 23:12:06 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-09-16 23:12:06 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-09-16 23:12:06 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2e3e7fb8]]
2025-09-16 23:12:06 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2e3e7fb8]
2025-09-16 23:12:06 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2e3e7fb8]
2025-09-16 23:12:06 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-09-16 23:12:06 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:12:06 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:12:06 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-09-16 23:12:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-09-16 23:12:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-09-16 23:12:12 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Starting ChatGemmaApplication using Java 17.0.15 with PID 82089 (/Users/picpal/Desktop/workspace/chatGemma/backend/build/classes/java/main started by picpal in /Users/picpal/Desktop/workspace/chatGemma/backend)
2025-09-16 23:12:12 [restartedMain] DEBUG com.chatgemma.ChatGemmaApplication - Running with Spring Boot v3.4.0, Spring v6.2.0
2025-09-16 23:12:12 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - The following 1 profile is active: "dev"
2025-09-16 23:12:12 [restartedMain] INFO  o.s.b.d.restart.ChangeableUrls - The Class-Path manifest attribute in /Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/ojdbc8-23.5.0.24.07.jar referenced one or more files that do not exist: file:/Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/oraclepki.jar
2025-09-16 23:12:12 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-09-16 23:12:12 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-09-16 23:12:12 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-16 23:12:12 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 53 ms. Found 4 JPA repository interfaces.
2025-09-16 23:12:12 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-16 23:12:12 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-16 23:12:12 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.33]
2025-09-16 23:12:12 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-16 23:12:12 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 514 ms
2025-09-16 23:12:12 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-09-16 23:12:12 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:file:./data/chatgemma user=SA
2025-09-16 23:12:12 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-09-16 23:12:12 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./data/chatgemma'
2025-09-16 23:12:12 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-16 23:12:12 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.2.Final
2025-09-16 23:12:12 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-09-16 23:12:13 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-16 23:12:13 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-16 23:12:13 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-09-16 23:12:13 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-09-16 23:12:13 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists idx_user_username
2025-09-16 23:12:13 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       add constraint idx_user_username unique (username)
2025-09-16 23:12:13 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-09-16 23:12:13 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-09-16 23:12:13 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-16 23:12:13 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-09-16 23:12:13 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 19 mappings in 'requestMappingHandlerMapping'
2025-09-16 23:12:13 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-16 23:12:13 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-16 23:12:13 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.AdminController:
	
2025-09-16 23:12:13 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.AuthController:
	
2025-09-16 23:12:13 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.ChatController:
	
2025-09-16 23:12:13 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.WebSocketChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor,Principal)
	{[MESSAGE],[/chat.join]}: joinChat(String,SimpMessageHeaderAccessor,Principal)
2025-09-16 23:12:13 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-09-16 23:12:13 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-16 23:12:13 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-16 23:12:13 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-16 23:12:13 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-09-16 23:12:13 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-09-16 23:12:13 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-09-16 23:12:13 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1823b3b9]
2025-09-16 23:12:13 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1823b3b9]
2025-09-16 23:12:13 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1823b3b9]]
2025-09-16 23:12:13 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-09-16 23:12:13 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:12:13 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:12:13 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-16 23:12:13 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Started ChatGemmaApplication in 1.801 seconds (process running for 1.938)
2025-09-16 23:12:13 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-09-16 23:12:27 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-16 23:12:27 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-09-16 23:12:27 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-09-16 23:12:27 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-09-16 23:12:27 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-09-16 23:12:27 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4f1dc0ec
2025-09-16 23:12:27 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@454bb349
2025-09-16 23:12:27 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-16 23:12:27 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-09-16 23:12:27 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:12:27 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:12:27 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:12:27 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:12:27 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:12:27 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:12:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:12:27 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:12:27 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:12:27 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:12:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:12:27 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:12:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@5b0469c4]
2025-09-16 23:12:27 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@570634bb]
2025-09-16 23:12:27 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:27 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:27 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:27 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:27 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:12:27 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:12:27 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:12:27 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:12:27 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:12:27 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:12:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:12:27 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:12:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:12:27 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:12:28 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:12:28 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:12:28 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@3f13096a, com.chatgemma.dto.response.ChatResponse@6afebd77]]
2025-09-16 23:12:28 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@1cca0393, com.chatgemma.dto.response.ChatResponse@6582f8a7]]
2025-09-16 23:12:28 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:28 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:28 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758031947999
2025-09-16 23:12:28 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758031947999
2025-09-16 23:12:28 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:28 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:28 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758031947999
2025-09-16 23:12:28 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758031947999
2025-09-16 23:12:28 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758031947999", parameters={masked}
2025-09-16 23:12:28 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758031947999", parameters={masked}
2025-09-16 23:12:28 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7c61a9a4
2025-09-16 23:12:28 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7c61a9a4
2025-09-16 23:12:28 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758031947999
2025-09-16 23:12:28 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758031947999
2025-09-16 23:12:28 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:28 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:28 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:28 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:28 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/544/ituklhrs/websocket
2025-09-16 23:12:28 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/544/ituklhrs/websocket
2025-09-16 23:12:28 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/544/ituklhrs/websocket", parameters={}
2025-09-16 23:12:28 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7c61a9a4
2025-09-16 23:12:28 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/544/ituklhrs/websocket
2025-09-16 23:12:28 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:28 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:12:28 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ituklhrs]
2025-09-16 23:12:28 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/843/cj5dmx1e/websocket
2025-09-16 23:12:28 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/843/cj5dmx1e/websocket
2025-09-16 23:12:28 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/843/cj5dmx1e/websocket", parameters={}
2025-09-16 23:12:28 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7c61a9a4
2025-09-16 23:12:28 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/843/cj5dmx1e/websocket
2025-09-16 23:12:28 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:28 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:12:28 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=cj5dmx1e]
2025-09-16 23:12:28 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=cj5dmx1e
2025-09-16 23:12:28 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=cj5dmx1e, lookupDestination='/chat.join'
2025-09-16 23:12:28 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-usercj5dmx1e subscriptionId=sub-0 session=cj5dmx1e payload=byte[0]
2025-09-16 23:12:28 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:12:28 [clientInboundChannel-7] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=cj5dmx1e
2025-09-16 23:12:28 [clientInboundChannel-7] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:12:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ituklhrs] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:12:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=cj5dmx1e] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:12:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ituklhrs
2025-09-16 23:12:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session cj5dmx1e
2025-09-16 23:12:29 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=cj5dmx1e
2025-09-16 23:12:29 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ituklhrs
2025-09-16 23:12:29 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=cj5dmx1e}], simpSessionId=cj5dmx1e}]
2025-09-16 23:12:29 [clientOutboundChannel-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={}, simpSessionId=ituklhrs}], simpSessionId=ituklhrs}]
2025-09-16 23:12:29 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:12:29 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:12:29 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:12:29 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:12:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:12:29 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:12:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:12:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:12:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:12:29 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:12:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:12:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@10bab82e]
2025-09-16 23:12:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:12:29 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@706f494a]
2025-09-16 23:12:29 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:29 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:29 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:12:29 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:12:29 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:12:29 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:12:29 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:12:29 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:12:29 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:12:29 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:12:29 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:12:29 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:12:29 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:12:29 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:12:29 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@511bf29d, com.chatgemma.dto.response.ChatResponse@167ad765]]
2025-09-16 23:12:29 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@5b1a1837, com.chatgemma.dto.response.ChatResponse@60c844f9]]
2025-09-16 23:12:29 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:29 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:29 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:29 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:29 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758031949273
2025-09-16 23:12:29 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758031949273
2025-09-16 23:12:29 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758031949273
2025-09-16 23:12:29 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758031949273
2025-09-16 23:12:29 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758031949273", parameters={masked}
2025-09-16 23:12:29 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758031949273", parameters={masked}
2025-09-16 23:12:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7c61a9a4
2025-09-16 23:12:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7c61a9a4
2025-09-16 23:12:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758031949273
2025-09-16 23:12:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758031949273
2025-09-16 23:12:29 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:29 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:29 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:29 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:29 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/840/bqhsrfwm/websocket
2025-09-16 23:12:29 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/840/bqhsrfwm/websocket
2025-09-16 23:12:29 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/840/bqhsrfwm/websocket", parameters={}
2025-09-16 23:12:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7c61a9a4
2025-09-16 23:12:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/840/bqhsrfwm/websocket
2025-09-16 23:12:29 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:29 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:12:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=bqhsrfwm]
2025-09-16 23:12:29 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=bqhsrfwm
2025-09-16 23:12:29 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/854/gap5omyl/websocket
2025-09-16 23:12:29 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/854/gap5omyl/websocket
2025-09-16 23:12:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/854/gap5omyl/websocket", parameters={}
2025-09-16 23:12:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7c61a9a4
2025-09-16 23:12:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/854/gap5omyl/websocket
2025-09-16 23:12:29 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:12:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=gap5omyl]
2025-09-16 23:12:29 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-userbqhsrfwm subscriptionId=sub-0 session=bqhsrfwm payload=byte[0]
2025-09-16 23:12:29 [clientInboundChannel-22] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=bqhsrfwm, lookupDestination='/chat.join'
2025-09-16 23:12:29 [clientInboundChannel-22] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:12:29 [clientInboundChannel-22] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=bqhsrfwm
2025-09-16 23:12:29 [clientInboundChannel-22] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:12:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=gap5omyl] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:12:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session gap5omyl
2025-09-16 23:12:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=bqhsrfwm] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:12:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session bqhsrfwm
2025-09-16 23:12:29 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=gap5omyl
2025-09-16 23:12:29 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=bqhsrfwm
2025-09-16 23:12:29 [clientOutboundChannel-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=gap5omyl}], simpSessionId=gap5omyl}]
2025-09-16 23:12:29 [clientOutboundChannel-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=bqhsrfwm}], simpSessionId=bqhsrfwm}]
2025-09-16 23:12:29 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:12:29 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:12:29 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:12:29 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:12:29 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:12:29 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:12:29 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:12:29 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:12:29 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:12:29 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:12:29 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:12:29 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:12:29 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@298299ff]
2025-09-16 23:12:29 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@6a305f7f]
2025-09-16 23:12:29 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:29 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:29 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:29 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:30 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:12:30 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:12:30 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:12:30 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:12:30 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:12:30 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:12:30 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:12:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:12:30 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:12:30 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:12:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:12:30 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:12:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@47dca00c, com.chatgemma.dto.response.ChatResponse@28d4a7c5]]
2025-09-16 23:12:30 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@e20a353, com.chatgemma.dto.response.ChatResponse@7d2d770b]]
2025-09-16 23:12:30 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:30 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:30 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:30 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:30 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758031950041
2025-09-16 23:12:30 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758031950041
2025-09-16 23:12:30 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758031950041
2025-09-16 23:12:30 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758031950041", parameters={masked}
2025-09-16 23:12:30 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758031950041
2025-09-16 23:12:30 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758031950041", parameters={masked}
2025-09-16 23:12:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7c61a9a4
2025-09-16 23:12:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7c61a9a4
2025-09-16 23:12:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758031950041
2025-09-16 23:12:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758031950041
2025-09-16 23:12:30 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:30 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:30 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:30 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:30 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/885/143uhzn4/websocket
2025-09-16 23:12:30 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/885/143uhzn4/websocket
2025-09-16 23:12:30 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/885/143uhzn4/websocket", parameters={}
2025-09-16 23:12:30 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7c61a9a4
2025-09-16 23:12:30 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/885/143uhzn4/websocket
2025-09-16 23:12:30 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:30 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:12:30 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=143uhzn4]
2025-09-16 23:12:30 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/871/2rrdy1qj/websocket
2025-09-16 23:12:30 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/871/2rrdy1qj/websocket
2025-09-16 23:12:30 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/871/2rrdy1qj/websocket", parameters={}
2025-09-16 23:12:30 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7c61a9a4
2025-09-16 23:12:30 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/871/2rrdy1qj/websocket
2025-09-16 23:12:30 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:30 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:12:30 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=2rrdy1qj]
2025-09-16 23:12:30 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=2rrdy1qj
2025-09-16 23:12:30 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-user2rrdy1qj subscriptionId=sub-0 session=2rrdy1qj payload=byte[0]
2025-09-16 23:12:30 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=2rrdy1qj, lookupDestination='/chat.join'
2025-09-16 23:12:30 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:12:30 [clientInboundChannel-13] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=2rrdy1qj
2025-09-16 23:12:30 [clientInboundChannel-13] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:12:30 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=2rrdy1qj] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:12:30 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 2rrdy1qj
2025-09-16 23:12:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=143uhzn4] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:12:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 143uhzn4
2025-09-16 23:12:30 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=2rrdy1qj
2025-09-16 23:12:30 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=143uhzn4
2025-09-16 23:12:30 [clientOutboundChannel-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=143uhzn4}], simpSessionId=143uhzn4}]
2025-09-16 23:12:30 [clientOutboundChannel-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=2rrdy1qj}], simpSessionId=2rrdy1qj}]
2025-09-16 23:12:30 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:12:30 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:12:30 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:12:30 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:12:30 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:12:30 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:12:30 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:12:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:12:30 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:12:30 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:12:30 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:12:30 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@5d8784c4]
2025-09-16 23:12:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:12:30 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@179cbabc]
2025-09-16 23:12:30 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:30 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:30 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:30 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:12:30 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:12:30 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:12:30 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:12:30 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:12:30 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:12:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:12:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:12:30 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:12:30 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:12:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:12:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@2cb4cb60, com.chatgemma.dto.response.ChatResponse@6974d0d]]
2025-09-16 23:12:30 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:30 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:12:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@1add8263, com.chatgemma.dto.response.ChatResponse@48dccfa0]]
2025-09-16 23:12:30 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:30 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:30 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758031950954
2025-09-16 23:12:30 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758031950954
2025-09-16 23:12:30 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758031950954
2025-09-16 23:12:30 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758031950954
2025-09-16 23:12:30 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758031950954", parameters={masked}
2025-09-16 23:12:30 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758031950954", parameters={masked}
2025-09-16 23:12:30 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7c61a9a4
2025-09-16 23:12:30 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7c61a9a4
2025-09-16 23:12:30 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758031950954
2025-09-16 23:12:30 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:30 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:30 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758031950954
2025-09-16 23:12:30 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:12:30 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:30 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/876/yjovpi1s/websocket
2025-09-16 23:12:30 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/876/yjovpi1s/websocket
2025-09-16 23:12:30 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/876/yjovpi1s/websocket", parameters={}
2025-09-16 23:12:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7c61a9a4
2025-09-16 23:12:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/876/yjovpi1s/websocket
2025-09-16 23:12:30 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:30 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:12:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=yjovpi1s]
2025-09-16 23:12:30 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/706/3wbkcl45/websocket
2025-09-16 23:12:30 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/706/3wbkcl45/websocket
2025-09-16 23:12:30 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/706/3wbkcl45/websocket", parameters={}
2025-09-16 23:12:30 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7c61a9a4
2025-09-16 23:12:30 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/706/3wbkcl45/websocket
2025-09-16 23:12:30 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:12:30 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:12:30 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3wbkcl45]
2025-09-16 23:12:30 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=3wbkcl45
2025-09-16 23:12:30 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-user3wbkcl45 subscriptionId=sub-0 session=3wbkcl45 payload=byte[0]
2025-09-16 23:12:31 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=3wbkcl45, lookupDestination='/chat.join'
2025-09-16 23:12:31 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:12:31 [clientInboundChannel-1] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=3wbkcl45
2025-09-16 23:12:31 [clientInboundChannel-1] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:12:34 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=3wbkcl45, lookupDestination='/chat.sendMessage'
2025-09-16 23:12:34 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 23:12:34 [clientInboundChannel-6] INFO  c.c.c.WebSocketChatController -  WebSocket message received: chatId=2, content=, principal=null, sessionId=3wbkcl45
2025-09-16 23:12:34 [clientInboundChannel-6] WARN  c.c.c.WebSocketChatController -  No authenticated user, proceeding with anonymous processing
2025-09-16 23:12:34 [clientInboundChannel-6] INFO  c.c.c.WebSocketChatController -  Processing AI response for message: 
2025-09-16 23:12:34 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.w.r.f.client.ExchangeFunctions - [1394471f] HTTP POST http://localhost:11434/api/generate
2025-09-16 23:12:34 [ForkJoinPool.commonPool-worker-1] ERROR i.n.r.d.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-09-16 23:12:34 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [1394471f] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@6b7565a0]
2025-09-16 23:12:38 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 6 sessions: [bqhsrfwm, 2rrdy1qj, gap5omyl, ituklhrs, cj5dmx1e, 143uhzn4]
2025-09-16 23:12:45 [reactor-http-nio-2] DEBUG o.s.w.r.f.client.ExchangeFunctions - [1394471f] [4286b21a-1] Response 200 OK
2025-09-16 23:12:45 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [1394471f] [4286b21a-1] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@4e2bfe44]
2025-09-16 23:12:45 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: ! 
2025-09-16 23:12:45 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:45 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: ? 
2025-09-16 23:12:45 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:45 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:45 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:45 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:45 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:45 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:45 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:45 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: . 
2025-09-16 23:12:46 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:46 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: : 
2025-09-16 23:12:46 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: * 
2025-09-16 23:12:46 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: ** 
2025-09-16 23:12:46 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: :** 
2025-09-16 23:12:46 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:46 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:46 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:46 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:46 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:46 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:46 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: . 
2025-09-16 23:12:46 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: * 
2025-09-16 23:12:46 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: ** 
2025-09-16 23:12:46 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: :** 
2025-09-16 23:12:46 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:46 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:46 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:46 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:47 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:47 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:47 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: . 
2025-09-16 23:12:47 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: * 
2025-09-16 23:12:47 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: **:** 
2025-09-16 23:12:47 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: , 
2025-09-16 23:12:47 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: , 
2025-09-16 23:12:47 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:47 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:47 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:47 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:47 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:47 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:47 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:47 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: . 
2025-09-16 23:12:47 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: * 
2025-09-16 23:12:47 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: **:** 
2025-09-16 23:12:47 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:48 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:48 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:48 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:48 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:48 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: . 
2025-09-16 23:12:48 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: * 
2025-09-16 23:12:48 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: ** 
2025-09-16 23:12:48 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: :** 
2025-09-16 23:12:48 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:48 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:48 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:48 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:48 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:48 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:48 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: ! 
2025-09-16 23:12:48 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45:  
2025-09-16 23:12:48 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: . 
2025-09-16 23:12:48 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=3wbkcl45: 
2025-09-16 23:12:48 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending streaming completion signal to sessionId=3wbkcl45
2025-09-16 23:13:13 [MessageBroker-12] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 8 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(4)-CONNECTED(4)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 24, active threads = 0, queued tasks = 0, completed tasks = 57], outboundChannel[pool size = 10, active threads = 0, queued tasks = 0, completed tasks = 10], sockJsScheduler[pool size = 12, active threads = 1, queued tasks = 3, completed tasks = 12]
2025-09-16 23:17:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=yjovpi1s] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:17:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3wbkcl45] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:17:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3wbkcl45
2025-09-16 23:17:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session yjovpi1s
2025-09-16 23:17:13 [clientInboundChannel-27] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=yjovpi1s
2025-09-16 23:17:13 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=3wbkcl45
2025-09-16 23:17:13 [clientOutboundChannel-11] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=yjovpi1s}], simpSessionId=yjovpi1s}]
2025-09-16 23:17:13 [clientOutboundChannel-12] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=3wbkcl45}], simpSessionId=3wbkcl45}]
2025-09-16 23:17:13 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:17:13 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:17:13 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:17:13 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:17:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:17:13 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:17:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:17:13 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:17:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:17:13 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:17:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:17:13 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:17:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@6f63a090]
2025-09-16 23:17:13 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@28c2f4e5]
2025-09-16 23:17:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:17:13 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:17:13 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:17:13 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:17:13 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:17:13 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:17:13 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:17:13 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:17:13 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:17:13 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:17:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:17:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:17:13 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:17:13 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:17:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:17:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:17:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@62644674, com.chatgemma.dto.response.ChatResponse@4e8ea752]]
2025-09-16 23:17:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@b415b87, com.chatgemma.dto.response.ChatResponse@d09bf6d]]
2025-09-16 23:17:13 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:17:13 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:17:13 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:17:13 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:17:13 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758032233256
2025-09-16 23:17:13 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758032233256
2025-09-16 23:17:13 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758032233256
2025-09-16 23:17:13 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758032233256
2025-09-16 23:17:13 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758032233256", parameters={masked}
2025-09-16 23:17:13 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758032233256", parameters={masked}
2025-09-16 23:17:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7c61a9a4
2025-09-16 23:17:13 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7c61a9a4
2025-09-16 23:17:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758032233256
2025-09-16 23:17:13 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758032233256
2025-09-16 23:17:13 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:17:13 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:17:13 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:17:13 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:17:13 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/031/u2r12f22/websocket
2025-09-16 23:17:13 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/031/u2r12f22/websocket
2025-09-16 23:17:13 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/031/u2r12f22/websocket", parameters={}
2025-09-16 23:17:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7c61a9a4
2025-09-16 23:17:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/031/u2r12f22/websocket
2025-09-16 23:17:13 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:17:13 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:17:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=u2r12f22]
2025-09-16 23:17:13 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=u2r12f22
2025-09-16 23:17:13 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/686/1o02sfy5/websocket
2025-09-16 23:17:13 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/686/1o02sfy5/websocket
2025-09-16 23:17:13 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-useru2r12f22 subscriptionId=sub-0 session=u2r12f22 payload=byte[0]
2025-09-16 23:17:13 [clientInboundChannel-37] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=u2r12f22, lookupDestination='/chat.join'
2025-09-16 23:17:13 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/686/1o02sfy5/websocket", parameters={}
2025-09-16 23:17:13 [clientInboundChannel-37] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:17:13 [clientInboundChannel-37] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=u2r12f22
2025-09-16 23:17:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7c61a9a4
2025-09-16 23:17:13 [clientInboundChannel-37] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:17:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/686/1o02sfy5/websocket
2025-09-16 23:17:13 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:17:13 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:17:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=1o02sfy5]
2025-09-16 23:17:16 [clientInboundChannel-40] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=u2r12f22, lookupDestination='/chat.sendMessage'
2025-09-16 23:17:16 [clientInboundChannel-40] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 23:17:16 [clientInboundChannel-40] INFO  c.c.c.WebSocketChatController -  WebSocket message received: chatId=2, content=, principal=null, sessionId=u2r12f22
2025-09-16 23:17:16 [clientInboundChannel-40] WARN  c.c.c.WebSocketChatController -  No authenticated user, proceeding with anonymous processing
2025-09-16 23:17:16 [clientInboundChannel-40] INFO  c.c.c.WebSocketChatController -  Processing AI response for message: 
2025-09-16 23:17:16 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.w.r.f.client.ExchangeFunctions - [382067] HTTP POST http://localhost:11434/api/generate
2025-09-16 23:17:16 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [382067] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@5053028c]
2025-09-16 23:17:23 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [3wbkcl45, yjovpi1s]
2025-09-16 23:17:25 [reactor-http-nio-2] DEBUG o.s.w.r.f.client.ExchangeFunctions - [382067] [4286b21a-2] Response 200 OK
2025-09-16 23:17:25 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [382067] [4286b21a-2] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@3d61ac39]
2025-09-16 23:17:25 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: ! 
2025-09-16 23:17:25 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22:  
2025-09-16 23:17:25 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: ? 
2025-09-16 23:17:25 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22:  
2025-09-16 23:17:25 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22:  
2025-09-16 23:17:25 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22:  
2025-09-16 23:17:26 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22:  
2025-09-16 23:17:26 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22:  
2025-09-16 23:17:26 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22:  
2025-09-16 23:17:26 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22:  
2025-09-16 23:17:26 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: . 
2025-09-16 23:17:26 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: * 
2025-09-16 23:17:26 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: ** 
2025-09-16 23:17:26 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22:  
2025-09-16 23:17:26 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: ?** 
2025-09-16 23:17:26 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: (: 
2025-09-16 23:17:26 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22:  
2025-09-16 23:17:26 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22:  
2025-09-16 23:17:26 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22:  
2025-09-16 23:17:26 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: , 
2025-09-16 23:17:26 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22:  
2025-09-16 23:17:26 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22:  
2025-09-16 23:17:26 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22:  
2025-09-16 23:17:26 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: ) 
2025-09-16 23:17:27 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: * 
2025-09-16 23:17:27 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: ** 
2025-09-16 23:17:27 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: ?** 
2025-09-16 23:17:27 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: (: 
2025-09-16 23:17:27 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: , 
2025-09-16 23:17:27 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: , 
2025-09-16 23:17:27 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22:  
2025-09-16 23:17:27 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22:  
2025-09-16 23:17:27 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: ) 
2025-09-16 23:17:27 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: * 
2025-09-16 23:17:27 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: ** 
2025-09-16 23:17:27 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22:  
2025-09-16 23:17:27 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: ?** 
2025-09-16 23:17:27 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: (: 
2025-09-16 23:17:27 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22:  
2025-09-16 23:17:27 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: , 
2025-09-16 23:17:27 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22:  
2025-09-16 23:17:27 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: ) 
2025-09-16 23:17:27 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22:  
2025-09-16 23:17:28 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: ! 
2025-09-16 23:17:28 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=u2r12f22: 
2025-09-16 23:17:28 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending streaming completion signal to sessionId=u2r12f22
2025-09-16 23:17:56 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=u2r12f22
2025-09-16 23:17:56 [clientInboundChannel-48] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/1-useru2r12f22 subscriptionId=sub-1 session=u2r12f22 payload=byte[0]
2025-09-16 23:17:56 [clientInboundChannel-48] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=u2r12f22, lookupDestination='/chat.join'
2025-09-16 23:17:56 [clientInboundChannel-48] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:17:56 [clientInboundChannel-48] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=1, principal=null, sessionId=u2r12f22
2025-09-16 23:17:56 [clientInboundChannel-48] INFO  c.c.c.WebSocketChatController - User joined chat room: 1
2025-09-16 23:17:57 [clientInboundChannel-30] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=u2r12f22
2025-09-16 23:17:57 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-useru2r12f22 subscriptionId=sub-2 session=u2r12f22 payload=byte[0]
2025-09-16 23:17:57 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=u2r12f22, lookupDestination='/chat.join'
2025-09-16 23:17:57 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:17:57 [clientInboundChannel-34] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=u2r12f22
2025-09-16 23:17:57 [clientInboundChannel-34] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:22:04 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-16 23:22:04 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-16 23:22:04 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-09-16 23:22:04 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session 1o02sfy5 with CloseStatus[code=1001, reason=null]
2025-09-16 23:22:04 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=1o02sfy5]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:792)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 23:22:04 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 23:22:04 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=1o02sfy5] closed with CloseStatus[code=1001, reason=null]
2025-09-16 23:22:04 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 1o02sfy5
2025-09-16 23:22:04 [clientInboundChannel-50] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=1o02sfy5
2025-09-16 23:22:04 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session u2r12f22 with CloseStatus[code=1001, reason=null]
2025-09-16 23:22:04 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=u2r12f22]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:792)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 23:22:04 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 23:22:04 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=u2r12f22] closed with CloseStatus[code=1001, reason=null]
2025-09-16 23:22:04 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session u2r12f22
2025-09-16 23:22:04 [clientInboundChannel-53] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=u2r12f22
2025-09-16 23:22:04 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-09-16 23:22:04 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-09-16 23:22:04 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1823b3b9]]
2025-09-16 23:22:04 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1823b3b9]
2025-09-16 23:22:04 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1823b3b9]
2025-09-16 23:22:04 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-09-16 23:22:04 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:22:04 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:22:04 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-09-16 23:22:04 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-09-16 23:22:04 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-09-16 23:22:15 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Starting ChatGemmaApplication using Java 17.0.15 with PID 88054 (/Users/picpal/Desktop/workspace/chatGemma/backend/build/classes/java/main started by picpal in /Users/picpal/Desktop/workspace/chatGemma/backend)
2025-09-16 23:22:15 [restartedMain] DEBUG com.chatgemma.ChatGemmaApplication - Running with Spring Boot v3.4.0, Spring v6.2.0
2025-09-16 23:22:15 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - The following 1 profile is active: "dev"
2025-09-16 23:22:15 [restartedMain] INFO  o.s.b.d.restart.ChangeableUrls - The Class-Path manifest attribute in /Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/ojdbc8-23.5.0.24.07.jar referenced one or more files that do not exist: file:/Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/oraclepki.jar
2025-09-16 23:22:15 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-09-16 23:22:15 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-09-16 23:22:15 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-16 23:22:15 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 53 ms. Found 4 JPA repository interfaces.
2025-09-16 23:22:15 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-16 23:22:15 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-16 23:22:15 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.33]
2025-09-16 23:22:15 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-16 23:22:15 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 544 ms
2025-09-16 23:22:15 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-09-16 23:22:15 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:file:./data/chatgemma user=SA
2025-09-16 23:22:15 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-09-16 23:22:15 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./data/chatgemma'
2025-09-16 23:22:16 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-16 23:22:16 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.2.Final
2025-09-16 23:22:16 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-09-16 23:22:16 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-16 23:22:16 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-16 23:22:16 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-09-16 23:22:16 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-09-16 23:22:16 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists idx_user_username
2025-09-16 23:22:16 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       add constraint idx_user_username unique (username)
2025-09-16 23:22:16 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-09-16 23:22:16 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-09-16 23:22:16 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-16 23:22:16 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-09-16 23:22:16 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 19 mappings in 'requestMappingHandlerMapping'
2025-09-16 23:22:16 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-16 23:22:16 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-16 23:22:16 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.AdminController:
	
2025-09-16 23:22:16 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.AuthController:
	
2025-09-16 23:22:16 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.ChatController:
	
2025-09-16 23:22:16 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.WebSocketChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor,Principal)
	{[MESSAGE],[/chat.join]}: joinChat(String,SimpMessageHeaderAccessor,Principal)
2025-09-16 23:22:16 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-09-16 23:22:16 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-16 23:22:16 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-16 23:22:16 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-16 23:22:16 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-09-16 23:22:16 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-09-16 23:22:17 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-09-16 23:22:17 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6b2c609c]
2025-09-16 23:22:17 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6b2c609c]
2025-09-16 23:22:17 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6b2c609c]]
2025-09-16 23:22:17 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-09-16 23:22:17 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:22:17 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:22:17 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-16 23:22:17 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Started ChatGemmaApplication in 1.829 seconds (process running for 1.957)
2025-09-16 23:22:17 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-09-16 23:23:17 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-09-16 23:23:21 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-16 23:23:21 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-09-16 23:23:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-09-16 23:23:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-09-16 23:23:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-09-16 23:23:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1be391db
2025-09-16 23:23:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@2bc6c644
2025-09-16 23:23:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-16 23:23:21 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-09-16 23:23:21 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:23:21 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:23:21 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:23:21 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:23:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:23:21 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:23:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:23:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:23:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:23:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:23:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 23:23:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 23:23:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 23:23:21 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 23:23:21 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:23:21 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:23:22 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:23:22 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:23:22 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:23:22 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:23:22 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:23:22 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 23:23:22 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 23:23:22 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:23:22 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:23:22 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:23:22 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:23:22 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:23:22 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:23:22 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 23:23:22 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 23:23:22 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:24:16 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-09-16 23:24:16 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-09-16 23:24:16 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-09-16 23:24:16 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpSession)
2025-09-16 23:24:16 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.chatgemma.dto.request.LoginRequest@36b40d27]
2025-09-16 23:24:16 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.email=?
2025-09-16 23:24:16 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    /* insert for
        com.chatgemma.entity.AuditLog */insert 
    into
        audit_logs (action, details, ip_address, resource_id, resource_type, timestamp, user_agent, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-09-16 23:24:16 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:24:16 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 23:24:16 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 23:24:16 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:24:20 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-09-16 23:24:20 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-09-16 23:24:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-09-16 23:24:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpSession)
2025-09-16 23:24:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.chatgemma.dto.request.LoginRequest@1385c3b]
2025-09-16 23:24:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.email=?
2025-09-16 23:24:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    /* insert for
        com.chatgemma.entity.AuditLog */insert 
    into
        audit_logs (action, details, ip_address, resource_id, resource_type, timestamp, user_agent, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-09-16 23:24:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:24:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 23:24:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 23:24:20 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:24:26 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:24:26 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:24:26 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:24:26 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:24:26 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:24:26 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:24:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:24:26 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:24:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:24:26 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:24:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 23:24:26 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 23:24:26 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 23:24:26 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 23:24:26 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:24:26 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:24:29 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:24:29 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:24:29 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:24:29 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:24:29 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:24:29 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:24:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:24:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:24:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:24:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:24:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 23:24:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 23:24:29 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 23:24:29 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 23:24:29 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:24:29 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:24:31 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:24:31 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:24:31 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:24:31 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:24:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:24:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:24:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:24:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:24:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:24:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:24:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 23:24:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 23:24:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 23:24:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 23:24:31 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:24:31 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:24:32 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:24:32 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:24:32 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:24:32 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:24:32 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:24:32 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:24:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:24:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:24:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:24:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:24:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 23:24:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 23:24:32 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 23:24:32 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 23:24:32 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:24:32 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:24:37 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-09-16 23:24:37 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-09-16 23:24:37 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-09-16 23:24:37 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpSession)
2025-09-16 23:24:37 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.chatgemma.dto.request.LoginRequest@7ba30512]
2025-09-16 23:24:37 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.email=?
2025-09-16 23:24:37 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    /* insert for
        com.chatgemma.entity.AuditLog */insert 
    into
        audit_logs (action, details, ip_address, resource_id, resource_type, timestamp, user_agent, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-09-16 23:24:37 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:24:37 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 23:24:37 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 23:24:37 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:26:05 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:26:05 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:26:05 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:26:05 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:26:05 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:26:05 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 23:26:05 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 23:26:05 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:26:40 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:26:40 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:26:40 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:26:40 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:26:40 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-09-16 23:26:40 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 23:26:40 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 23:26:40 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:27:38 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:27:38 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:27:38 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:27:38 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:27:38 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:27:38 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:27:38 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:27:38 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:27:38 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:27:38 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:27:38 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 23:27:38 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 23:27:38 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 23:27:38 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 23:27:38 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:27:38 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:27:43 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-09-16 23:27:43 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-09-16 23:27:43 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-09-16 23:27:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpSession)
2025-09-16 23:27:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.chatgemma.dto.request.LoginRequest@4952ab73]
2025-09-16 23:27:43 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.email=?
2025-09-16 23:27:43 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    /* insert for
        com.chatgemma.entity.AuditLog */insert 
    into
        audit_logs (action, details, ip_address, resource_id, resource_type, timestamp, user_agent, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-09-16 23:27:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:27:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 23:27:43 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 23:27:43 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:28:06 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-09-16 23:28:06 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-09-16 23:28:06 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-09-16 23:28:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpSession)
2025-09-16 23:28:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.chatgemma.dto.request.LoginRequest@395151af]
2025-09-16 23:28:06 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.email=?
2025-09-16 23:28:06 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* insert for
        com.chatgemma.entity.AuditLog */insert 
    into
        audit_logs (action, details, ip_address, resource_id, resource_type, timestamp, user_agent, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-09-16 23:28:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:28:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-09-16 23:28:06 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-09-16 23:28:06 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:29:01 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /h2-console
2025-09-16 23:29:01 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /h2-console
2025-09-16 23:29:55 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-16 23:29:55 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-16 23:29:55 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-09-16 23:29:55 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-09-16 23:29:55 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-09-16 23:29:55 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6b2c609c]]
2025-09-16 23:29:55 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6b2c609c]
2025-09-16 23:29:55 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6b2c609c]
2025-09-16 23:29:55 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-09-16 23:29:55 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:29:55 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:29:55 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-09-16 23:29:55 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-09-16 23:29:55 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-09-16 23:30:02 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Starting ChatGemmaApplication using Java 17.0.15 with PID 93077 (/Users/picpal/Desktop/workspace/chatGemma/backend/build/classes/java/main started by picpal in /Users/picpal/Desktop/workspace/chatGemma/backend)
2025-09-16 23:30:02 [restartedMain] DEBUG com.chatgemma.ChatGemmaApplication - Running with Spring Boot v3.4.0, Spring v6.2.0
2025-09-16 23:30:02 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - The following 1 profile is active: "dev"
2025-09-16 23:30:02 [restartedMain] INFO  o.s.b.d.restart.ChangeableUrls - The Class-Path manifest attribute in /Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/ojdbc8-23.5.0.24.07.jar referenced one or more files that do not exist: file:/Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/oraclepki.jar
2025-09-16 23:30:02 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-09-16 23:30:02 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-09-16 23:30:02 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-16 23:30:02 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 48 ms. Found 4 JPA repository interfaces.
2025-09-16 23:30:02 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-16 23:30:02 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-16 23:30:02 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.33]
2025-09-16 23:30:02 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-16 23:30:02 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 485 ms
2025-09-16 23:30:02 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-09-16 23:30:02 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:file:./data/chatgemma user=SA
2025-09-16 23:30:02 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-09-16 23:30:02 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./data/chatgemma'
2025-09-16 23:30:02 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-16 23:30:02 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.2.Final
2025-09-16 23:30:02 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-09-16 23:30:02 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-16 23:30:02 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-16 23:30:02 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-09-16 23:30:03 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-09-16 23:30:03 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists idx_user_username
2025-09-16 23:30:03 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       add constraint idx_user_username unique (username)
2025-09-16 23:30:03 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-09-16 23:30:03 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-09-16 23:30:03 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-16 23:30:03 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-09-16 23:30:03 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 19 mappings in 'requestMappingHandlerMapping'
2025-09-16 23:30:03 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-16 23:30:03 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-16 23:30:03 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.AdminController:
	
2025-09-16 23:30:03 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.AuthController:
	
2025-09-16 23:30:03 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.ChatController:
	
2025-09-16 23:30:03 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.WebSocketChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor,Principal)
	{[MESSAGE],[/chat.join]}: joinChat(String,SimpMessageHeaderAccessor,Principal)
2025-09-16 23:30:03 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-09-16 23:30:03 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-16 23:30:03 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-16 23:30:03 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-16 23:30:03 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-09-16 23:30:03 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-09-16 23:30:03 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-09-16 23:30:03 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6575a12c]
2025-09-16 23:30:03 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6575a12c]
2025-09-16 23:30:03 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6575a12c]]
2025-09-16 23:30:03 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-09-16 23:30:03 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:30:03 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:30:03 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-16 23:30:03 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Started ChatGemmaApplication in 1.702 seconds (process running for 1.83)
2025-09-16 23:30:03 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-09-16 23:30:52 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-16 23:30:52 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-09-16 23:30:52 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-09-16 23:30:52 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-09-16 23:30:52 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-09-16 23:30:52 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@e65e9cc
2025-09-16 23:30:52 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@39de7496
2025-09-16 23:30:52 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-16 23:30:52 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-09-16 23:30:52 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-09-16 23:30:52 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-09-16 23:30:52 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-09-16 23:30:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpSession)
2025-09-16 23:30:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.chatgemma.dto.request.LoginRequest@17fb9cdf]
2025-09-16 23:30:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.email=?
2025-09-16 23:30:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    /* insert for
        com.chatgemma.entity.AuditLog */insert 
    into
        audit_logs (action, details, ip_address, resource_id, resource_type, timestamp, user_agent, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-09-16 23:30:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:30:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@11b1013f]
2025-09-16 23:30:52 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:30:52 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:30:52 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:30:52 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:30:52 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:30:52 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:30:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:30:52 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:30:52 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:30:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:30:52 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:30:52 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:30:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:30:52 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:30:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@5ff6553f, com.chatgemma.dto.response.ChatResponse@7b67f6a8]]
2025-09-16 23:30:52 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@5eba4d65, com.chatgemma.dto.response.ChatResponse@64a2499d]]
2025-09-16 23:30:52 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:30:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:30:52 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:30:52 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:30:52 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033052726
2025-09-16 23:30:52 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033052726
2025-09-16 23:30:52 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033052726
2025-09-16 23:30:52 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033052726
2025-09-16 23:30:52 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033052726", parameters={masked}
2025-09-16 23:30:52 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033052726", parameters={masked}
2025-09-16 23:30:52 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:30:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:30:52 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033052726
2025-09-16 23:30:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033052726
2025-09-16 23:30:52 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:30:52 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:30:52 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:30:52 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:30:52 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/861/21miyvdq/websocket
2025-09-16 23:30:52 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/861/21miyvdq/websocket
2025-09-16 23:30:52 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/861/21miyvdq/websocket", parameters={}
2025-09-16 23:30:52 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:30:52 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/861/21miyvdq/websocket
2025-09-16 23:30:52 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:30:52 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:30:52 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=21miyvdq]
2025-09-16 23:30:52 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/187/gofmyl3w/websocket
2025-09-16 23:30:52 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=21miyvdq
2025-09-16 23:30:52 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/187/gofmyl3w/websocket
2025-09-16 23:30:52 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/187/gofmyl3w/websocket", parameters={}
2025-09-16 23:30:52 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:30:52 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/187/gofmyl3w/websocket
2025-09-16 23:30:52 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:30:52 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:30:52 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=gofmyl3w]
2025-09-16 23:30:52 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=21miyvdq, lookupDestination='/chat.join'
2025-09-16 23:30:52 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-user21miyvdq subscriptionId=sub-0 session=21miyvdq payload=byte[0]
2025-09-16 23:30:52 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:30:52 [clientInboundChannel-7] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=21miyvdq
2025-09-16 23:30:52 [clientInboundChannel-7] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:31:02 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=21miyvdq, lookupDestination='/chat.sendMessage'
2025-09-16 23:31:02 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 23:31:02 [clientInboundChannel-10] INFO  c.c.c.WebSocketChatController -  WebSocket message received: chatId=2, content=  , principal=null, sessionId=21miyvdq
2025-09-16 23:31:02 [clientInboundChannel-10] WARN  c.c.c.WebSocketChatController -  No authenticated user, proceeding with anonymous processing
2025-09-16 23:31:02 [clientInboundChannel-10] INFO  c.c.c.WebSocketChatController -  Processing AI response for message:   
2025-09-16 23:31:02 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.w.r.f.client.ExchangeFunctions - [44fe012e] HTTP POST http://localhost:11434/api/generate
2025-09-16 23:31:02 [ForkJoinPool.commonPool-worker-1] ERROR i.n.r.d.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-09-16 23:31:02 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [44fe012e] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@7406355c]
2025-09-16 23:31:03 [MessageBroker-4] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 2 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 12, active threads = 0, queued tasks = 0, completed tasks = 12], outboundChannel[pool size = 1, active threads = 0, queued tasks = 0, completed tasks = 1], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 3, completed tasks = 3]
2025-09-16 23:31:14 [reactor-http-nio-2] DEBUG o.s.w.r.f.client.ExchangeFunctions - [44fe012e] [b897ba4a-1] Response 200 OK
2025-09-16 23:31:14 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [44fe012e] [b897ba4a-1] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@c1089b4]
2025-09-16 23:31:14 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=21miyvdq: ! 
2025-09-16 23:31:14 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/21miyvdq/queue/chat/2
2025-09-16 23:31:14 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=21miyvdq:  
2025-09-16 23:31:14 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/21miyvdq/queue/chat/2
2025-09-16 23:31:14 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=21miyvdq: ? 
2025-09-16 23:31:14 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/21miyvdq/queue/chat/2
2025-09-16 23:31:14 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=21miyvdq: 
2025-09-16 23:31:14 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/21miyvdq/queue/chat/2
2025-09-16 23:31:14 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending streaming completion signal to sessionId=21miyvdq
2025-09-16 23:31:14 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Completion signal to destination: /user/21miyvdq/queue/chat/2
2025-09-16 23:33:36 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=gofmyl3w] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:33:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=21miyvdq] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:33:36 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session gofmyl3w
2025-09-16 23:33:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 21miyvdq
2025-09-16 23:33:36 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=gofmyl3w
2025-09-16 23:33:36 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=21miyvdq
2025-09-16 23:33:36 [clientOutboundChannel-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=gofmyl3w}], simpSessionId=gofmyl3w}]
2025-09-16 23:33:36 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=21miyvdq}], simpSessionId=21miyvdq}]
2025-09-16 23:33:36 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:33:36 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:33:36 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:33:36 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:33:36 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:33:36 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:33:36 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:33:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:33:36 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:33:36 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:33:36 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:33:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:33:36 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@9e24544]
2025-09-16 23:33:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@7709602]
2025-09-16 23:33:36 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:33:36 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:33:36 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:33:36 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:33:36 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:33:36 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:33:36 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:33:36 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:33:36 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:33:36 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:33:36 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:33:36 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:33:36 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:33:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:33:36 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:33:36 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:33:36 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@724b4857, com.chatgemma.dto.response.ChatResponse@165364dd]]
2025-09-16 23:33:36 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@42afe495, com.chatgemma.dto.response.ChatResponse@105c598a]]
2025-09-16 23:33:36 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:33:36 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:33:36 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:33:36 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:33:36 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033216522
2025-09-16 23:33:36 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033216521
2025-09-16 23:33:36 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033216521
2025-09-16 23:33:36 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033216522
2025-09-16 23:33:36 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033216521", parameters={masked}
2025-09-16 23:33:36 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033216522", parameters={masked}
2025-09-16 23:33:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:33:36 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:33:36 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033216521
2025-09-16 23:33:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033216522
2025-09-16 23:33:36 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:33:36 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:33:36 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:33:36 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:33:36 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/640/ko2lkpo0/websocket
2025-09-16 23:33:36 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/640/ko2lkpo0/websocket
2025-09-16 23:33:36 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/640/ko2lkpo0/websocket", parameters={}
2025-09-16 23:33:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:33:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/640/ko2lkpo0/websocket
2025-09-16 23:33:36 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:33:36 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:33:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ko2lkpo0]
2025-09-16 23:33:36 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/480/hjwu2atx/websocket
2025-09-16 23:33:36 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/480/hjwu2atx/websocket
2025-09-16 23:33:36 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/480/hjwu2atx/websocket", parameters={}
2025-09-16 23:33:36 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:33:36 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/480/hjwu2atx/websocket
2025-09-16 23:33:36 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:33:36 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:33:36 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=hjwu2atx]
2025-09-16 23:33:36 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=hjwu2atx
2025-09-16 23:33:36 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-userhjwu2atx subscriptionId=sub-0 session=hjwu2atx payload=byte[0]
2025-09-16 23:33:36 [clientInboundChannel-25] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=hjwu2atx, lookupDestination='/chat.join'
2025-09-16 23:33:36 [clientInboundChannel-25] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:33:36 [clientInboundChannel-25] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=hjwu2atx
2025-09-16 23:33:36 [clientInboundChannel-25] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:33:42 [MessageBroker-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [gofmyl3w, 21miyvdq]
2025-09-16 23:33:45 [clientInboundChannel-28] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=hjwu2atx, lookupDestination='/chat.sendMessage'
2025-09-16 23:33:45 [clientInboundChannel-28] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 23:33:45 [clientInboundChannel-28] INFO  c.c.c.WebSocketChatController -  WebSocket message received: chatId=2, content=,  , principal=null, sessionId=hjwu2atx
2025-09-16 23:33:45 [clientInboundChannel-28] WARN  c.c.c.WebSocketChatController -  No authenticated user, proceeding with anonymous processing
2025-09-16 23:33:45 [clientInboundChannel-28] INFO  c.c.c.WebSocketChatController -  Processing AI response for message: ,  
2025-09-16 23:33:45 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.w.r.f.client.ExchangeFunctions - [4dd3cc03] HTTP POST http://localhost:11434/api/generate
2025-09-16 23:33:45 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [4dd3cc03] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@3229a092]
2025-09-16 23:33:47 [reactor-http-nio-2] DEBUG o.s.w.r.f.client.ExchangeFunctions - [4dd3cc03] [b897ba4a-2] Response 200 OK
2025-09-16 23:33:47 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [4dd3cc03] [b897ba4a-2] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@20748603]
2025-09-16 23:33:47 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=hjwu2atx: , 
2025-09-16 23:33:47 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/hjwu2atx/queue/chat/2
2025-09-16 23:33:47 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=hjwu2atx:  
2025-09-16 23:33:47 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/hjwu2atx/queue/chat/2
2025-09-16 23:33:47 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=hjwu2atx: ? 
2025-09-16 23:33:47 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/hjwu2atx/queue/chat/2
2025-09-16 23:33:47 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=hjwu2atx:  
2025-09-16 23:33:47 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/hjwu2atx/queue/chat/2
2025-09-16 23:33:47 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=hjwu2atx:  
2025-09-16 23:33:47 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/hjwu2atx/queue/chat/2
2025-09-16 23:33:48 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=hjwu2atx:  
2025-09-16 23:33:48 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/hjwu2atx/queue/chat/2
2025-09-16 23:33:48 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=hjwu2atx: !
2025-09-16 23:33:48 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/hjwu2atx/queue/chat/2
2025-09-16 23:33:48 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending streaming completion signal to sessionId=hjwu2atx
2025-09-16 23:33:48 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Completion signal to destination: /user/hjwu2atx/queue/chat/2
2025-09-16 23:36:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ko2lkpo0] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:36:57 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=hjwu2atx] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:36:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ko2lkpo0
2025-09-16 23:36:57 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session hjwu2atx
2025-09-16 23:36:57 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=hjwu2atx
2025-09-16 23:36:57 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ko2lkpo0
2025-09-16 23:36:57 [clientOutboundChannel-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=ko2lkpo0}], simpSessionId=ko2lkpo0}]
2025-09-16 23:36:57 [clientOutboundChannel-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=hjwu2atx}], simpSessionId=hjwu2atx}]
2025-09-16 23:36:57 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:36:57 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:36:57 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:36:57 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:36:57 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:36:57 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:36:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:36:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:36:57 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:36:57 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:36:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:36:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:36:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@116d9277]
2025-09-16 23:36:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@4f80d59c]
2025-09-16 23:36:57 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:36:57 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:36:57 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:36:57 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:36:57 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:36:57 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:36:57 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:36:57 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:36:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:36:57 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:36:57 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:36:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:36:57 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:36:57 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:36:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:36:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:36:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@79d0e827, com.chatgemma.dto.response.ChatResponse@1095b279]]
2025-09-16 23:36:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@36c7567b, com.chatgemma.dto.response.ChatResponse@3a6e324d]]
2025-09-16 23:36:57 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:36:57 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:36:57 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:36:57 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:36:57 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033417906
2025-09-16 23:36:57 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033417906
2025-09-16 23:36:57 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033417906
2025-09-16 23:36:57 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033417906
2025-09-16 23:36:57 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033417906", parameters={masked}
2025-09-16 23:36:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033417906", parameters={masked}
2025-09-16 23:36:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:36:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:36:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033417906
2025-09-16 23:36:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033417906
2025-09-16 23:36:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:36:57 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:36:57 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:36:57 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:36:57 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/786/zh1ispth/websocket
2025-09-16 23:36:57 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/786/zh1ispth/websocket
2025-09-16 23:36:57 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/786/zh1ispth/websocket", parameters={}
2025-09-16 23:36:57 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:36:57 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/786/zh1ispth/websocket
2025-09-16 23:36:57 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:36:57 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:36:57 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=zh1ispth]
2025-09-16 23:36:57 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/392/sk2qudta/websocket
2025-09-16 23:36:57 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/392/sk2qudta/websocket
2025-09-16 23:36:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/392/sk2qudta/websocket", parameters={}
2025-09-16 23:36:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:36:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/392/sk2qudta/websocket
2025-09-16 23:36:57 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:36:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:36:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=sk2qudta]
2025-09-16 23:36:57 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=zh1ispth
2025-09-16 23:36:57 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-userzh1ispth subscriptionId=sub-0 session=zh1ispth payload=byte[0]
2025-09-16 23:36:57 [clientInboundChannel-43] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=zh1ispth, lookupDestination='/chat.join'
2025-09-16 23:36:57 [clientInboundChannel-43] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:36:57 [clientInboundChannel-43] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=zh1ispth
2025-09-16 23:36:57 [clientInboundChannel-43] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:37:02 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [hjwu2atx, ko2lkpo0]
2025-09-16 23:37:04 [clientInboundChannel-46] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=zh1ispth, lookupDestination='/chat.sendMessage'
2025-09-16 23:37:04 [clientInboundChannel-46] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 23:37:04 [clientInboundChannel-46] INFO  c.c.c.WebSocketChatController -  WebSocket message received: chatId=2, content=  , principal=null, sessionId=zh1ispth
2025-09-16 23:37:04 [clientInboundChannel-46] WARN  c.c.c.WebSocketChatController -  No authenticated user, proceeding with anonymous processing
2025-09-16 23:37:04 [clientInboundChannel-46] INFO  c.c.c.WebSocketChatController -  Processing AI response for message:   
2025-09-16 23:37:04 [ForkJoinPool.commonPool-worker-3] DEBUG o.s.w.r.f.client.ExchangeFunctions - [5e17bb5d] HTTP POST http://localhost:11434/api/generate
2025-09-16 23:37:04 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [5e17bb5d] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@40093415]
2025-09-16 23:37:06 [reactor-http-nio-2] DEBUG o.s.w.r.f.client.ExchangeFunctions - [5e17bb5d] [b897ba4a-3] Response 200 OK
2025-09-16 23:37:06 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [5e17bb5d] [b897ba4a-3] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@28d0b4f0]
2025-09-16 23:37:06 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=zh1ispth: , 
2025-09-16 23:37:06 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/zh1ispth/queue/chat/2
2025-09-16 23:37:06 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=zh1ispth: ! 
2025-09-16 23:37:06 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/zh1ispth/queue/chat/2
2025-09-16 23:37:06 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=zh1ispth:  
2025-09-16 23:37:06 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/zh1ispth/queue/chat/2
2025-09-16 23:37:06 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=zh1ispth: ? 
2025-09-16 23:37:06 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/zh1ispth/queue/chat/2
2025-09-16 23:37:06 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=zh1ispth: 
2025-09-16 23:37:06 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/zh1ispth/queue/chat/2
2025-09-16 23:37:06 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending streaming completion signal to sessionId=zh1ispth
2025-09-16 23:37:06 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Completion signal to destination: /user/zh1ispth/queue/chat/2
2025-09-16 23:37:18 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=sk2qudta] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:37:18 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session sk2qudta
2025-09-16 23:37:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=zh1ispth] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:37:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session zh1ispth
2025-09-16 23:37:18 [clientInboundChannel-51] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=zh1ispth
2025-09-16 23:37:18 [clientInboundChannel-53] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=sk2qudta
2025-09-16 23:37:18 [clientOutboundChannel-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=zh1ispth}], simpSessionId=zh1ispth}]
2025-09-16 23:37:18 [clientOutboundChannel-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=sk2qudta}], simpSessionId=sk2qudta}]
2025-09-16 23:37:18 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:37:18 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:37:18 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:37:18 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:37:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:37:18 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:37:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:37:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:37:18 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:37:18 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:37:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:37:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:37:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@63d1899c]
2025-09-16 23:37:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@12289a25]
2025-09-16 23:37:18 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:18 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:18 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:18 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:37:18 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:37:18 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:37:18 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:37:18 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:37:18 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:37:18 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:37:18 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:37:18 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:37:18 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:37:18 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:37:18 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:37:18 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@ddb29ec, com.chatgemma.dto.response.ChatResponse@1d289f44]]
2025-09-16 23:37:18 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@2125ac7f, com.chatgemma.dto.response.ChatResponse@6a7f7ea8]]
2025-09-16 23:37:18 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:18 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:18 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:18 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:18 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033438819
2025-09-16 23:37:18 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033438819
2025-09-16 23:37:18 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033438819
2025-09-16 23:37:18 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033438819
2025-09-16 23:37:18 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033438819", parameters={masked}
2025-09-16 23:37:18 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033438819", parameters={masked}
2025-09-16 23:37:18 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:37:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:37:18 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033438819
2025-09-16 23:37:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033438819
2025-09-16 23:37:18 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:18 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:18 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:18 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:18 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/436/r5tx1r2i/websocket
2025-09-16 23:37:18 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/436/r5tx1r2i/websocket
2025-09-16 23:37:18 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/436/r5tx1r2i/websocket", parameters={}
2025-09-16 23:37:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:37:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/436/r5tx1r2i/websocket
2025-09-16 23:37:18 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:18 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:37:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=r5tx1r2i]
2025-09-16 23:37:18 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/350/3pxdulmb/websocket
2025-09-16 23:37:18 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/350/3pxdulmb/websocket
2025-09-16 23:37:18 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/350/3pxdulmb/websocket", parameters={}
2025-09-16 23:37:18 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:37:18 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/350/3pxdulmb/websocket
2025-09-16 23:37:18 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:18 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:37:18 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3pxdulmb]
2025-09-16 23:37:18 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=3pxdulmb
2025-09-16 23:37:18 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-user3pxdulmb subscriptionId=sub-0 session=3pxdulmb payload=byte[0]
2025-09-16 23:37:18 [clientInboundChannel-37] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=3pxdulmb, lookupDestination='/chat.join'
2025-09-16 23:37:18 [clientInboundChannel-37] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:37:18 [clientInboundChannel-37] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=3pxdulmb
2025-09-16 23:37:18 [clientInboundChannel-37] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=r5tx1r2i] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3pxdulmb] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3pxdulmb
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session r5tx1r2i
2025-09-16 23:37:19 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=r5tx1r2i
2025-09-16 23:37:19 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=3pxdulmb
2025-09-16 23:37:19 [clientOutboundChannel-11] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=r5tx1r2i}], simpSessionId=r5tx1r2i}]
2025-09-16 23:37:19 [clientOutboundChannel-12] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=3pxdulmb}], simpSessionId=3pxdulmb}]
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@364e5616]
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@5e63c619]
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@2ce3c795, com.chatgemma.dto.response.ChatResponse@44a0b649]]
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@49bae4fe, com.chatgemma.dto.response.ChatResponse@c20567c]]
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033439224
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033439224
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033439224
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033439224
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033439224", parameters={masked}
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033439224", parameters={masked}
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033439224
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033439224
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/961/encw4xgg/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/961/encw4xgg/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/961/encw4xgg/websocket", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/961/encw4xgg/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=encw4xgg]
2025-09-16 23:37:19 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=encw4xgg
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/526/pf1d11zn/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/526/pf1d11zn/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/526/pf1d11zn/websocket", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/526/pf1d11zn/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=pf1d11zn]
2025-09-16 23:37:19 [clientInboundChannel-50] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-userencw4xgg subscriptionId=sub-0 session=encw4xgg payload=byte[0]
2025-09-16 23:37:19 [clientInboundChannel-51] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=encw4xgg, lookupDestination='/chat.join'
2025-09-16 23:37:19 [clientInboundChannel-51] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:37:19 [clientInboundChannel-51] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=encw4xgg
2025-09-16 23:37:19 [clientInboundChannel-51] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=pf1d11zn] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=encw4xgg] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session pf1d11zn
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session encw4xgg
2025-09-16 23:37:19 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=encw4xgg
2025-09-16 23:37:19 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=pf1d11zn
2025-09-16 23:37:19 [clientOutboundChannel-15] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=encw4xgg}], simpSessionId=encw4xgg}]
2025-09-16 23:37:19 [clientOutboundChannel-14] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=pf1d11zn}], simpSessionId=pf1d11zn}]
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@1e7ccf89]
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@182f4154]
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@4c5cb031, com.chatgemma.dto.response.ChatResponse@74a3715]]
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@1c9821f1, com.chatgemma.dto.response.ChatResponse@566b5b08]]
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033439410
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033439410
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033439410
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033439410
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033439410", parameters={masked}
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033439410", parameters={masked}
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033439410
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033439410
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/940/srvwcaqn/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/940/srvwcaqn/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/940/srvwcaqn/websocket", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/940/srvwcaqn/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=srvwcaqn]
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=srvwcaqn] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session srvwcaqn
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/570/1wymydmr/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/570/1wymydmr/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/570/1wymydmr/websocket", parameters={}
2025-09-16 23:37:19 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=srvwcaqn
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/570/1wymydmr/websocket
2025-09-16 23:37:19 [clientOutboundChannel-16] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=srvwcaqn}], simpSessionId=srvwcaqn}]
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=1wymydmr]
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=1wymydmr]
java.io.IOException: java.io.IOException: Broken pipe
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:792)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.initializeDelegateSession(WebSocketServerSockJsSession.java:164)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.afterConnectionEstablished(SockJsWebSocketHandler.java:88)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onOpen(StandardWebSocketHandlerAdapter.java:103)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.init(WsHttpUpgradeHandler.java:131)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:947)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.io.IOException: Broken pipe
	at java.base/sun.nio.ch.FileDispatcherImpl.writev0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:66)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:217)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:153)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:563)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:134)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 17 common frames omitted
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=1wymydmr] closed with CloseStatus[code=1006, reason=Broken pipe]
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 1wymydmr
2025-09-16 23:37:19 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=1wymydmr
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing due to transport error for WebSocketServerSockJsSession[id=1wymydmr]
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=1wymydmr]
java.io.IOException: java.io.IOException: Broken pipe
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.initializeDelegateSession(WebSocketServerSockJsSession.java:164)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.afterConnectionEstablished(SockJsWebSocketHandler.java:88)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onOpen(StandardWebSocketHandlerAdapter.java:103)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.init(WsHttpUpgradeHandler.java:131)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:947)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.io.IOException: Broken pipe
	at java.base/sun.nio.ch.FileDispatcherImpl.writev0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:66)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:217)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:153)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:563)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:134)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 17 common frames omitted
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=1wymydmr]
java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.fillReadBuffer(NioEndpoint.java:1251)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.read(NioEndpoint.java:1181)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:74)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-09-16 23:37:19 [clientOutboundChannel-17] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=1wymydmr}], simpSessionId=1wymydmr}]
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@73568913]
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@6041533f]
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@4cdec58d, com.chatgemma.dto.response.ChatResponse@312c2cca]]
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@569a8814, com.chatgemma.dto.response.ChatResponse@34800549]]
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033439587
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033439586
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033439587
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033439586
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033439587", parameters={masked}
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033439586", parameters={masked}
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033439587
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033439586
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/340/0ul0icus/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/340/0ul0icus/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/340/0ul0icus/websocket", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/340/0ul0icus/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0ul0icus]
2025-09-16 23:37:19 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=0ul0icus
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/765/nr3qb3zl/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/765/nr3qb3zl/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/765/nr3qb3zl/websocket", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/765/nr3qb3zl/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=nr3qb3zl]
2025-09-16 23:37:19 [clientInboundChannel-48] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=0ul0icus, lookupDestination='/chat.join'
2025-09-16 23:37:19 [clientInboundChannel-46] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-user0ul0icus subscriptionId=sub-0 session=0ul0icus payload=byte[0]
2025-09-16 23:37:19 [clientInboundChannel-48] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:37:19 [clientInboundChannel-48] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=0ul0icus
2025-09-16 23:37:19 [clientInboundChannel-48] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=nr3qb3zl] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:37:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session nr3qb3zl
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0ul0icus] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:37:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0ul0icus
2025-09-16 23:37:19 [clientInboundChannel-54] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=nr3qb3zl
2025-09-16 23:37:19 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=0ul0icus
2025-09-16 23:37:19 [clientOutboundChannel-19] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=nr3qb3zl}], simpSessionId=nr3qb3zl}]
2025-09-16 23:37:19 [clientOutboundChannel-20] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=0ul0icus}], simpSessionId=0ul0icus}]
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@5d0ad5f6]
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@2aca9cce]
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@7fc93399, com.chatgemma.dto.response.ChatResponse@71bf7763]]
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@4d8bd974, com.chatgemma.dto.response.ChatResponse@7d950756]]
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033439879
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033439879
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033439879
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033439879
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033439879", parameters={masked}
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033439879", parameters={masked}
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033439879
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033439879
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:37:19 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/208/ezst44yf/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/208/ezst44yf/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/208/ezst44yf/websocket", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/208/ezst44yf/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:37:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ezst44yf]
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/291/i0k4ptbo/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/291/i0k4ptbo/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/291/i0k4ptbo/websocket", parameters={}
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/291/i0k4ptbo/websocket
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:37:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=i0k4ptbo]
2025-09-16 23:37:19 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=i0k4ptbo
2025-09-16 23:37:19 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-useri0k4ptbo subscriptionId=sub-0 session=i0k4ptbo payload=byte[0]
2025-09-16 23:37:19 [clientInboundChannel-45] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=i0k4ptbo, lookupDestination='/chat.join'
2025-09-16 23:37:19 [clientInboundChannel-45] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:37:19 [clientInboundChannel-45] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=i0k4ptbo
2025-09-16 23:37:19 [clientInboundChannel-45] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:37:21 [clientInboundChannel-44] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=i0k4ptbo, lookupDestination='/chat.sendMessage'
2025-09-16 23:37:21 [clientInboundChannel-44] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 23:37:21 [clientInboundChannel-44] INFO  c.c.c.WebSocketChatController -  WebSocket message received: chatId=2, content=, principal=null, sessionId=i0k4ptbo
2025-09-16 23:37:21 [clientInboundChannel-44] WARN  c.c.c.WebSocketChatController -  No authenticated user, proceeding with anonymous processing
2025-09-16 23:37:21 [clientInboundChannel-44] INFO  c.c.c.WebSocketChatController -  Processing AI response for message: 
2025-09-16 23:37:21 [ForkJoinPool.commonPool-worker-3] DEBUG o.s.w.r.f.client.ExchangeFunctions - [717ecdce] HTTP POST http://localhost:11434/api/generate
2025-09-16 23:37:21 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [717ecdce] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@5702bc48]
2025-09-16 23:37:23 [reactor-http-nio-2] DEBUG o.s.w.r.f.client.ExchangeFunctions - [717ecdce] [b897ba4a-4] Response 200 OK
2025-09-16 23:37:23 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [717ecdce] [b897ba4a-4] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@53426c35]
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=i0k4ptbo: ! 
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/i0k4ptbo/queue/chat/2
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=i0k4ptbo:  
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/i0k4ptbo/queue/chat/2
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=i0k4ptbo:  
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/i0k4ptbo/queue/chat/2
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=i0k4ptbo: ? 
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/i0k4ptbo/queue/chat/2
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=i0k4ptbo:  
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/i0k4ptbo/queue/chat/2
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=i0k4ptbo:  
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/i0k4ptbo/queue/chat/2
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=i0k4ptbo:  
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/i0k4ptbo/queue/chat/2
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=i0k4ptbo:  
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/i0k4ptbo/queue/chat/2
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=i0k4ptbo:  
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/i0k4ptbo/queue/chat/2
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=i0k4ptbo:  
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/i0k4ptbo/queue/chat/2
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=i0k4ptbo: . 
2025-09-16 23:37:23 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/i0k4ptbo/queue/chat/2
2025-09-16 23:37:24 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=i0k4ptbo: 
2025-09-16 23:37:24 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/i0k4ptbo/queue/chat/2
2025-09-16 23:37:24 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Sending streaming completion signal to sessionId=i0k4ptbo
2025-09-16 23:37:24 [ForkJoinPool.commonPool-worker-3] INFO  c.c.c.WebSocketChatController -  Completion signal to destination: /user/i0k4ptbo/queue/chat/2
2025-09-16 23:37:27 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 10 sessions: [zh1ispth, 3pxdulmb, pf1d11zn, r5tx1r2i, sk2qudta, nr3qb3zl, 0ul0icus, 1wymydmr, encw4xgg, srvwcaqn]
2025-09-16 23:39:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=i0k4ptbo] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:39:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ezst44yf] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:39:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ezst44yf
2025-09-16 23:39:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session i0k4ptbo
2025-09-16 23:39:19 [clientInboundChannel-58] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=i0k4ptbo
2025-09-16 23:39:19 [clientInboundChannel-57] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ezst44yf
2025-09-16 23:39:19 [clientOutboundChannel-22] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=ezst44yf}], simpSessionId=ezst44yf}]
2025-09-16 23:39:19 [clientOutboundChannel-23] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=i0k4ptbo}], simpSessionId=i0k4ptbo}]
2025-09-16 23:39:20 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:39:20 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:39:20 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:39:20 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:39:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:39:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:39:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:39:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:39:20 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:39:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:39:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:39:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:39:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@188b9b3c]
2025-09-16 23:39:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@6954ad56]
2025-09-16 23:39:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:39:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:39:20 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:39:20 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:39:20 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:39:20 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:39:20 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:39:20 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:39:20 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:39:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:39:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:39:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:39:20 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:39:20 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:39:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:39:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:39:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@618b1f2e, com.chatgemma.dto.response.ChatResponse@5528babe]]
2025-09-16 23:39:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@1076e3cb, com.chatgemma.dto.response.ChatResponse@3236d4f3]]
2025-09-16 23:39:20 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:39:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:39:20 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:39:20 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:39:20 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033560080
2025-09-16 23:39:20 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033560079
2025-09-16 23:39:20 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033560079
2025-09-16 23:39:20 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033560080
2025-09-16 23:39:20 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033560079", parameters={masked}
2025-09-16 23:39:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033560080", parameters={masked}
2025-09-16 23:39:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:39:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:39:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033560079
2025-09-16 23:39:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033560080
2025-09-16 23:39:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:39:20 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:39:20 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:39:20 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:39:20 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/479/cfx542cx/websocket
2025-09-16 23:39:20 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/479/cfx542cx/websocket
2025-09-16 23:39:20 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/479/cfx542cx/websocket", parameters={}
2025-09-16 23:39:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:39:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/479/cfx542cx/websocket
2025-09-16 23:39:20 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:39:20 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:39:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=cfx542cx]
2025-09-16 23:39:20 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/180/sui2igy1/websocket
2025-09-16 23:39:20 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/180/sui2igy1/websocket
2025-09-16 23:39:20 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/180/sui2igy1/websocket", parameters={}
2025-09-16 23:39:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:39:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/180/sui2igy1/websocket
2025-09-16 23:39:20 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:39:20 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:39:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=sui2igy1]
2025-09-16 23:39:20 [clientInboundChannel-62] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=sui2igy1
2025-09-16 23:39:20 [clientInboundChannel-66] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-usersui2igy1 subscriptionId=sub-0 session=sui2igy1 payload=byte[0]
2025-09-16 23:39:20 [clientInboundChannel-68] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/chat/2 id=sub-1 session=sui2igy1
2025-09-16 23:39:20 [clientInboundChannel-70] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=sui2igy1, lookupDestination='/chat.join'
2025-09-16 23:39:20 [clientInboundChannel-70] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:39:20 [clientInboundChannel-70] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=sui2igy1
2025-09-16 23:39:20 [clientInboundChannel-70] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:39:27 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [ezst44yf, i0k4ptbo]
2025-09-16 23:39:29 [clientInboundChannel-73] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=sui2igy1, lookupDestination='/chat.sendMessage'
2025-09-16 23:39:29 [clientInboundChannel-73] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 23:39:29 [clientInboundChannel-73] INFO  c.c.c.WebSocketChatController -  WebSocket message received: chatId=2, content=1+1 =?, principal=null, sessionId=sui2igy1
2025-09-16 23:39:29 [clientInboundChannel-73] WARN  c.c.c.WebSocketChatController -  No authenticated user, proceeding with anonymous processing
2025-09-16 23:39:29 [clientInboundChannel-73] INFO  c.c.c.WebSocketChatController -  Processing AI response for message: 1+1 =?
2025-09-16 23:39:30 [ForkJoinPool.commonPool-worker-4] DEBUG o.s.w.r.f.client.ExchangeFunctions - [7c8a9834] HTTP POST http://localhost:11434/api/generate
2025-09-16 23:39:30 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [7c8a9834] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@5a6253d4]
2025-09-16 23:39:31 [reactor-http-nio-2] DEBUG o.s.w.r.f.client.ExchangeFunctions - [7c8a9834] [b897ba4a-5] Response 200 OK
2025-09-16 23:39:31 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [7c8a9834] [b897ba4a-5] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@77380b5c]
2025-09-16 23:39:31 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=sui2igy1: 1 
2025-09-16 23:39:31 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/sui2igy1/queue/chat/2
2025-09-16 23:39:31 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=sui2igy1: + 
2025-09-16 23:39:31 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/sui2igy1/queue/chat/2
2025-09-16 23:39:31 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=sui2igy1: 1 
2025-09-16 23:39:31 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/sui2igy1/queue/chat/2
2025-09-16 23:39:31 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=sui2igy1: = 
2025-09-16 23:39:31 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/sui2igy1/queue/chat/2
2025-09-16 23:39:31 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=sui2igy1: 2
2025-09-16 23:39:31 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/sui2igy1/queue/chat/2
2025-09-16 23:39:31 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending streaming completion signal to sessionId=sui2igy1
2025-09-16 23:39:31 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Completion signal to destination: /user/sui2igy1/queue/chat/2
2025-09-16 23:40:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=sui2igy1] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:40:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=cfx542cx] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:40:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session cfx542cx
2025-09-16 23:40:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session sui2igy1
2025-09-16 23:40:13 [clientInboundChannel-78] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=cfx542cx
2025-09-16 23:40:13 [clientInboundChannel-77] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=sui2igy1
2025-09-16 23:40:13 [clientOutboundChannel-25] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=cfx542cx}], simpSessionId=cfx542cx}]
2025-09-16 23:40:13 [clientOutboundChannel-26] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=sui2igy1}], simpSessionId=sui2igy1}]
2025-09-16 23:40:13 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:40:13 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:40:13 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:40:13 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:40:13 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:40:13 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:40:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:40:13 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:40:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:40:13 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:40:13 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:40:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:40:13 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@6cb526aa]
2025-09-16 23:40:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@210b4cd8]
2025-09-16 23:40:13 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:40:13 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:40:13 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:40:13 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:40:13 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:40:13 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:40:13 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:40:13 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:40:13 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:40:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:40:13 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:40:13 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:40:13 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:40:13 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:40:13 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:40:13 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@255001f6, com.chatgemma.dto.response.ChatResponse@6405e4dd]]
2025-09-16 23:40:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:40:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@32f5511b, com.chatgemma.dto.response.ChatResponse@355e0db0]]
2025-09-16 23:40:13 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:40:13 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:40:13 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:40:13 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:40:13 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033613413
2025-09-16 23:40:13 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033613413
2025-09-16 23:40:13 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033613413", parameters={masked}
2025-09-16 23:40:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:40:13 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033613413
2025-09-16 23:40:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033613413
2025-09-16 23:40:13 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033613413
2025-09-16 23:40:13 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033613413", parameters={masked}
2025-09-16 23:40:13 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:40:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:40:13 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:40:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033613413
2025-09-16 23:40:13 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:40:13 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:40:13 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/085/eesgcwil/websocket
2025-09-16 23:40:13 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/085/eesgcwil/websocket
2025-09-16 23:40:13 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/085/eesgcwil/websocket", parameters={}
2025-09-16 23:40:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:40:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/085/eesgcwil/websocket
2025-09-16 23:40:13 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:40:13 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:40:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=eesgcwil]
2025-09-16 23:40:13 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/652/slwrxpfz/websocket
2025-09-16 23:40:13 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/652/slwrxpfz/websocket
2025-09-16 23:40:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/652/slwrxpfz/websocket", parameters={}
2025-09-16 23:40:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3709a547
2025-09-16 23:40:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/652/slwrxpfz/websocket
2025-09-16 23:40:13 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:40:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:40:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=slwrxpfz]
2025-09-16 23:40:13 [clientInboundChannel-60] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=slwrxpfz
2025-09-16 23:40:13 [clientInboundChannel-61] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/chat/2 id=sub-1 session=slwrxpfz
2025-09-16 23:40:13 [clientInboundChannel-63] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-userslwrxpfz subscriptionId=sub-0 session=slwrxpfz payload=byte[0]
2025-09-16 23:40:13 [clientInboundChannel-67] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=slwrxpfz, lookupDestination='/chat.join'
2025-09-16 23:40:13 [clientInboundChannel-67] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:40:13 [clientInboundChannel-67] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=slwrxpfz
2025-09-16 23:40:13 [clientInboundChannel-67] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:40:22 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [cfx542cx, sui2igy1]
2025-09-16 23:40:24 [clientInboundChannel-79] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=slwrxpfz, lookupDestination='/chat.sendMessage'
2025-09-16 23:40:24 [clientInboundChannel-79] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 23:40:24 [clientInboundChannel-79] INFO  c.c.c.WebSocketChatController -  WebSocket message received: chatId=2, content=1+1 = ?, principal=null, sessionId=slwrxpfz
2025-09-16 23:40:24 [clientInboundChannel-79] WARN  c.c.c.WebSocketChatController -  No authenticated user, proceeding with anonymous processing
2025-09-16 23:40:24 [clientInboundChannel-79] INFO  c.c.c.WebSocketChatController -  Processing AI response for message: 1+1 = ?
2025-09-16 23:40:24 [ForkJoinPool.commonPool-worker-4] DEBUG o.s.w.r.f.client.ExchangeFunctions - [7672f344] HTTP POST http://localhost:11434/api/generate
2025-09-16 23:40:24 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [7672f344] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@359a090f]
2025-09-16 23:40:25 [reactor-http-nio-2] DEBUG o.s.w.r.f.client.ExchangeFunctions - [7672f344] [b897ba4a-6] Response 200 OK
2025-09-16 23:40:25 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [7672f344] [b897ba4a-6] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@75f9f84d]
2025-09-16 23:40:25 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=slwrxpfz: 1 
2025-09-16 23:40:25 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/slwrxpfz/queue/chat/2
2025-09-16 23:40:25 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=slwrxpfz: + 
2025-09-16 23:40:25 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/slwrxpfz/queue/chat/2
2025-09-16 23:40:25 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=slwrxpfz: 1 
2025-09-16 23:40:25 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/slwrxpfz/queue/chat/2
2025-09-16 23:40:25 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=slwrxpfz: = 
2025-09-16 23:40:25 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/slwrxpfz/queue/chat/2
2025-09-16 23:40:25 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=slwrxpfz: 2
2025-09-16 23:40:25 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending to destination: /user/slwrxpfz/queue/chat/2
2025-09-16 23:40:25 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Sending streaming completion signal to sessionId=slwrxpfz
2025-09-16 23:40:25 [ForkJoinPool.commonPool-worker-4] INFO  c.c.c.WebSocketChatController -  Completion signal to destination: /user/slwrxpfz/queue/chat/2
2025-09-16 23:41:00 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-16 23:41:00 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-16 23:41:00 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-09-16 23:41:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session slwrxpfz with CloseStatus[code=1001, reason=null]
2025-09-16 23:41:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=slwrxpfz]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:792)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 23:41:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 23:41:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=slwrxpfz] closed with CloseStatus[code=1001, reason=null]
2025-09-16 23:41:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session slwrxpfz
2025-09-16 23:41:00 [clientInboundChannel-83] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=slwrxpfz
2025-09-16 23:41:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session eesgcwil with CloseStatus[code=1001, reason=null]
2025-09-16 23:41:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=eesgcwil]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:792)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 23:41:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 23:41:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=eesgcwil] closed with CloseStatus[code=1001, reason=null]
2025-09-16 23:41:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session eesgcwil
2025-09-16 23:41:00 [clientInboundChannel-86] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=eesgcwil
2025-09-16 23:41:00 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-09-16 23:41:00 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-09-16 23:41:00 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6575a12c]]
2025-09-16 23:41:00 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6575a12c]
2025-09-16 23:41:00 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6575a12c]
2025-09-16 23:41:00 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-09-16 23:41:00 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:41:00 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:41:00 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-09-16 23:41:00 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-09-16 23:41:00 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-09-16 23:42:39 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Starting ChatGemmaApplication using Java 17.0.15 with PID 97134 (/Users/picpal/Desktop/workspace/chatGemma/backend/build/classes/java/main started by picpal in /Users/picpal/Desktop/workspace/chatGemma/backend)
2025-09-16 23:42:39 [restartedMain] DEBUG com.chatgemma.ChatGemmaApplication - Running with Spring Boot v3.4.0, Spring v6.2.0
2025-09-16 23:42:39 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - The following 1 profile is active: "dev"
2025-09-16 23:42:39 [restartedMain] INFO  o.s.b.d.restart.ChangeableUrls - The Class-Path manifest attribute in /Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/ojdbc8-23.5.0.24.07.jar referenced one or more files that do not exist: file:/Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/oraclepki.jar
2025-09-16 23:42:39 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-09-16 23:42:39 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-09-16 23:42:39 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-16 23:42:39 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 50 ms. Found 4 JPA repository interfaces.
2025-09-16 23:42:39 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-16 23:42:39 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-16 23:42:39 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.33]
2025-09-16 23:42:39 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-16 23:42:39 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 505 ms
2025-09-16 23:42:39 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-09-16 23:42:40 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:file:./data/chatgemma user=SA
2025-09-16 23:42:40 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-09-16 23:42:40 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./data/chatgemma'
2025-09-16 23:42:40 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-16 23:42:40 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.2.Final
2025-09-16 23:42:40 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-09-16 23:42:40 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-16 23:42:40 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-16 23:42:40 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-09-16 23:42:40 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-09-16 23:42:40 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists idx_user_username
2025-09-16 23:42:40 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       add constraint idx_user_username unique (username)
2025-09-16 23:42:40 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-09-16 23:42:40 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-09-16 23:42:40 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-16 23:42:40 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-09-16 23:42:40 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 19 mappings in 'requestMappingHandlerMapping'
2025-09-16 23:42:40 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-16 23:42:40 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-16 23:42:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.AdminController:
	
2025-09-16 23:42:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.AuthController:
	
2025-09-16 23:42:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.ChatController:
	
2025-09-16 23:42:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.WebSocketChatController:
	{[MESSAGE],[/chat.join]}: joinChat(String,SimpMessageHeaderAccessor,Principal)
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor,Principal)
2025-09-16 23:42:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-09-16 23:42:41 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-16 23:42:41 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-16 23:42:41 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-16 23:42:41 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-09-16 23:42:41 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-09-16 23:42:41 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-09-16 23:42:41 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4c85190a]
2025-09-16 23:42:41 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4c85190a]
2025-09-16 23:42:41 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4c85190a]]
2025-09-16 23:42:41 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-09-16 23:42:41 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:42:41 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:42:41 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-16 23:42:41 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Started ChatGemmaApplication in 1.808 seconds (process running for 1.962)
2025-09-16 23:42:41 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-09-16 23:43:41 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-09-16 23:43:49 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-16 23:43:49 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-09-16 23:43:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-09-16 23:43:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-09-16 23:43:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-09-16 23:43:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1b1c6fc4
2025-09-16 23:43:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@29daaf4f
2025-09-16 23:43:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-16 23:43:49 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-09-16 23:43:49 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:43:49 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:43:49 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:43:49 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:43:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:43:49 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:43:49 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:43:49 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:43:49 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:43:49 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:43:49 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:43:49 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:43:49 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@64cb3337]
2025-09-16 23:43:49 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@6873c48e]
2025-09-16 23:43:49 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:43:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:43:49 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:43:49 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:43:49 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:43:49 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:43:49 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:43:49 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:43:49 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:43:49 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:43:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:43:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:43:49 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:43:49 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:43:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:43:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:43:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@64512834, com.chatgemma.dto.response.ChatResponse@1c39457f]]
2025-09-16 23:43:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@7197f094, com.chatgemma.dto.response.ChatResponse@76c6969d]]
2025-09-16 23:43:49 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:43:49 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:43:49 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:43:49 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:43:49 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033829125
2025-09-16 23:43:49 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033829125
2025-09-16 23:43:49 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033829125
2025-09-16 23:43:49 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033829125
2025-09-16 23:43:49 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033829125", parameters={masked}
2025-09-16 23:43:49 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033829125", parameters={masked}
2025-09-16 23:43:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@692f5972
2025-09-16 23:43:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@692f5972
2025-09-16 23:43:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033829125
2025-09-16 23:43:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033829125
2025-09-16 23:43:49 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:43:49 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:43:49 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:43:49 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:43:49 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/903/fsb2yx3r/websocket
2025-09-16 23:43:49 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/903/fsb2yx3r/websocket
2025-09-16 23:43:49 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/903/fsb2yx3r/websocket", parameters={}
2025-09-16 23:43:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@692f5972
2025-09-16 23:43:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/903/fsb2yx3r/websocket
2025-09-16 23:43:49 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:43:49 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:43:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=fsb2yx3r]
2025-09-16 23:43:49 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/170/ux5jel22/websocket
2025-09-16 23:43:49 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/170/ux5jel22/websocket
2025-09-16 23:43:49 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/170/ux5jel22/websocket", parameters={}
2025-09-16 23:43:49 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@692f5972
2025-09-16 23:43:49 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/170/ux5jel22/websocket
2025-09-16 23:43:49 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:43:49 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:43:49 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ux5jel22]
2025-09-16 23:43:49 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ux5jel22
2025-09-16 23:43:49 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-userux5jel22 subscriptionId=sub-0 session=ux5jel22 payload=byte[0]
2025-09-16 23:43:49 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/chat/2 id=sub-1 session=ux5jel22
2025-09-16 23:43:49 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=ux5jel22, lookupDestination='/chat.join'
2025-09-16 23:43:49 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:43:49 [clientInboundChannel-10] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=ux5jel22
2025-09-16 23:43:49 [clientInboundChannel-10] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:44:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=fsb2yx3r] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:44:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session fsb2yx3r
2025-09-16 23:44:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ux5jel22] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:44:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ux5jel22
2025-09-16 23:44:24 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=fsb2yx3r
2025-09-16 23:44:24 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ux5jel22
2025-09-16 23:44:24 [clientOutboundChannel-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={}, simpSessionId=fsb2yx3r}], simpSessionId=fsb2yx3r}]
2025-09-16 23:44:24 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=ux5jel22}], simpSessionId=ux5jel22}]
2025-09-16 23:44:24 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:44:24 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:44:24 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:44:24 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:44:24 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:44:24 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:44:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:44:24 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:44:24 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:44:24 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:44:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:44:24 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:44:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@62593c95]
2025-09-16 23:44:24 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@5048d221]
2025-09-16 23:44:24 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:44:24 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:44:24 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:44:24 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:44:24 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:44:24 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:44:24 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:44:24 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:44:24 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:44:24 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:44:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:44:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:44:24 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:44:24 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:44:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:44:24 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:44:24 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@3f3d4935, com.chatgemma.dto.response.ChatResponse@646a4c1e]]
2025-09-16 23:44:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@473c6101, com.chatgemma.dto.response.ChatResponse@5d1a6072]]
2025-09-16 23:44:24 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:44:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:44:24 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:44:24 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:44:24 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033864793
2025-09-16 23:44:24 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758033864793
2025-09-16 23:44:24 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033864793
2025-09-16 23:44:24 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758033864793
2025-09-16 23:44:24 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033864793", parameters={masked}
2025-09-16 23:44:24 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@692f5972
2025-09-16 23:44:24 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758033864793", parameters={masked}
2025-09-16 23:44:24 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@692f5972
2025-09-16 23:44:24 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033864793
2025-09-16 23:44:24 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:44:24 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758033864793
2025-09-16 23:44:24 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:44:24 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:44:24 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:44:24 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/704/iv4mctx4/websocket
2025-09-16 23:44:24 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/704/iv4mctx4/websocket
2025-09-16 23:44:24 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/704/iv4mctx4/websocket", parameters={}
2025-09-16 23:44:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@692f5972
2025-09-16 23:44:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/704/iv4mctx4/websocket
2025-09-16 23:44:24 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:44:24 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:44:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=iv4mctx4]
2025-09-16 23:44:24 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/427/2vvzjnfn/websocket
2025-09-16 23:44:24 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/427/2vvzjnfn/websocket
2025-09-16 23:44:24 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/427/2vvzjnfn/websocket", parameters={}
2025-09-16 23:44:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@692f5972
2025-09-16 23:44:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/427/2vvzjnfn/websocket
2025-09-16 23:44:24 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:44:24 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:44:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=2vvzjnfn]
2025-09-16 23:44:24 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=2vvzjnfn
2025-09-16 23:44:24 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/chat/2-user2vvzjnfn subscriptionId=sub-0 session=2vvzjnfn payload=byte[0]
2025-09-16 23:44:24 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/chat/2 id=sub-1 session=2vvzjnfn
2025-09-16 23:44:24 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=2vvzjnfn, lookupDestination='/chat.join'
2025-09-16 23:44:24 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:44:24 [clientInboundChannel-2] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=2vvzjnfn
2025-09-16 23:44:24 [clientInboundChannel-2] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:44:28 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=2vvzjnfn, lookupDestination='/chat.sendMessage'
2025-09-16 23:44:28 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 23:44:28 [clientInboundChannel-9] INFO  c.c.c.WebSocketChatController -  WebSocket message received: chatId=2, content=1+1 = ?, principal=null, sessionId=2vvzjnfn
2025-09-16 23:44:28 [clientInboundChannel-9] WARN  c.c.c.WebSocketChatController -  No authenticated user, proceeding with anonymous processing
2025-09-16 23:44:28 [clientInboundChannel-9] INFO  c.c.c.WebSocketChatController -  Processing AI response for message: 1+1 = ?
2025-09-16 23:44:28 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.w.r.f.client.ExchangeFunctions - [2f895f5f] HTTP POST http://localhost:11434/api/generate
2025-09-16 23:44:28 [ForkJoinPool.commonPool-worker-1] ERROR i.n.r.d.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-09-16 23:44:28 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [2f895f5f] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@700fa4b7]
2025-09-16 23:44:30 [reactor-http-nio-2] DEBUG o.s.w.r.f.client.ExchangeFunctions - [2f895f5f] [5e345720-1] Response 200 OK
2025-09-16 23:44:30 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [2f895f5f] [5e345720-1] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@7f6c3a51]
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=2vvzjnfn: 1 
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758033868871_ai","chatId":"2","content":"1 ","role":"ASSISTANT","timesta...(truncated)
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Also sending to user destination: /user/2vvzjnfn//queue/chat/2
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=2vvzjnfn: + 
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758033868871_ai","chatId":"2","content":"+ ","role":"ASSISTANT","timesta...(truncated)
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Also sending to user destination: /user/2vvzjnfn//queue/chat/2
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=2vvzjnfn: 1 
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758033868871_ai","chatId":"2","content":"1 ","role":"ASSISTANT","timesta...(truncated)
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Also sending to user destination: /user/2vvzjnfn//queue/chat/2
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=2vvzjnfn: = 
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758033868871_ai","chatId":"2","content":"= ","role":"ASSISTANT","timesta...(truncated)
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Also sending to user destination: /user/2vvzjnfn//queue/chat/2
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=2vvzjnfn: 2
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758033868871_ai","chatId":"2","content":"2","role":"ASSISTANT","timestam...(truncated)
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Also sending to user destination: /user/2vvzjnfn//queue/chat/2
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending streaming completion signal to sessionId=2vvzjnfn
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting completion to destination: /topic/chat/2
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758033868871_ai","chatId":"2","content":"","role":"ASSISTANT","timestamp...(truncated)
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:44:30 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Also sending completion to user destination: /user/2vvzjnfn//queue/chat/2
2025-09-16 23:44:34 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [fsb2yx3r, ux5jel22]
2025-09-16 23:51:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=iv4mctx4] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:51:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session iv4mctx4
2025-09-16 23:51:09 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=2vvzjnfn] closed with CloseStatus[code=1000, reason=null]
2025-09-16 23:51:09 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 2vvzjnfn
2025-09-16 23:51:09 [clientInboundChannel-27] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=iv4mctx4
2025-09-16 23:51:09 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=2vvzjnfn
2025-09-16 23:51:09 [clientOutboundChannel-11] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=iv4mctx4}], simpSessionId=iv4mctx4}]
2025-09-16 23:51:09 [clientOutboundChannel-12] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=2vvzjnfn}], simpSessionId=2vvzjnfn}]
2025-09-16 23:51:09 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:51:09 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-09-16 23:51:09 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:51:09 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-09-16 23:51:09 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:51:09 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-09-16 23:51:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:51:09 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#getCurrentUser(HttpSession)
2025-09-16 23:51:09 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:51:09 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-09-16 23:51:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:51:09 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:51:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@353a910d]
2025-09-16 23:51:09 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@11fa2c59]
2025-09-16 23:51:09 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:51:09 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:51:09 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:51:09 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:51:09 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:51:09 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:51:09 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:51:09 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:51:09 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:51:09 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:51:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:51:09 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:51:09 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:51:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:51:09 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:51:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:51:09 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@14f2af2d, com.chatgemma.dto.response.ChatResponse@5da6bc98]]
2025-09-16 23:51:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@1988cd61, com.chatgemma.dto.response.ChatResponse@1f6c2f33]]
2025-09-16 23:51:09 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:51:09 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:51:09 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:51:09 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:51:09 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758034269228
2025-09-16 23:51:09 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758034269228
2025-09-16 23:51:09 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758034269228
2025-09-16 23:51:09 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758034269228
2025-09-16 23:51:09 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758034269228", parameters={masked}
2025-09-16 23:51:09 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758034269228", parameters={masked}
2025-09-16 23:51:09 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@692f5972
2025-09-16 23:51:09 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@692f5972
2025-09-16 23:51:09 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758034269228
2025-09-16 23:51:09 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758034269228
2025-09-16 23:51:09 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:51:09 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:51:09 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:51:09 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:51:09 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/103/kn5q5gef/websocket
2025-09-16 23:51:09 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/103/kn5q5gef/websocket
2025-09-16 23:51:09 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/103/kn5q5gef/websocket", parameters={}
2025-09-16 23:51:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@692f5972
2025-09-16 23:51:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/103/kn5q5gef/websocket
2025-09-16 23:51:09 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:51:09 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:51:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=kn5q5gef]
2025-09-16 23:51:09 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/298/kyscct3g/websocket
2025-09-16 23:51:09 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/298/kyscct3g/websocket
2025-09-16 23:51:09 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/298/kyscct3g/websocket", parameters={}
2025-09-16 23:51:09 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@692f5972
2025-09-16 23:51:09 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/298/kyscct3g/websocket
2025-09-16 23:51:09 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:51:09 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:51:09 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=kyscct3g]
2025-09-16 23:51:09 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=kyscct3g
2025-09-16 23:51:09 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/chat/2 id=sub-0 session=kyscct3g
2025-09-16 23:51:09 [clientInboundChannel-37] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=kyscct3g, lookupDestination='/chat.join'
2025-09-16 23:51:09 [clientInboundChannel-37] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:51:09 [clientInboundChannel-37] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=kyscct3g
2025-09-16 23:51:09 [clientInboundChannel-37] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:51:13 [clientInboundChannel-40] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=kyscct3g, lookupDestination='/chat.sendMessage'
2025-09-16 23:51:13 [clientInboundChannel-40] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 23:51:13 [clientInboundChannel-40] INFO  c.c.c.WebSocketChatController -  WebSocket message received: chatId=2, content=1+1 = ?, principal=null, sessionId=kyscct3g
2025-09-16 23:51:13 [clientInboundChannel-40] WARN  c.c.c.WebSocketChatController -  No authenticated user, proceeding with anonymous processing
2025-09-16 23:51:13 [clientInboundChannel-40] INFO  c.c.c.WebSocketChatController -  Processing AI response for message: 1+1 = ?
2025-09-16 23:51:13 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.w.r.f.client.ExchangeFunctions - [61104fc4] HTTP POST http://localhost:11434/api/generate
2025-09-16 23:51:13 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [61104fc4] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@3ad0d292]
2025-09-16 23:51:14 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [iv4mctx4, 2vvzjnfn]
2025-09-16 23:51:24 [reactor-http-nio-2] DEBUG o.s.w.r.f.client.ExchangeFunctions - [61104fc4] [5e345720-2] Response 200 OK
2025-09-16 23:51:24 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [61104fc4] [5e345720-2] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@36dd383d]
2025-09-16 23:51:24 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=kyscct3g: 1 
2025-09-16 23:51:24 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:51:24 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034273392_ai","chatId":"2","content":"1 ","role":"ASSISTANT","timesta...(truncated)
2025-09-16 23:51:24 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:51:24 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Also sending to user destination: /user/kyscct3g//queue/chat/2
2025-09-16 23:51:24 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=kyscct3g: + 
2025-09-16 23:51:24 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:51:24 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034273392_ai","chatId":"2","content":"+ ","role":"ASSISTANT","timesta...(truncated)
2025-09-16 23:51:24 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:51:24 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Also sending to user destination: /user/kyscct3g//queue/chat/2
2025-09-16 23:51:24 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=kyscct3g: 1 
2025-09-16 23:51:24 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:51:24 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034273392_ai","chatId":"2","content":"1 ","role":"ASSISTANT","timesta...(truncated)
2025-09-16 23:51:24 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:51:24 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Also sending to user destination: /user/kyscct3g//queue/chat/2
2025-09-16 23:51:25 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=kyscct3g: = 
2025-09-16 23:51:25 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:51:25 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034273392_ai","chatId":"2","content":"= ","role":"ASSISTANT","timesta...(truncated)
2025-09-16 23:51:25 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:51:25 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Also sending to user destination: /user/kyscct3g//queue/chat/2
2025-09-16 23:51:25 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=kyscct3g: 2
2025-09-16 23:51:25 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:51:25 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034273392_ai","chatId":"2","content":"2","role":"ASSISTANT","timestam...(truncated)
2025-09-16 23:51:25 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:51:25 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Also sending to user destination: /user/kyscct3g//queue/chat/2
2025-09-16 23:51:25 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Sending streaming completion signal to sessionId=kyscct3g
2025-09-16 23:51:25 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Broadcasting completion to destination: /topic/chat/2
2025-09-16 23:51:25 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034273392_ai","chatId":"2","content":"","role":"ASSISTANT","timestamp...(truncated)
2025-09-16 23:51:25 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:51:25 [ForkJoinPool.commonPool-worker-2] INFO  c.c.c.WebSocketChatController -  Also sending completion to user destination: /user/kyscct3g//queue/chat/2
2025-09-16 23:51:43 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-16 23:51:43 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-16 23:51:43 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-09-16 23:51:43 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session kn5q5gef with CloseStatus[code=1001, reason=null]
2025-09-16 23:51:43 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=kn5q5gef]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:792)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 23:51:43 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 23:51:43 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=kn5q5gef] closed with CloseStatus[code=1001, reason=null]
2025-09-16 23:51:43 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session kn5q5gef
2025-09-16 23:51:43 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session kyscct3g with CloseStatus[code=1001, reason=null]
2025-09-16 23:51:43 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=kn5q5gef
2025-09-16 23:51:43 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=kyscct3g]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:792)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 23:51:43 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:273)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-09-16 23:51:43 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=kyscct3g] closed with CloseStatus[code=1001, reason=null]
2025-09-16 23:51:43 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session kyscct3g
2025-09-16 23:51:43 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=kyscct3g
2025-09-16 23:51:43 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-09-16 23:51:43 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-09-16 23:51:43 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4c85190a]]
2025-09-16 23:51:43 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4c85190a]
2025-09-16 23:51:43 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4c85190a]
2025-09-16 23:51:43 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-09-16 23:51:43 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:51:43 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:51:43 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-09-16 23:51:43 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-09-16 23:51:43 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-09-16 23:55:46 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Starting ChatGemmaApplication using Java 17.0.15 with PID 3644 (/Users/picpal/Desktop/workspace/chatGemma/backend/build/classes/java/main started by picpal in /Users/picpal/Desktop/workspace/chatGemma/backend)
2025-09-16 23:55:46 [restartedMain] DEBUG com.chatgemma.ChatGemmaApplication - Running with Spring Boot v3.4.0, Spring v6.2.0
2025-09-16 23:55:46 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - The following 1 profile is active: "dev"
2025-09-16 23:55:46 [restartedMain] INFO  o.s.b.d.restart.ChangeableUrls - The Class-Path manifest attribute in /Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/ojdbc8-23.5.0.24.07.jar referenced one or more files that do not exist: file:/Users/picpal/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/23.5.0.24.07/d56a1420cc0e93b141754b33d4f07cf670d026/oraclepki.jar
2025-09-16 23:55:46 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-09-16 23:55:46 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-09-16 23:55:46 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-16 23:55:46 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 47 ms. Found 4 JPA repository interfaces.
2025-09-16 23:55:47 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-16 23:55:47 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-16 23:55:47 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.33]
2025-09-16 23:55:47 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-16 23:55:47 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 514 ms
2025-09-16 23:55:47 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-09-16 23:55:47 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:file:./data/chatgemma user=SA
2025-09-16 23:55:47 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-09-16 23:55:47 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./data/chatgemma'
2025-09-16 23:55:47 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-16 23:55:47 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.2.Final
2025-09-16 23:55:47 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-09-16 23:55:47 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-16 23:55:47 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-16 23:55:47 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-09-16 23:55:47 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-09-16 23:55:47 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists idx_user_username
2025-09-16 23:55:47 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       add constraint idx_user_username unique (username)
2025-09-16 23:55:47 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-09-16 23:55:47 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-09-16 23:55:48 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-16 23:55:48 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-09-16 23:55:48 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 19 mappings in 'requestMappingHandlerMapping'
2025-09-16 23:55:48 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-16 23:55:48 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-16 23:55:48 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.AdminController:
	
2025-09-16 23:55:48 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.AuthController:
	
2025-09-16 23:55:48 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.ChatController:
	
2025-09-16 23:55:48 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.c.c.WebSocketChatController:
	{[MESSAGE],[/chat.join]}: joinChat(String,SimpMessageHeaderAccessor,Principal)
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor,Principal)
2025-09-16 23:55:48 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-09-16 23:55:48 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-16 23:55:48 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-16 23:55:48 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-16 23:55:48 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-09-16 23:55:48 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-09-16 23:55:48 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-09-16 23:55:48 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4d77c110]
2025-09-16 23:55:48 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4d77c110]
2025-09-16 23:55:48 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4d77c110]]
2025-09-16 23:55:48 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-09-16 23:55:48 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:55:48 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-09-16 23:55:48 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-16 23:55:48 [restartedMain] INFO  com.chatgemma.ChatGemmaApplication - Started ChatGemmaApplication in 1.805 seconds (process running for 1.953)
2025-09-16 23:55:48 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-09-16 23:56:48 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-09-16 23:57:19 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-16 23:57:19 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-09-16 23:57:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-09-16 23:57:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-09-16 23:57:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-09-16 23:57:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@77b32c5e
2025-09-16 23:57:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@515e9dfb
2025-09-16 23:57:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-16 23:57:19 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-09-16 23:57:19 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-09-16 23:57:19 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-09-16 23:57:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-09-16 23:57:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpSession)
2025-09-16 23:57:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.chatgemma.dto.request.LoginRequest@a6a8f2d]
2025-09-16 23:57:19 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.approved_at,
        u1_0.approved_by,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.role,
        u1_0.status,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.email=?
2025-09-16 23:57:19 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    /* insert for
        com.chatgemma.entity.AuditLog */insert 
    into
        audit_logs (action, details, ip_address, resource_id, resource_type, timestamp, user_agent, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-09-16 23:57:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:57:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.chatgemma.dto.response.UserResponse@341f2fd0]
2025-09-16 23:57:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:57:19 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:57:19 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:57:19 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/chats
2025-09-16 23:57:19 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:57:19 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/chats
2025-09-16 23:57:19 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:57:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/chats", parameters={}
2025-09-16 23:57:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:57:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.chatgemma.controller.ChatController#getUserChats(HttpSession)
2025-09-16 23:57:19 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:57:19 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        c1_0.id,
        c1_0.created_at,
        c1_0.deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        chats c1_0 
    where
        c1_0.user_id=? 
        and not(c1_0.deleted) 
    order by
        c1_0.updated_at desc
2025-09-16 23:57:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:57:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-16 23:57:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@25187e2c, com.chatgemma.dto.response.ChatResponse@84429b9]]
2025-09-16 23:57:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[com.chatgemma.dto.response.ChatResponse@43c4f97a, com.chatgemma.dto.response.ChatResponse@501cff14]]
2025-09-16 23:57:19 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:57:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:57:19 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:57:19 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:57:19 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758034639891
2025-09-16 23:57:19 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1758034639892
2025-09-16 23:57:19 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758034639892
2025-09-16 23:57:19 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1758034639891
2025-09-16 23:57:19 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758034639892", parameters={masked}
2025-09-16 23:57:19 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1758034639891", parameters={masked}
2025-09-16 23:57:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3fbd308f
2025-09-16 23:57:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3fbd308f
2025-09-16 23:57:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758034639892
2025-09-16 23:57:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1758034639891
2025-09-16 23:57:19 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:57:19 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-16 23:57:19 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:57:19 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:57:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/530/xxzj3j5q/websocket
2025-09-16 23:57:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/530/xxzj3j5q/websocket
2025-09-16 23:57:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/530/xxzj3j5q/websocket", parameters={}
2025-09-16 23:57:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3fbd308f
2025-09-16 23:57:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/530/xxzj3j5q/websocket
2025-09-16 23:57:19 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:57:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:57:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xxzj3j5q]
2025-09-16 23:57:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/624/lt5sgxcd/websocket
2025-09-16 23:57:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/624/lt5sgxcd/websocket
2025-09-16 23:57:19 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/624/lt5sgxcd/websocket", parameters={}
2025-09-16 23:57:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3fbd308f
2025-09-16 23:57:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/624/lt5sgxcd/websocket
2025-09-16 23:57:19 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-16 23:57:19 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-09-16 23:57:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=lt5sgxcd]
2025-09-16 23:57:19 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=lt5sgxcd
2025-09-16 23:57:19 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/chat/2 id=sub-0 session=lt5sgxcd
2025-09-16 23:57:19 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.join session=lt5sgxcd, lookupDestination='/chat.join'
2025-09-16 23:57:19 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#joinChat[3 args]
2025-09-16 23:57:19 [clientInboundChannel-7] INFO  c.c.c.WebSocketChatController - WebSocket chat join: chatId=2, principal=null, sessionId=lt5sgxcd
2025-09-16 23:57:19 [clientInboundChannel-7] INFO  c.c.c.WebSocketChatController - User joined chat room: 2
2025-09-16 23:57:24 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=lt5sgxcd, lookupDestination='/chat.sendMessage'
2025-09-16 23:57:24 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 23:57:24 [clientInboundChannel-10] INFO  c.c.c.WebSocketChatController -  WebSocket message received: chatId=2, content=1+1 =?, principal=null, sessionId=lt5sgxcd
2025-09-16 23:57:24 [clientInboundChannel-10] WARN  c.c.c.WebSocketChatController -  No authenticated user, proceeding with anonymous processing
2025-09-16 23:57:24 [clientInboundChannel-10] INFO  c.c.c.WebSocketChatController -  Processing AI response for message: 1+1 =?
2025-09-16 23:57:24 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.w.r.f.client.ExchangeFunctions - [522cc6a7] HTTP POST http://localhost:11434/api/generate
2025-09-16 23:57:24 [ForkJoinPool.commonPool-worker-1] ERROR i.n.r.d.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-09-16 23:57:24 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [522cc6a7] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@15fc812c]
2025-09-16 23:57:36 [reactor-http-nio-2] DEBUG o.s.w.r.f.client.ExchangeFunctions - [522cc6a7] [9d51800d-1] Response 200 OK
2025-09-16 23:57:36 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [522cc6a7] [9d51800d-1] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@3310267e]
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd: 1 
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034644861_ai","chatId":"2","content":"1 ","role":"ASSISTANT","timesta...(truncated)
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd: + 
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034644861_ai","chatId":"2","content":"+ ","role":"ASSISTANT","timesta...(truncated)
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd: 1 
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034644861_ai","chatId":"2","content":"1 ","role":"ASSISTANT","timesta...(truncated)
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd: = 
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034644861_ai","chatId":"2","content":"= ","role":"ASSISTANT","timesta...(truncated)
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd: 2
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034644861_ai","chatId":"2","content":"2","role":"ASSISTANT","timestam...(truncated)
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending streaming completion signal to sessionId=lt5sgxcd
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting completion to destination: /topic/chat/2
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034644861_ai","chatId":"2","content":"","role":"ASSISTANT","timestamp...(truncated)
2025-09-16 23:57:36 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:45 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=lt5sgxcd, lookupDestination='/chat.sendMessage'
2025-09-16 23:57:45 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking WebSocketChatController#sendMessage[3 args]
2025-09-16 23:57:45 [clientInboundChannel-13] INFO  c.c.c.WebSocketChatController -  WebSocket message received: chatId=2, content= , principal=null, sessionId=lt5sgxcd
2025-09-16 23:57:45 [clientInboundChannel-13] WARN  c.c.c.WebSocketChatController -  No authenticated user, proceeding with anonymous processing
2025-09-16 23:57:45 [clientInboundChannel-13] INFO  c.c.c.WebSocketChatController -  Processing AI response for message:  
2025-09-16 23:57:45 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.w.r.f.client.ExchangeFunctions - [19454903] HTTP POST http://localhost:11434/api/generate
2025-09-16 23:57:45 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [19454903] Encoding [com.chatgemma.service.OllamaServiceImpl$OllamaRequest@3a7dffb]
2025-09-16 23:57:49 [reactor-http-nio-2] DEBUG o.s.w.r.f.client.ExchangeFunctions - [19454903] [9d51800d-2] Response 200 OK
2025-09-16 23:57:49 [reactor-http-nio-2] DEBUG org.springframework.web.HttpLogging - [19454903] [9d51800d-2] Decoded [com.chatgemma.service.OllamaServiceImpl$OllamaResponse@95874a6]
2025-09-16 23:57:49 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd:  
2025-09-16 23:57:49 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034665585_ai","chatId":"2","content":" ","role":"ASSIS...(truncated)
2025-09-16 23:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:49 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd:  
2025-09-16 23:57:49 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034665585_ai","chatId":"2","content":" ","role":"AS...(truncated)
2025-09-16 23:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:49 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd: ! 
2025-09-16 23:57:49 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034665585_ai","chatId":"2","content":"! ","role":"ASSI...(truncated)
2025-09-16 23:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:49 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd:  
2025-09-16 23:57:49 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034665585_ai","chatId":"2","content":"\uD83D\uDE0A ","role":"ASSISTAN...(truncated)
2025-09-16 23:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:49 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd:  
2025-09-16 23:57:49 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034665585_ai","chatId":"2","content":" ","role":"ASSISTANT",...(truncated)
2025-09-16 23:57:49 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd:  
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034665585_ai","chatId":"2","content":" ","role":"ASSISTANT","ti...(truncated)
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd: ? 
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034665585_ai","chatId":"2","content":"? ","role":"A...(truncated)
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd:  
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034665585_ai","chatId":"2","content":" ","role":"ASSISTANT","ti...(truncated)
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd:  
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034665585_ai","chatId":"2","content":" ","role":"ASSISTANT","ti...(truncated)
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd:  
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034665585_ai","chatId":"2","content":" ","role":"ASSISTAN...(truncated)
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd:  
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034665585_ai","chatId":"2","content":" ","role":"ASSISTANT",...(truncated)
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd:  
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034665585_ai","chatId":"2","content":" ","role":"ASSISTANT","ti...(truncated)
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd:  
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034665585_ai","chatId":"2","content":" ","role":"ASSISTAN...(truncated)
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd:  
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034665585_ai","chatId":"2","content":" ","role":"ASSISTAN...(truncated)
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd: . 
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034665585_ai","chatId":"2","content":". ","role":"ASSI...(truncated)
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd:  
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034665585_ai","chatId":"2","content":" ","role":"ASSISTANT","ti...(truncated)
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd:  
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034665585_ai","chatId":"2","content":" ","role":"ASSISTANT","ti...(truncated)
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd:  
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034665585_ai","chatId":"2","content":" ","role":"ASSISTANT",...(truncated)
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd:  
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034665585_ai","chatId":"2","content":" ","role":"ASSISTANT",...(truncated)
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending AI chunk to sessionId=lt5sgxcd: .
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting to destination: /topic/chat/2
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034665585_ai","chatId":"2","content":".","rol...(truncated)
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Sending streaming completion signal to sessionId=lt5sgxcd
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] INFO  c.c.c.WebSocketChatController -  Broadcasting completion to destination: /topic/chat/2
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat/2 session=null payload={"id":"1758034665585_ai","chatId":"2","content":"","role":"ASSISTANT","timestamp...(truncated)
2025-09-16 23:57:50 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
